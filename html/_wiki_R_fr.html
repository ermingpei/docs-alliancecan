<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>R - Alliance Doc</title>
<script>(function(){var className="client-js";var cookie=document.cookie.match(/(?:^|; )ccwikimwclientpreferences=([^;]+)/);if(cookie){cookie[1].split('%2C').forEach(function(pref){className=className.replace(new RegExp('(^| )'+pref.replace(/-clientpref-\w+$|[^\w-]+/g,'')+'-clientpref-\\w+( |$)'),'$1'+pref+'$2');});}document.documentElement.className=className;}());RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":[",\t."," \t,"],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],"wgRequestId":"aDpEhxjNwAxN0UNoraEJ8QAAAVg","wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"R/fr","wgTitle":"R/fr","wgCurRevisionId":155137,"wgRevisionId":155137,"wgArticleId":2634,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[
"Pages using deprecated source tags","Software"],"wgPageViewLanguage":"fr","wgPageContentLanguage":"fr","wgPageContentModel":"wikitext","wgRelevantPageName":"R/fr","wgRelevantArticleId":2634,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgULSAcceptLanguageList":[],"wgMFDisplayWikibaseDescriptions":{"search":false,"watchlist":false,"tagline":false},"wgCiteReferencePreviewsActive":true,"wgTranslatePageTranslation":"translation","wgULSPosition":"personal","wgULSisCompactLinksEnabled":true,"wgVector2022LanguageInHeader":false,"wgULSisLanguageSelectorEmpty":false};RLSTATE={"site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.translate.tag.languages":"ready","ext.pygments":"ready","ext.cite.styles":"ready","skins.vector.styles.legacy":"ready","ext.translate":"ready","codex-search-styles":"ready","ext.uls.pt":"ready"};RLPAGEMODULES=["ext.pygments.view","ext.cite.ux-enhancements","site",
"mediawiki.page.ready","mediawiki.toc","skins.vector.legacy.js","ext.languageSelector","ext.translate.pagetranslation.uls","ext.uls.compactlinks","ext.uls.geoclient","ext.uls.interface","ext.moderation.notify","ext.moderation.notify.desktop"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.impl(function(){return["user.options@12s5i",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
}];});});</script>
<link rel="stylesheet" href="/mediawiki/load.php?lang=en&amp;modules=codex-search-styles%7Cext.cite.styles%7Cext.pygments%2Ctranslate%7Cext.translate.tag.languages%7Cext.uls.pt%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector">
<script async="" src="/mediawiki/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content="">
<link rel="stylesheet" href="/mediawiki/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=1120">
<link rel="icon" href="/mediawiki/resources/assets/Alliance_favicon.png">
<link rel="search" type="application/opensearchdescription+xml" href="/mediawiki/rest.php/v1/search" title="Alliance Doc (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://docs.alliancecan.ca/mediawiki/api.php?action=rsd">
<link rel="alternate" type="application/atom+xml" title="Alliance Doc Atom feed" href="/mediawiki/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector-legacy mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-R_fr rootpage-R_fr skin-vector action-view"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"></div>
	<div class="mw-indicators">
	<div id="mw-indicator-languageselector" class="mw-indicator"><span id="languageselector-box-1" class="languageselector " style=""><form name="languageselector-form-1" id="languageselector-form-1" method="get" action="/mediawiki/index.php" style="display:inline;"><input type="hidden" value="R/fr" name="title"><select name="setlang" id="languageselector-select-1" style=""><option value="aae">Arbërisht</option><option value="ab">аԥсшәа</option><option value="abs">bahasa ambon</option><option value="ace">Acèh</option><option value="acf">Kwéyòl Sent Lisi</option><option value="acm">عراقي</option><option value="ady">адыгабзэ</option><option value="ady-cyrl">адыгабзэ</option><option value="aeb">تونسي / Tûnsî</option><option value="aeb-arab">تونسي</option><option value="aeb-latn">Tûnsî</option><option value="af">Afrikaans</option><option value="aln">Gegë</option><option value="alt">алтай тил</option><option value="am">አማርኛ</option><option value="ami">Pangcah</option><option value="an">aragonés</option><option value="ang">Ænglisc</option><option value="ann">Obolo</option><option value="anp">अंगिका</option><option value="apc">شامي</option><option value="ar">العربية</option><option value="arc">ܐܪܡܝܐ</option><option value="arn">mapudungun</option><option value="arq">جازايرية</option><option value="ary">الدارجة</option><option value="arz">مصرى</option><option value="as">অসমীয়া</option><option value="ase">American sign language</option><option value="ast">asturianu</option><option value="atj">Atikamekw</option><option value="av">авар</option><option value="avk">Kotava</option><option value="awa">अवधी</option><option value="ay">Aymar aru</option><option value="az">azərbaycanca</option><option value="azb">تۆرکجه</option><option value="ba">башҡортса</option><option value="ban">Basa Bali</option><option value="ban-bali">ᬩᬲᬩᬮᬶ</option><option value="bar">Boarisch</option><option value="bbc">Batak Toba</option><option value="bbc-latn">Batak Toba</option><option value="bcc">جهلسری بلوچی</option><option value="bci">wawle</option><option value="bcl">Bikol Central</option><option value="bdr">Bajau Sama</option><option value="be">беларуская</option><option value="be-tarask">беларуская (тарашкевіца)</option><option value="bew">Betawi</option><option value="bg">български</option><option value="bgc">हरियाणवी</option><option value="bgn">روچ کپتین بلوچی</option><option value="bh">भोजपुरी</option><option value="bho">भोजपुरी</option><option value="bi">Bislama</option><option value="bjn">Banjar</option><option value="blk">ပအိုဝ်ႏဘာႏသာႏ</option><option value="bm">bamanankan</option><option value="bn">বাংলা</option><option value="bo">བོད་ཡིག</option><option value="bpy">বিষ্ণুপ্রিয়া মণিপুরী</option><option value="bqi">بختیاری</option><option value="br">brezhoneg</option><option value="brh">Bráhuí</option><option value="bs">bosanski</option><option value="btm">Batak Mandailing</option><option value="bto">Iriga Bicolano</option><option value="bug">Basa Ugi</option><option value="bxr">буряад</option><option value="ca">català</option><option value="cbk-zam">Chavacano de Zamboanga</option><option value="ccp">𑄌𑄋𑄴𑄟𑄳𑄦</option><option value="cdo">閩東語 / Mìng-dĕ̤ng-ngṳ̄</option><option value="ce">нохчийн</option><option value="ceb">Cebuano</option><option value="ch">Chamoru</option><option value="chn">chinuk wawa</option><option value="chr">ᏣᎳᎩ</option><option value="chy">Tsetsêhestâhese</option><option value="ckb">کوردی</option><option value="co">corsu</option><option value="cps">Capiceño</option><option value="cpx">莆仙語 / Pó-sing-gṳ̂</option><option value="cpx-hans">莆仙语（简体）</option><option value="cpx-hant">莆仙語（繁體）</option><option value="cr">Nēhiyawēwin / ᓀᐦᐃᔭᐍᐏᐣ</option><option value="crh">qırımtatarca</option><option value="crh-cyrl">къырымтатарджа (Кирилл)</option><option value="crh-latn">qırımtatarca (Latin)</option><option value="crh-ro">tatarşa</option><option value="cs">čeština</option><option value="csb">kaszëbsczi</option><option value="cu">словѣньскъ / ⰔⰎⰑⰂⰡⰐⰠⰔⰍⰟ</option><option value="cv">чӑвашла</option><option value="cy">Cymraeg</option><option value="da">dansk</option><option value="dag">dagbanli</option><option value="de">Deutsch</option><option value="de-at">Österreichisches Deutsch</option><option value="de-ch">Schweizer Hochdeutsch</option><option value="de-formal">Deutsch (Sie-Form)</option><option value="dga">Dagaare</option><option value="din">Thuɔŋjäŋ</option><option value="diq">Zazaki</option><option value="dsb">dolnoserbski</option><option value="dtp">Kadazandusun</option><option value="dty">डोटेली</option><option value="dua">Duálá</option><option value="dv">ދިވެހިބަސް</option><option value="dz">ཇོང་ཁ</option><option value="ee">eʋegbe</option><option value="efi">Efịk</option><option value="egl">emiliàn e rumagnòl</option><option value="el">Ελληνικά</option><option value="eml">emiliàn e rumagnòl</option><option value="en" selected="">English</option><option value="en-ca">Canadian English</option><option value="en-gb">British English</option><option value="eo">Esperanto</option><option value="es">español</option><option value="es-formal">español (formal)</option><option value="et">eesti</option><option value="eu">euskara</option><option value="ext">estremeñu</option><option value="fa">فارسی</option><option value="fat">mfantse</option><option value="ff">Fulfulde</option><option value="fi">suomi</option><option value="fit">meänkieli</option><option value="fj">Na Vosa Vakaviti</option><option value="fo">føroyskt</option><option value="fon">fɔ̀ngbè</option><option value="fr">français</option><option value="frc">français cadien</option><option value="frp">arpetan</option><option value="frr">Nordfriisk</option><option value="fur">furlan</option><option value="fy">Frysk</option><option value="ga">Gaeilge</option><option value="gaa">Ga</option><option value="gag">Gagauz</option><option value="gan">贛語</option><option value="gan-hans">赣语（简体）</option><option value="gan-hant">贛語（繁體）</option><option value="gcf">kréyòl Gwadloup</option><option value="gcr">kriyòl gwiyannen</option><option value="gd">Gàidhlig</option><option value="gl">galego</option><option value="gld">на̄ни</option><option value="glk">گیلکی</option><option value="gn">Avañe'ẽ</option><option value="gom">गोंयची कोंकणी / Gõychi Konknni</option><option value="gom-deva">गोंयची कोंकणी</option><option value="gom-latn">Gõychi Konknni</option><option value="gor">Bahasa Hulontalo</option><option value="got">𐌲𐌿𐍄𐌹𐍃𐌺</option><option value="gpe">Ghanaian Pidgin</option><option value="grc">Ἀρχαία ἑλληνικὴ</option><option value="gsw">Alemannisch</option><option value="gu">ગુજરાતી</option><option value="guc">wayuunaiki</option><option value="gur">farefare</option><option value="guw">gungbe</option><option value="gv">Gaelg</option><option value="ha">Hausa</option><option value="hak">客家語 / Hak-kâ-ngî</option><option value="haw">Hawaiʻi</option><option value="he">עברית</option><option value="hi">हिन्दी</option><option value="hif">Fiji Hindi</option><option value="hif-latn">Fiji Hindi</option><option value="hil">Ilonggo</option><option value="hno">ہندکو</option><option value="hr">hrvatski</option><option value="hrx">Hunsrik</option><option value="hsb">hornjoserbsce</option><option value="hsn">湘語</option><option value="ht">Kreyòl ayisyen</option><option value="hu">magyar</option><option value="hu-formal">magyar (formal)</option><option value="hy">հայերեն</option><option value="hyw">Արեւմտահայերէն</option><option value="ia">interlingua</option><option value="iba">Jaku Iban</option><option value="ibb">ibibio</option><option value="id">Bahasa Indonesia</option><option value="ie">Interlingue</option><option value="ig">Igbo</option><option value="igl">Igala</option><option value="ii">ꆇꉙ</option><option value="ik">Iñupiatun</option><option value="ike-cans">ᐃᓄᒃᑎᑐᑦ</option><option value="ike-latn">inuktitut</option><option value="ilo">Ilokano</option><option value="inh">гӀалгӀай</option><option value="io">Ido</option><option value="is">íslenska</option><option value="isv-cyrl">меджусловјанскы</option><option value="isv-latn">medžuslovjansky</option><option value="it">italiano</option><option value="iu">ᐃᓄᒃᑎᑐᑦ / inuktitut</option><option value="ja">日本語</option><option value="jam">Patois</option><option value="jbo">la .lojban.</option><option value="jut">jysk</option><option value="jv">Jawa</option><option value="ka">ქართული</option><option value="kaa">Qaraqalpaqsha</option><option value="kab">Taqbaylit</option><option value="kai">Karai-karai</option><option value="kbd">адыгэбзэ</option><option value="kbd-cyrl">адыгэбзэ</option><option value="kbp">Kabɩyɛ</option><option value="kcg">Tyap</option><option value="kea">kabuverdianu</option><option value="kg">Kongo</option><option value="kge">Kumoring</option><option value="khw">کھوار</option><option value="ki">Gĩkũyũ</option><option value="kiu">Kırmancki</option><option value="kjh">хакас</option><option value="kjp">ဖၠုံလိက်</option><option value="kk">қазақша</option><option value="kk-arab">قازاقشا (تٴوتە)</option><option value="kk-cn">قازاقشا (جۇنگو)</option><option value="kk-cyrl">қазақша (кирил)</option><option value="kk-kz">қазақша (Қазақстан)</option><option value="kk-latn">qazaqşa (latın)</option><option value="kk-tr">qazaqşa (Türkïya)</option><option value="kl">kalaallisut</option><option value="km">ភាសាខ្មែរ</option><option value="kn">ಕನ್ನಡ</option><option value="knc">Yerwa Kanuri</option><option value="ko">한국어</option><option value="ko-kp">조선말</option><option value="koi">перем коми</option><option value="kr">kanuri</option><option value="krc">къарачай-малкъар</option><option value="kri">Krio</option><option value="krj">Kinaray-a</option><option value="krl">karjal</option><option value="ks">कॉशुर / کٲشُر</option><option value="ks-arab">کٲشُر</option><option value="ks-deva">कॉशुर</option><option value="ksh">Ripoarisch</option><option value="ksw">စှီၤ</option><option value="ku">kurdî</option><option value="ku-arab">کوردی (عەرەبی)</option><option value="ku-latn">kurdî (latînî)</option><option value="kum">къумукъ</option><option value="kus">Kʋsaal</option><option value="kv">коми</option><option value="kw">kernowek</option><option value="ky">кыргызча</option><option value="la">Latina</option><option value="lad">Ladino</option><option value="lb">Lëtzebuergesch</option><option value="lbe">лакку</option><option value="lez">лезги</option><option value="lfn">Lingua Franca Nova</option><option value="lg">Luganda</option><option value="li">Limburgs</option><option value="lij">Ligure</option><option value="liv">Līvõ kēļ</option><option value="lki">لەکی</option><option value="lld">Ladin</option><option value="lmo">lombard</option><option value="ln">lingála</option><option value="lo">ລາວ</option><option value="loz">Silozi</option><option value="lrc">لۊری شومالی</option><option value="lt">lietuvių</option><option value="ltg">latgaļu</option><option value="lua">ciluba</option><option value="lus">Mizo ţawng</option><option value="luz">لئری دوٙمینی</option><option value="lv">latviešu</option><option value="lzh">文言</option><option value="lzz">Lazuri</option><option value="mad">Madhurâ</option><option value="mag">मगही</option><option value="mai">मैथिली</option><option value="map-bms">Basa Banyumasan</option><option value="mdf">мокшень</option><option value="mg">Malagasy</option><option value="mhr">олык марий</option><option value="mi">Māori</option><option value="min">Minangkabau</option><option value="mk">македонски</option><option value="ml">മലയാളം</option><option value="mn">монгол</option><option value="mnc">manju gisun</option><option value="mnc-latn">manju gisun</option><option value="mnc-mong">ᠮᠠᠨᠵᡠ ᡤᡳᠰᡠᠨ</option><option value="mni">ꯃꯤꯇꯩ ꯂꯣꯟ</option><option value="mnw">ဘာသာမန်</option><option value="mo">молдовеняскэ</option><option value="mos">moore</option><option value="mr">मराठी</option><option value="mrh">Mara</option><option value="mrj">кырык мары</option><option value="ms">Bahasa Melayu</option><option value="ms-arab">بهاس ملايو</option><option value="mt">Malti</option><option value="mui">Baso Palembang</option><option value="mwl">Mirandés</option><option value="my">မြန်မာဘာသာ</option><option value="myv">эрзянь</option><option value="mzn">مازِرونی</option><option value="na">Dorerin Naoero</option><option value="nah">Nāhuatl</option><option value="nan">閩南語 / Bân-lâm-gú</option><option value="nan-hant">閩南語（傳統漢字）</option><option value="nan-latn-pehoeji">Bân-lâm-gú (Pe̍h-ōe-jī)</option><option value="nan-latn-tailo">Bân-lâm-gú (Tâi-lô)</option><option value="nap">Napulitano</option><option value="nb">norsk bokmål</option><option value="nds">Plattdüütsch</option><option value="nds-nl">Nedersaksies</option><option value="ne">नेपाली</option><option value="new">नेपाल भाषा</option><option value="nia">Li Niha</option><option value="nit">కొలామి</option><option value="niu">Niuē</option><option value="nl">Nederlands</option><option value="nl-informal">Nederlands (informeel)</option><option value="nmz">nawdm</option><option value="nn">norsk nynorsk</option><option value="nod">ᨣᩤᩴᨾᩮᩬᩥᨦ</option><option value="nog">ногайша</option><option value="nov">Novial</option><option value="nqo">ߒߞߏ</option><option value="nr">isiNdebele seSewula</option><option value="nrm">Nouormand</option><option value="nso">Sesotho sa Leboa</option><option value="nup">Nupe</option><option value="nv">Diné bizaad</option><option value="ny">Chi-Chewa</option><option value="nyn">runyankore</option><option value="nyo">Orunyoro</option><option value="nys">Nyunga</option><option value="oc">occitan</option><option value="ojb">Ojibwemowin</option><option value="olo">livvinkarjala</option><option value="om">Oromoo</option><option value="or">ଓଡ଼ିଆ</option><option value="os">ирон</option><option value="pa">ਪੰਜਾਬੀ</option><option value="pag">Pangasinan</option><option value="pam">Kapampangan</option><option value="pap">Papiamentu</option><option value="pcd">Picard</option><option value="pcm">Naijá</option><option value="pdc">Deitsch</option><option value="pdt">Plautdietsch</option><option value="pfl">Pälzisch</option><option value="pi">पालि</option><option value="pih">Norfuk / Pitkern</option><option value="pl">polski</option><option value="pms">Piemontèis</option><option value="pnb">پنجابی</option><option value="pnt">Ποντιακά</option><option value="prg">prūsiskan</option><option value="ps">پښتو</option><option value="pt">português</option><option value="pt-br">português do Brasil</option><option value="pwn">pinayuanan</option><option value="qqq">Message documentation</option><option value="qu">Runa Simi</option><option value="qug">Runa shimi</option><option value="rgn">Rumagnôl</option><option value="rif">Tarifit</option><option value="rki">ရခိုင်</option><option value="rm">rumantsch</option><option value="rmc">romaňi čhib</option><option value="rmy">romani čhib</option><option value="rn">ikirundi</option><option value="ro">română</option><option value="roa-tara">tarandíne</option><option value="rsk">руски</option><option value="ru">русский</option><option value="rue">русиньскый</option><option value="rup">armãneashti</option><option value="ruq">Vlăheşte</option><option value="ruq-cyrl">Влахесте</option><option value="ruq-latn">Vlăheşte</option><option value="rut">мыхаӀбишды</option><option value="rw">Ikinyarwanda</option><option value="ryu">うちなーぐち</option><option value="sa">संस्कृतम्</option><option value="sah">саха тыла</option><option value="sat">ᱥᱟᱱᱛᱟᱲᱤ</option><option value="sc">sardu</option><option value="scn">sicilianu</option><option value="sco">Scots</option><option value="sd">سنڌي</option><option value="sdc">Sassaresu</option><option value="sdh">کوردی خوارگ</option><option value="se">davvisámegiella</option><option value="se-fi">davvisámegiella (Suoma bealde)</option><option value="se-no">davvisámegiella (Norgga bealde)</option><option value="se-se">davvisámegiella (Ruoŧa bealde)</option><option value="sei">Cmique Itom</option><option value="ses">Koyraboro Senni</option><option value="sg">Sängö</option><option value="sgs">žemaitėška</option><option value="sh">srpskohrvatski / српскохрватски</option><option value="sh-cyrl">српскохрватски (ћирилица)</option><option value="sh-latn">srpskohrvatski (latinica)</option><option value="shi">Taclḥit</option><option value="shn">ၽႃႇသႃႇတႆး </option><option value="shy">tacawit</option><option value="shy-latn">tacawit</option><option value="si">සිංහල</option><option value="sjd">кӣллт са̄мь кӣлл</option><option value="sje">bidumsámegiella</option><option value="sk">slovenčina</option><option value="skr">سرائیکی</option><option value="skr-arab">سرائیکی</option><option value="sl">slovenščina</option><option value="sli">Schläsch</option><option value="sm">Gagana Samoa</option><option value="sma">åarjelsaemien</option><option value="smn">anarâškielâ</option><option value="sms">nuõrttsääʹmǩiõll</option><option value="sn">chiShona</option><option value="so">Soomaaliga</option><option value="sq">shqip</option><option value="sr">српски / srpski</option><option value="sr-ec">српски (ћирилица)</option><option value="sr-el">srpski (latinica)</option><option value="srn">Sranantongo</option><option value="sro">sardu campidanesu</option><option value="ss">SiSwati</option><option value="st">Sesotho</option><option value="stq">Seeltersk</option><option value="sty">себертатар</option><option value="su">Sunda</option><option value="sv">svenska</option><option value="sw">Kiswahili</option><option value="syl">ꠍꠤꠟꠐꠤ</option><option value="szl">ślůnski</option><option value="szy">Sakizaya</option><option value="ta">தமிழ்</option><option value="tay">Tayal</option><option value="tcy">ತುಳು</option><option value="tdd">ᥖᥭᥰ ᥖᥬᥲ ᥑᥨᥒᥰ</option><option value="te">తెలుగు</option><option value="tet">tetun</option><option value="tg">тоҷикӣ</option><option value="tg-cyrl">тоҷикӣ</option><option value="tg-latn">tojikī</option><option value="th">ไทย</option><option value="ti">ትግርኛ</option><option value="tig">ትግሬ</option><option value="tk">Türkmençe</option><option value="tl">Tagalog</option><option value="tly">tolışi</option><option value="tn">Setswana</option><option value="to">lea faka-Tonga</option><option value="tok">toki pona</option><option value="tpi">Tok Pisin</option><option value="tr">Türkçe</option><option value="tru">Ṫuroyo</option><option value="trv">Seediq</option><option value="ts">Xitsonga</option><option value="tt">татарча / tatarça</option><option value="tt-cyrl">татарча</option><option value="tt-latn">tatarça</option><option value="ttj">Orutooro</option><option value="tum">chiTumbuka</option><option value="tw">Twi</option><option value="ty">reo tahiti</option><option value="tyv">тыва дыл</option><option value="tzm">ⵜⴰⵎⴰⵣⵉⵖⵜ</option><option value="udm">удмурт</option><option value="ug">ئۇيغۇرچە / Uyghurche</option><option value="ug-arab">ئۇيغۇرچە</option><option value="ug-latn">Uyghurche</option><option value="uk">українська</option><option value="ur">اردو</option><option value="uz">oʻzbekcha / ўзбекча</option><option value="ve">Tshivenda</option><option value="vec">vèneto</option><option value="vep">vepsän kel’</option><option value="vi">Tiếng Việt</option><option value="vls">West-Vlams</option><option value="vmf">Mainfränkisch</option><option value="vmw">emakhuwa</option><option value="vo">Volapük</option><option value="vot">Vaďďa</option><option value="vro">võro</option><option value="wa">walon</option><option value="wal">wolaytta</option><option value="war">Winaray</option><option value="wls">Fakaʻuvea</option><option value="wo">Wolof</option><option value="wuu">吴语</option><option value="wuu-hans">吴语（简体）</option><option value="wuu-hant">吳語（正體）</option><option value="xal">хальмг</option><option value="xh">isiXhosa</option><option value="xmf">მარგალური</option><option value="xsy">saisiyat</option><option value="yi">ייִדיש</option><option value="yo">Yorùbá</option><option value="yrl">Nhẽẽgatú</option><option value="yue">粵語</option><option value="yue-hans">粵语（简体）</option><option value="yue-hant">粵語（繁體）</option><option value="za">Vahcuengh</option><option value="zea">Zeêuws</option><option value="zgh">ⵜⴰⵎⴰⵣⵉⵖⵜ ⵜⴰⵏⴰⵡⴰⵢⵜ</option><option value="zh">中文</option><option value="zh-cn">中文（中国大陆）</option><option value="zh-hans">中文（简体）</option><option value="zh-hant">中文（繁體）</option><option value="zh-hk">中文（香港）</option><option value="zh-mo">中文（澳門）</option><option value="zh-my">中文（马来西亚）</option><option value="zh-sg">中文（新加坡）</option><option value="zh-tw">中文（臺灣）</option><option value="zu">isiZulu</option></select><input id="languageselector-commit-1" style="" type="submit" value="set"></form></span></div>
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading">R</h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From Alliance Doc</div>
		<div id="contentSub"><div id="mw-content-subtitle"></div></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content"><div class="mw-pt-translate-header noprint" dir="ltr" lang="en">This page is a <span class="plainlinks"><a rel="nofollow" class="external text" href="https://docs.alliancecan.ca/mediawiki/index.php?title=Special:Translate&amp;group=page-R&amp;action=page&amp;filter=&amp;language=fr">translated version</a></span> of the page <a href="/wiki/R" title="R">R</a> and the translation is 100% complete.</div><div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr"><div class="mw-pt-languages noprint navigation-not-searchable" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="/wiki/R" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="R (100% translated)" lang="en" dir="ltr">English</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" lang="fr" dir="ltr">français</span></li></ul></div>
<p>R est un outil de calcul statistique et de graphiques. Il s'agit d'un langage de programmation additionné d'un environnement graphique, d'un débogueur, de l'accès à certaines fonctions de système et de la possibilité d'exécuter des scripts.
</p><p>Même si R n'a pas été développé pour le calcul de haute performance, sa popularité au sein de plusieurs disciplines scientifiques incluant le génie, les mathématiques, la statistique et la bio-informatique, en fait un outil essentiel sur les supercalculateurs dédiés à la recherche universitaire. Certaines fonctionnalités étant écrites en C, compilées et parallélisées par fils d'exécution, permettent d'atteindre des performances raisonnables sur un seul nœud de calcul. Grâce à la nature modulaire de R, les utilisateurs peuvent personnaliser leur configuration en installant des paquets dans leur répertoire personnel à partir du <i>Comprehensive R Archive Network</i> (<a rel="nofollow" class="external text" href="https://cran.r-project.org/">CRAN</a>).
</p><p>Vous trouverez peut-être des informations utiles dans le billet de blogue de l'utilisatrice Julie Fortin intitulé <a rel="nofollow" class="external text" href="https://medium.com/the-nature-of-food/how-to-run-your-r-script-with-compute-canada-c325c0ab2973"><i>How to run your R script with Compute Canada</i></a>.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Interpréteur"><span class="tocnumber">1</span> <span class="toctext">Interpréteur</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Installation_des_paquets_R"><span class="tocnumber">2</span> <span class="toctext">Installation des paquets R</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#install.packages()"><span class="tocnumber">2.1</span> <span class="toctext">install.packages()</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Installation_pour_une_version_particulière_de_R"><span class="tocnumber">2.1.1</span> <span class="toctext">Installation pour une version particulière de R</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Installation_pour_une_ou_plusieurs_versions_de_R"><span class="tocnumber">2.1.2</span> <span class="toctext">Installation pour une ou plusieurs versions de R</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-6"><a href="#Dépendances"><span class="tocnumber">2.2</span> <span class="toctext">Dépendances</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Téléchargement_de_paquets"><span class="tocnumber">2.3</span> <span class="toctext">Téléchargement de paquets</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Appels_système"><span class="tocnumber">3</span> <span class="toctext">Appels système</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Arguments_passés_à_un_script_R"><span class="tocnumber">4</span> <span class="toctext">Arguments passés à un script R</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Parallélisation"><span class="tocnumber">5</span> <span class="toctext">Parallélisation</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#doParallel_et_foreach"><span class="tocnumber">5.1</span> <span class="toctext">doParallel et foreach</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#Utilisation"><span class="tocnumber">5.1.1</span> <span class="toctext">Utilisation</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Exécution"><span class="tocnumber">5.1.2</span> <span class="toctext">Exécution</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-14"><a href="#doParallel_et_makeCluster"><span class="tocnumber">5.2</span> <span class="toctext">doParallel et makeCluster</span></a>
<ul>
<li class="toclevel-3 tocsection-15"><a href="#Utilisation_2"><span class="tocnumber">5.2.1</span> <span class="toctext">Utilisation</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#Exécution_2"><span class="tocnumber">5.2.2</span> <span class="toctext">Exécution</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-17"><a href="#Rmpi"><span class="tocnumber">5.3</span> <span class="toctext">Rmpi</span></a>
<ul>
<li class="toclevel-3 tocsection-18"><a href="#Installation"><span class="tocnumber">5.3.1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#Exécution_3"><span class="tocnumber">5.3.2</span> <span class="toctext">Exécution</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h2><span id="Interpr.C3.A9teur"></span><span class="mw-headline" id="Interpréteur">Interpréteur</span></h2>
<p>Chargez d'abord un module R. Comme plusieurs versions sont disponibles, consultez la liste en lançant la commande   
</p>
<div>
<div style="float:right; margin-left:8px">
<p><span typeof="mw:File"><a href="https://explainshell.com/explain?cmd=module+spider+r" rel="nofollow"><img src="/mediawiki/images/thumb/3/30/Question.png/40px-Question.png" decoding="async" width="40" height="40" class="mw-file-element" srcset="/mediawiki/images/thumb/3/30/Question.png/60px-Question.png 1.5x, /mediawiki/images/thumb/3/30/Question.png/80px-Question.png 2x" /></a></span>
</p>
</div>
<div class="command">
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="o">[</span>name@server<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>module<span class="w"> </span>spider<span class="w"> </span>r
</pre></div>
</div>
</div>
<p>Pour charger un module R particulier, utilisez une variante de la commande  
</p>
<div>
<div style="float:right; margin-left:8px">
<p><span typeof="mw:File"><a href="https://explainshell.com/explain?cmd=module+load+gcc%2F9.3.0+r%2F4.0.2" rel="nofollow"><img src="/mediawiki/images/thumb/3/30/Question.png/40px-Question.png" decoding="async" width="40" height="40" class="mw-file-element" srcset="/mediawiki/images/thumb/3/30/Question.png/60px-Question.png 1.5x, /mediawiki/images/thumb/3/30/Question.png/80px-Question.png 2x" /></a></span>
</p>
</div>
<div class="command">
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="o">[</span>name@server<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>module<span class="w"> </span>load<span class="w"> </span>gcc/9.3.0<span class="w"> </span>r/4.0.2
</pre></div>
</div>
</div> 
<p>Pour plus d'information, consultez <a href="/wiki/Utiliser_des_modules" title="Utiliser des modules">Utiliser des modules</a>.
</p><p>Vous pouvez maintenant démarrer l'interpréteur et entrer le code R dans cet environnement.
</p>
<div>
<div style="float:right; margin-left:8px">
<p><span typeof="mw:File"><a href="https://explainshell.com/explain?cmd=R" rel="nofollow"><img src="/mediawiki/images/thumb/3/30/Question.png/40px-Question.png" decoding="async" width="40" height="40" class="mw-file-element" srcset="/mediawiki/images/thumb/3/30/Question.png/60px-Question.png 1.5x, /mediawiki/images/thumb/3/30/Question.png/80px-Question.png 2x" /></a></span>
</p>
</div>
<div class="command">
<div class="mw-highlight mw-highlight-lang-r mw-content-ltr" dir="ltr"><pre><span></span><span class="p">[</span><span class="n">name</span><span class="o">@</span><span class="n">server</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">R</span>
<span class="n">R</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="m">4.0</span><span class="n">.</span><span class="m">2</span><span class="w"> </span><span class="p">(</span><span class="m">2020-06-22</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="s">&quot;Taking Off Again&quot;</span>
<span class="nf">Copyright </span><span class="p">(</span><span class="n">C</span><span class="p">)</span><span class="w"> </span><span class="m">2020</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">Foundation</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">Statistical</span><span class="w"> </span><span class="n">Computing</span>
<span class="n">Platform</span><span class="o">:</span><span class="w"> </span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="nf">gnu </span><span class="p">(</span><span class="m">64</span><span class="o">-</span><span class="n">bit</span><span class="p">)</span>

<span class="n">R</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">free</span><span class="w"> </span><span class="n">software</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">comes</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">ABSOLUTELY</span><span class="w"> </span><span class="n">NO</span><span class="w"> </span><span class="n">WARRANTY.</span>
<span class="n">You</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">welcome</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">redistribute</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">certain</span><span class="w"> </span><span class="n">conditions.</span>
<span class="n">Type</span><span class="w"> </span><span class="s">&#39;license()&#39;</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="s">&#39;licence()&#39;</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">distribution</span><span class="w"> </span><span class="n">details.</span>

<span class="w">  </span><span class="n">Natural</span><span class="w"> </span><span class="n">language</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">English</span><span class="w"> </span><span class="n">locale</span>

<span class="n">R</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">collaborative</span><span class="w"> </span><span class="n">project</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">many</span><span class="w"> </span><span class="n">contributors.</span>
<span class="n">Type</span><span class="w"> </span><span class="s">&#39;contributors()&#39;</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">and</span>
<span class="s">&#39;citation()&#39;</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">cite</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">packages</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">publications.</span>

<span class="n">Type</span><span class="w"> </span><span class="s">&#39;demo()&#39;</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">demos</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;help()&#39;</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">on</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="n">help</span><span class="p">,</span><span class="w"> </span><span class="n">or</span>
<span class="s">&#39;help.start()&#39;</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">HTML</span><span class="w"> </span><span class="n">browser</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">help.</span>
<span class="n">Type</span><span class="w"> </span><span class="s">&#39;q()&#39;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">quit</span><span class="w"> </span><span class="n">R.</span>

<span class="o">&gt;</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="m">5</span><span class="p">,</span><span class="m">7</span><span class="p">,</span><span class="m">9</span><span class="p">)</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">values</span><span class="p">[</span><span class="m">1</span><span class="p">]</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span>
<span class="o">&gt;</span><span class="w"> </span><span class="nf">q</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Pour exécuter des scripts R, utilisez la commande <code>Rscript</code> suivie du fichier contenant les commandes R&#160;:
</p>
<div>
<div style="float:right; margin-left:8px">
<p><span typeof="mw:File"><a href="https://explainshell.com/explain?cmd=Rscript+computation.R" rel="nofollow"><img src="/mediawiki/images/thumb/3/30/Question.png/40px-Question.png" decoding="async" width="40" height="40" class="mw-file-element" srcset="/mediawiki/images/thumb/3/30/Question.png/60px-Question.png 1.5x, /mediawiki/images/thumb/3/30/Question.png/80px-Question.png 2x" /></a></span>
</p>
</div>
<div class="command">
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="o">[</span>name@server<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>Rscript<span class="w"> </span>computation.R
</pre></div>
</div>
</div>
<p>Cette commande passera automatiquement les options appropriées pour un traitement en lot, soit <code>--slave</code> et <code>--no-restore</code> à l'interpréteur R. Ces options empêcheront la création de fichiers d'espace de travail inutiles avec <code>--no-save</code> lors d'un traitement en lot. 
</p><p><b>Les calculs d'une durée de plus de deux ou trois minutes ne devraient pas être exécutés par un nœud de calcul, mais être soumis à l'ordonnanceur.</b>  
</p><p>Voici un exemple de script simple&#160;:
</p>
<div class="code-file">
<div class="filename"><b>File&#160;:</b> job.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%23SBATCH+--account%3Ddef-someacct+++%23+replace+this+with+your+own+account%0A%23SBATCH+--mem-per-cpu%3D2000M++++++%23+memory%3B+default+unit+is+megabytes%0A%23SBATCH+--time%3D0-00%3A15+++++++++++%23+time+%28DD-HH%3AMM%29%0Amodule+load+gcc%2F9.3.0+r%2F4.0.2++++++++++++++%23+Adjust+version+and+add+the+gcc+module+used+for+installing+packages.%0A%0ARscript+computation.R" />
<input type="hidden" name="filename" value="job.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --account=def-someacct   # replace this with your own account</span>
<span class="c1">#SBATCH --mem-per-cpu=2000M      # memory; default unit is megabytes</span>
<span class="c1">#SBATCH --time=0-00:15           # time (DD-HH:MM)</span>
module<span class="w"> </span>load<span class="w"> </span>gcc/9.3.0<span class="w"> </span>r/4.0.2<span class="w">              </span><span class="c1"># Adjust version and add the gcc module used for installing packages.</span>

Rscript<span class="w"> </span>computation.R
</pre></div>
</div>
<p><br />
Pour plus d'information, consultez <a href="/wiki/Running_jobs/fr" title="Running jobs/fr">Exécuter des tâches</a>.
</p>
<h2><span class="mw-headline" id="Installation_des_paquets_R">Installation des paquets R</span></h2>
<h3><span id="install.packages.28.29"></span><span class="mw-headline" id="install.packages()">install.packages()</span></h3>
<p>Pour installer des paquets du <a rel="nofollow" class="external text" href="https://cran.r-project.org/">CRAN</a>, vous pouvez utiliser <code>install.packages</code> dans une session R interactive sur un nœud de connexion. Puisque les nœuds de calcul de la plupart de nos grappes n'ont pas accès à l'internet, il n'est pas possible d'installer les paquets R dans une tâche en lots ou dans une tâche interactive. Parce que plusieurs paquets R sont développés avec la famille de compilateurs GNU, nous vous recommandons de <a href="/wiki/Utiliser_des_modules" title="Utiliser des modules">charger un module <code>gcc</code></a> avant de les installer et de toujours utilisez la même version du <code>gcc</code>.
</p>
<div>
<div style="float:right; margin-left:8px">
<p><span typeof="mw:File"><a href="https://explainshell.com/explain?cmd=module+load+gcc%2F9.3.0+r%2F4.0.2" rel="nofollow"><img src="/mediawiki/images/thumb/3/30/Question.png/40px-Question.png" decoding="async" width="40" height="40" class="mw-file-element" srcset="/mediawiki/images/thumb/3/30/Question.png/60px-Question.png 1.5x, /mediawiki/images/thumb/3/30/Question.png/80px-Question.png 2x" /></a></span>
</p>
</div>
<div class="command">
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="o">[</span>name@server<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>module<span class="w"> </span>load<span class="w"> </span>gcc/9.3.0<span class="w"> </span>r/4.0.2
</pre></div>
</div>
</div>
<h4><span id="Installation_pour_une_version_particuli.C3.A8re_de_R"></span><span class="mw-headline" id="Installation_pour_une_version_particulière_de_R">Installation pour une version particulière de R</span></h4>
<p>Par exemple, pour installer le paquet <code>sp</code> qui offre des classes et des méthodes pour les données spatiales, utilisez cette commande sur un nœud de connexion.
</p>
<div>
<div style="float:right; margin-left:8px">
<p><span typeof="mw:File"><a href="https://explainshell.com/explain?cmd=R" rel="nofollow"><img src="/mediawiki/images/thumb/3/30/Question.png/40px-Question.png" decoding="async" width="40" height="40" class="mw-file-element" srcset="/mediawiki/images/thumb/3/30/Question.png/60px-Question.png 1.5x, /mediawiki/images/thumb/3/30/Question.png/80px-Question.png 2x" /></a></span>
</p>
</div>
<div class="command">
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="o">[</span>name@server<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>R
<span class="o">[</span>...<span class="o">]</span>
&gt;<span class="w"> </span>install.packages<span class="o">(</span><span class="s1">&#39;sp&#39;</span>,<span class="w"> </span><span class="nv">repos</span><span class="o">=</span><span class="s1">&#39;https://cloud.r-project.org/&#39;</span><span class="o">)</span>
</pre></div>
</div>
</div>
<p>Si l'argument <code>repos</code> n'est pas spécifié, on vous demandera de sélectionner un miroir pour le téléchargement. Idéalement, ce miroir sera géographiquement proche de la grappe que vous utilisez.
</p><p>Avant l'installation, certains paquets requièrent la définition de la variable d'environnement <code>TMPDIR</code>.
</p>
<h4><span class="mw-headline" id="Installation_pour_une_ou_plusieurs_versions_de_R">Installation pour une ou plusieurs versions de R</span></h4>
<p>Indiquez le répertoire local, selon le module de R qui est chargé.
</p>
<div class="command">
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="o">[</span>name@server<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/.local/R/<span class="nv">$EBVERSIONR</span>/
<span class="o">[</span>name@server<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">R_LIBS</span><span class="o">=</span>~/.local/R/<span class="nv">$EBVERSIONR</span>/
</pre></div></div>
<p>Installez le paquet.
</p>
<div>
<div style="float:right; margin-left:8px">
<p><span typeof="mw:File"><a href="https://explainshell.com/explain?cmd=R+-e+%27install.packages%28%22sp%22%2C+repos%3D%22https%3A%2F%2Fcloud.r-project.org%2F%22%29%27" rel="nofollow"><img src="/mediawiki/images/thumb/3/30/Question.png/40px-Question.png" decoding="async" width="40" height="40" class="mw-file-element" srcset="/mediawiki/images/thumb/3/30/Question.png/60px-Question.png 1.5x, /mediawiki/images/thumb/3/30/Question.png/80px-Question.png 2x" /></a></span>
</p>
</div>
<div class="command">
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="o">[</span>name@server<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>R<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;install.packages(&quot;sp&quot;, repos=&quot;https://cloud.r-project.org/&quot;)&#39;</span>
</pre></div>
</div>
</div>
<p>Dans le script de soumission, vous devez ensuite charger le module R que vous voulez et configurer le répertoire local pour la bibliothèque avec  <code>export R_LIBS=~/.local/R/$EBVERSIONR/</code>.
</p>
<h3><span id="D.C3.A9pendances"></span><span class="mw-headline" id="Dépendances">Dépendances</span></h3>
<p>Certains paquets utilisent des bibliothèques qui sont déjà installées sur nos grappes. Si la bibliothèque se trouve dans la liste des <a href="/wiki/Available_software/fr" title="Available software/fr">logiciels disponibles</a>, chargez le <a href="/wiki/Utiliser_des_modules/en" title="Utiliser des modules/en">module</a> approprié avant d'installer le paquet.
</p><p>Par exemple, le paquet <code>rgdal</code> utilise la bibliothèque <code>gdal</code>. En lançant la commande <code>module spider gdal/2.2.1</code> nous voyons que les modules <code>nixpkgs</code> et <code>gcc</code> sont requis.  Si vous avez chargé <code>gcc</code> comme indiqué plus haut, ces deux modules devraient déjà être chargés. Vérifiez ceci avec la commande
</p>
<div>
<div style="float:right; margin-left:8px">
<p><span typeof="mw:File"><a href="https://explainshell.com/explain?cmd=module+list" rel="nofollow"><img src="/mediawiki/images/thumb/3/30/Question.png/40px-Question.png" decoding="async" width="40" height="40" class="mw-file-element" srcset="/mediawiki/images/thumb/3/30/Question.png/60px-Question.png 1.5x, /mediawiki/images/thumb/3/30/Question.png/80px-Question.png 2x" /></a></span>
</p>
</div>
<div class="command">
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="o">[</span>name@server<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>module<span class="w"> </span>list
</pre></div>
</div>
</div> 
<p>Si l'installation d'un paquet échoue, portez attention au message d'erreur qui pourrait indiquer d'autres modules qui seraient requis. Pour plus d'information sur les commandes de <code>module</code>, consultez <a href="/wiki/Utiliser_des_modules" title="Utiliser des modules">Utiliser des modules</a>.
</p>
<h3><span id="T.C3.A9l.C3.A9chargement_de_paquets"></span><span class="mw-headline" id="Téléchargement_de_paquets">Téléchargement de paquets</span></h3>
<p>Si vous cherchez à installer un paquet que vous avez téléchargé, c'est-à-dire que vous n'avez pas utilisé <code>install.packages()</code>, vous pouvez l'installer comme suit. Par exemple, avec le paquet <tt>archive_package.tgz</tt>, vous exécuteriez la commande suivante dans l'interpréteur (<i>shell</i>) 
</p>
<div>
<div style="float:right; margin-left:8px">
<p><span typeof="mw:File"><a href="https://explainshell.com/explain?cmd=R+CMD+INSTALL+-l+%27path+for+your+local+%28home%29+R+library%27+archive_package.tgz" rel="nofollow"><img src="/mediawiki/images/thumb/3/30/Question.png/40px-Question.png" decoding="async" width="40" height="40" class="mw-file-element" srcset="/mediawiki/images/thumb/3/30/Question.png/60px-Question.png 1.5x, /mediawiki/images/thumb/3/30/Question.png/80px-Question.png 2x" /></a></span>
</p>
</div>
<div class="command">
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="o">[</span>name@server<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>R<span class="w"> </span>CMD<span class="w"> </span>INSTALL<span class="w"> </span>-l<span class="w"> </span><span class="s1">&#39;path for your local (home) R library&#39;</span><span class="w"> </span>archive_package.tgz
</pre></div>
</div>
</div>
<h2><span id="Appels_syst.C3.A8me"></span><span class="mw-headline" id="Appels_système">Appels système</span></h2>
<p>La commande R <code>system()</code> permet d'exécuter des commandes dans l'environnement actif, à l'intérieur de R; ceci risque de causer des problèmes sur nos grappes parce que R donne une valeur incorrecte à la variable d'environnement <code>LD_LIBRARY_PATH</code>. Utilisez plutôt la syntaxe <code>system("LD_LIBRARY_PATH=$RSNT_LD_LIBRARY_PATH &lt;my system call&gt;")</code> dans vos appels système.
</p><p><br />
</p>
<h2><span id="Arguments_pass.C3.A9s_.C3.A0_un_script_R"></span><span class="mw-headline" id="Arguments_passés_à_un_script_R">Arguments passés à un script R</span></h2>
<p>Il peut parfois être utile de passer des paramètres en argument à un script R pour éviter d'avoir à modifier le script pour plusieurs tâches semblables ou de devoir gérer plusieurs copies d'un même script. Ceci peut servir pour spécifier des paramètres numériques ou le nom des fichiers en entrée ou en sortie. Par exemple, au lieu d'employer une syntaxe comme
</p>
<div class="code-file">
<div class="filename"><b>File&#160;:</b> </div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="filename+%3D+%22input.csv%22%0Aiterations+%3D+5" />
<input type="hidden" name="filename" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-r mw-content-ltr" dir="ltr"><pre><span></span><span class="n">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;input.csv&quot;</span>
<span class="n">iterations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span>
</pre></div>
</div>
<p><br />
et de changer le code à chaque fois qu'un paramètre est modifié, les paramètres peuvent être passés au script au début avec 
</p>
<div>
<div style="float:right; margin-left:8px">
<p><span typeof="mw:File"><a href="https://explainshell.com/explain?cmd=Rscript+myscript.R++input_1.csv++5" rel="nofollow"><img src="/mediawiki/images/thumb/3/30/Question.png/40px-Question.png" decoding="async" width="40" height="40" class="mw-file-element" srcset="/mediawiki/images/thumb/3/30/Question.png/60px-Question.png 1.5x, /mediawiki/images/thumb/3/30/Question.png/80px-Question.png 2x" /></a></span>
</p>
</div>
<div class="command">
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="o">[</span>name@server<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>Rscript<span class="w"> </span>myscript.R<span class="w">  </span>input_1.csv<span class="w">  </span><span class="m">5</span>
</pre></div>
</div>
</div>
<p>et par la suite
</p>
<div>
<div style="float:right; margin-left:8px">
<p><span typeof="mw:File"><a href="https://explainshell.com/explain?cmd=Rscript+myscript.R++input_2.csv++10" rel="nofollow"><img src="/mediawiki/images/thumb/3/30/Question.png/40px-Question.png" decoding="async" width="40" height="40" class="mw-file-element" srcset="/mediawiki/images/thumb/3/30/Question.png/60px-Question.png 1.5x, /mediawiki/images/thumb/3/30/Question.png/80px-Question.png 2x" /></a></span>
</p>
</div>
<div class="command">
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="o">[</span>name@server<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>Rscript<span class="w"> </span>myscript.R<span class="w">  </span>input_2.csv<span class="w">  </span><span class="m">10</span>
</pre></div>
</div>
</div>
<p>Dans le prochain exemple, il doit y avoir précisément deux arguments. Le premier devrait être une chaîne de caractères représentant le <b>nom</b> de la variable et le deuxième devrait <b>numéro</b> de la variable.
</p>
<div class="code-file">
<div class="filename"><b>File&#160;:</b> arguments_test.R</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="args+%3D+commandArgs%28trailingOnly%3DTRUE%29%0A%0A%23+test+if+there+is+at+least+two+arguments%3A+if+not%2C+return+an+error%0Aif+%28length%28args%29%3C2%29+%7B%0A++stop%28%22At+least+two+arguments+must+be+supplied+%28%27name%27+%28text%29+and+%27numer%27+%28integer%29+%29%22%2C+call.%3DFALSE%29%0A%7D%0A%0Aname++++++%3C-+args%5B1%5D++++++++++++++++%23+read+first+argument+as+string%0Anumber++++%3C-+as.integer%28+args%5B2%5D+%29++%23+read+second+argument+as+integer%0A%0Aprint%28paste%28%22Processing+with+name%3A%27%22%2C+name%2C+%22%27+and+number%3A%27%22%2C+number%2C%22%27%22%2C+sep+%3D+%27%27%29%29" />
<input type="hidden" name="filename" value="arguments_test.R" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-r mw-content-ltr" dir="ltr"><pre><span></span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">commandArgs</span><span class="p">(</span><span class="n">trailingOnly</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>

<span class="c1"># test if there is at least two arguments: if not, return an error</span>
<span class="nf">if </span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">args</span><span class="p">)</span><span class="o">&lt;</span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nf">stop</span><span class="p">(</span><span class="s">&quot;At least two arguments must be supplied (&#39;name&#39; (text) and &#39;numer&#39; (integer) )&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">call.</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">name</span><span class="w">      </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">args</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">                </span><span class="c1"># read first argument as string</span>
<span class="n">number</span><span class="w">    </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.integer</span><span class="p">(</span><span class="w"> </span><span class="n">args</span><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w">  </span><span class="c1"># read second argument as integer</span>

<span class="nf">print</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="s">&quot;Processing with name:&#39;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&#39; and number:&#39;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">,</span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p><br />
</p><p>Ce script peut être utilisé comme suit
</p>
<div>
<div style="float:right; margin-left:8px">
<p><span typeof="mw:File"><a href="https://explainshell.com/explain?cmd=Rscript+arguments_test.R++Hello++42" rel="nofollow"><img src="/mediawiki/images/thumb/3/30/Question.png/40px-Question.png" decoding="async" width="40" height="40" class="mw-file-element" srcset="/mediawiki/images/thumb/3/30/Question.png/60px-Question.png 1.5x, /mediawiki/images/thumb/3/30/Question.png/80px-Question.png 2x" /></a></span>
</p>
</div>
<div class="command">
<div class="mw-highlight mw-highlight-lang-r mw-content-ltr" dir="ltr"><pre><span></span><span class="p">[</span><span class="n">name</span><span class="o">@</span><span class="n">server</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w">  </span><span class="n">Rscript</span><span class="w"> </span><span class="n">arguments_test.R</span><span class="w">  </span><span class="n">Hello</span><span class="w">  </span><span class="m">42</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s">&quot;Processing with name:&#39;Hello&#39; and number:&#39;42&#39;&quot;</span>
</pre></div>
</div>
</div>
<h2><span id="Parall.C3.A9lisation"></span><span class="mw-headline" id="Parallélisation">Parallélisation</span></h2>
<p>Si les processeurs de nos grappes sont on ne peut plus ordinaires, ce qui rend ces <i>supercalculateurs</i> intéressants, c'est qu'ils offrent des milliers de CPU sur un réseau très performant. Pour profiter de cet avantage, vous devez utiliser la programmation parallèle. Cependant, avant d'allouer beaucoup de temps et d'effort à paralléliser votre code R, assurez-vous que votre implémentation séquentielle est aussi efficiente que possible. Comme dans tout langage interprété, d'importants goulots d'étranglement (<i>bottlenecks</i>) sont causés par les boucles et particulièrement les boucles imbriquées, ce qui a un impact sur la performance. Lorsque possible, essayez d'utiliser les fonctions vectorielles et les autres éléments plus fonctionnels comme la famille des fonctions <code>apply</code> et la fonction <code>ifelse</code>. Vous obtiendrez souvent un gain de performance en éliminant une boucle plutôt que de paralléliser son exécution avec plusieurs cœurs CPU. 
</p><p>La page <a rel="nofollow" class="external text" href="https://cran.r-project.org/web/views/HighPerformanceComputing.html">CRAN Task View on High-Performance and Parallel Computing with R</a>
mentionne un grand nombre de paquets pouvant être utilisés avec R pour la programmation parallèle. 
Vous trouverez une excellente vue d'ensemble et des conseils dans le contenu du 
<a rel="nofollow" class="external text" href="https://education.scinet.utoronto.ca/course/view.php?id=1333">colloque de Compute Ontario du 11 octobre 2023 intitulé <i>High-Performance Computing in R</i></a>
(<a rel="nofollow" class="external text" href="https://education.scinet.utoronto.ca/mod/resource/view.php?id=2887">diapositives</a>).
</p><p>Vous trouverez d'autres renseignements et exemples dans les sous-sections ci-dessous.
</p><p><b>Terminologie</b>&#160;: Dans notre documentation, les termes <i>nœud</i> et <i>hôte</i> sont quelquefois employés pour désigner un ordinateur distinct; un regroupement de <i>nœuds</i> ou d'<i>hôtes</i> constitue une <i>grappe</i>. 
<i>nœud</i> désigne souvent un <i>processus de travail</i> (worker process); un regroupement de ces processus constitue une <i>grappe</i>. Prenons comme exemple la citation suivante&#160;: «&#160;Following <b>snow</b>, a pool of worker processes listening <i>via</i> sockets for commands from the master is called a 'cluster' of nodes.&#160;»<sup id="cite_ref-1" class="reference"><a href="#cite_note-1"><span class="cite-bracket">&#91;</span>1<span class="cite-bracket">&#93;</span></a></sup><br />.
</p>
<h3><span class="mw-headline" id="doParallel_et_foreach">doParallel et foreach</span></h3>
<h4><span class="mw-headline" id="Utilisation">Utilisation</span></h4>
<p>Foreach peut être vu comme une interface unifiée pour tous les systèmes dorsaux (<i>backends</i>) comme doMC, doMPI, doParallel, doRedis, etc. et fonctionne sur toutes les plateformes pourvu que le système dorsal soit fonctionnel. doParallel agit comme interface entre foreach et le paquet parallèle et peut être chargé seul. Certains <a href="/wiki/Scalability/fr" title="Scalability/fr">problèmes de performance connus</a> surviennent avec foreach lors de l'exécution d'un très grand nombre de très petites tâches. Notez que l'exemple simple qui suit n'utilise pas l'appel foreach() de façon optimale.
</p><p>Enregistrez le système dorsal en lui indiquant le nombre de cœurs disponibles. Si le système dorsal n'est pas enregistré, foreach assume que le nombre de cœurs est 1 et exécute les itérations de façon séquentielle. 
</p><p>La méthode générale pour utiliser foreach est&#160;:
</p>
<ol><li>chargez foreach et le paquet dorsal;</li>
<li>enregistrez le paquet dorsal;</li>
<li>appelez foreach() en le laissant sur la même ligne que l'opérateur %do% (série) ou %dopar%.</li></ol>
<h4><span id="Ex.C3.A9cution"></span><span class="mw-headline" id="Exécution">Exécution</span></h4>
<p>1. Placez le code R dans un fichier script, ici le fichier <i>test_foreach.R</i>.
</p><p><br />
</p>
<div class="code-file">
<div class="filename"><b>File&#160;:</b> test_foreach.R</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23+library%28foreach%29+%23+optionnel+si+doParallel+est+utilis%C3%A9%0Alibrary%28doParallel%29+%23%0A%0A%23+a+very+simple+function%0Atest_func+%3C-+function%28var1%2C+var2%29+%7B%0A++++%23+some+heavy+workload%0A++++sum+%3C-+0%0A++++for+%28i+in+c%281%3A3141593%29%29+%7B%0A++++++++sum+%3C-+sum+%2B+var1+%2A+sin%28var2+%2F+i%29%0A++++%7D%0A++++return%28sqrt%28sum%29%29%0A%7D%0A%0A%23+nous+allons+it%C3%A9rer+selon+deux+ensembles+de+valeurs+que+vous+pouvez+modifier+pour+tester+le+fonctionnement+de+foreach%0Avar1.v+%3D+c%281%3A8%29%0Avar2.v+%3D+seq%280.1%2C+1%2C+length.out+%3D+8%29%0A%0A%23+La+variable+d%27environnement+SLURM_CPUS_PER_TASK+contient+le+nombre+de+coeurs+par+t%C3%A2che.%0A%23+Elle+est+d%C3%A9finie+par+SLURM.%0A%23+%C3%89vitez+de+fixer+un+nombre+de+coeurs+manuellement+dans+le+code+source.%0Ancores+%3D+Sys.getenv%28%22SLURM_CPUS_PER_TASK%22%29+%0A%0AregisterDoParallel%28cores%3Dncores%29+%23+Demande+ncores+%22Parallel+Workers%22%0Aprint%28ncores%29+%23+Affiche+le+nombre+de+coeurs+disponibles+et+demand%C3%A9%0AgetDoParWorkers%28%29+%23+Affiche+le+nombre+de+%22Parallel+Workers%22+actuel%0A%0A%23+attention%21+foreach%28%29+et+%25dopar%25+doivent+%C3%AAtre+sur+la+m%C3%AAme+ligne+de+code%21%0Aforeach%28var1%3Dvar1.v%2C+.combine%3Drbind%29+%25%3A%25+foreach%28var2%3Dvar2.v%2C+.combine%3Drbind%29+%25dopar%25+%7Btest_func%28var1%3Dvar1%2C+var2%3Dvar2%29%7D" />
<input type="hidden" name="filename" value="test_foreach.R" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-r mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># library(foreach) # optionnel si doParallel est utilisé</span>
<span class="nf">library</span><span class="p">(</span><span class="n">doParallel</span><span class="p">)</span><span class="w"> </span><span class="c1">#</span>

<span class="c1"># a very simple function</span>
<span class="n">test_func</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="n">var1</span><span class="p">,</span><span class="w"> </span><span class="n">var2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1"># some heavy workload</span>
<span class="w">    </span><span class="n">sum</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">0</span>
<span class="w">    </span><span class="nf">for </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">3141593</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">sum</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">var1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nf">sin</span><span class="p">(</span><span class="n">var2</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">i</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nf">return</span><span class="p">(</span><span class="nf">sqrt</span><span class="p">(</span><span class="n">sum</span><span class="p">))</span>
<span class="p">}</span>

<span class="c1"># nous allons itérer selon deux ensembles de valeurs que vous pouvez modifier pour tester le fonctionnement de foreach</span>
<span class="n">var1.v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">8</span><span class="p">)</span>
<span class="n">var2.v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">seq</span><span class="p">(</span><span class="m">0.1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">length.out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">8</span><span class="p">)</span>

<span class="c1"># La variable d&#39;environnement SLURM_CPUS_PER_TASK contient le nombre de coeurs par tâche.</span>
<span class="c1"># Elle est définie par SLURM.</span>
<span class="c1"># Évitez de fixer un nombre de coeurs manuellement dans le code source.</span>
<span class="n">ncores</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">Sys.getenv</span><span class="p">(</span><span class="s">&quot;SLURM_CPUS_PER_TASK&quot;</span><span class="p">)</span><span class="w"> </span>

<span class="nf">registerDoParallel</span><span class="p">(</span><span class="n">cores</span><span class="o">=</span><span class="n">ncores</span><span class="p">)</span><span class="w"> </span><span class="c1"># Demande ncores &quot;Parallel Workers&quot;</span>
<span class="nf">print</span><span class="p">(</span><span class="n">ncores</span><span class="p">)</span><span class="w"> </span><span class="c1"># Affiche le nombre de coeurs disponibles et demandé</span>
<span class="nf">getDoParWorkers</span><span class="p">()</span><span class="w"> </span><span class="c1"># Affiche le nombre de &quot;Parallel Workers&quot; actuel</span>

<span class="c1"># attention! foreach() et %dopar% doivent être sur la même ligne de code!</span>
<span class="nf">foreach</span><span class="p">(</span><span class="n">var1</span><span class="o">=</span><span class="n">var1.v</span><span class="p">,</span><span class="w"> </span><span class="n">.combine</span><span class="o">=</span><span class="n">rbind</span><span class="p">)</span><span class="w"> </span><span class="o">%:%</span><span class="w"> </span><span class="nf">foreach</span><span class="p">(</span><span class="n">var2</span><span class="o">=</span><span class="n">var2.v</span><span class="p">,</span><span class="w"> </span><span class="n">.combine</span><span class="o">=</span><span class="n">rbind</span><span class="p">)</span><span class="w"> </span><span class="o">%dopar%</span><span class="w"> </span><span class="p">{</span><span class="nf">test_func</span><span class="p">(</span><span class="n">var1</span><span class="o">=</span><span class="n">var1</span><span class="p">,</span><span class="w"> </span><span class="n">var2</span><span class="o">=</span><span class="n">var2</span><span class="p">)}</span>
</pre></div>
</div>
<p><br />
</p><p><br />
Copiez ce qui suit dans le script <i>job_foreach.sh</i>.
</p><p><br />
</p>
<div class="code-file">
<div class="filename"><b>File&#160;:</b> job_foreach.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%23SBATCH+--account%3Ddef-someacct+++%23+replace+this+with+your+supervisors+account%0A%23SBATCH+--nodes%3D1++++++++++++++++%23+number+of+node+MUST+be+1%0A%23SBATCH+--cpus-per-task%3D4++++++++%23+number+of+processes%0A%23SBATCH+--mem-per-cpu%3D2048M++++++%23+memory%3B+default+unit+is+megabytes%0A%23SBATCH+--time%3D0-00%3A15+++++++++++%23+time+%28DD-HH%3AMM%29%0A%23SBATCH+--mail-user%3Dyourname%40someplace.com+%23+Send+email+updates+to+you+or+someone+else%0A%23SBATCH+--mail-type%3DALL++++++++++%23+send+an+email+in+all+cases+%28job+started%2C+job+ended%2C+job+aborted%29%0A%0Amodule+load+gcc%2F9.3.0+r%2F4.0.2%0Aexport+R_LIBS%3D%7E%2Flocal%2FR_libs%2F%0AR+CMD+BATCH+--no-save+--no-restore+test_foreach.R" />
<input type="hidden" name="filename" value="job_foreach.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --account=def-someacct   # replace this with your supervisors account</span>
<span class="c1">#SBATCH --nodes=1                # number of node MUST be 1</span>
<span class="c1">#SBATCH --cpus-per-task=4        # number of processes</span>
<span class="c1">#SBATCH --mem-per-cpu=2048M      # memory; default unit is megabytes</span>
<span class="c1">#SBATCH --time=0-00:15           # time (DD-HH:MM)</span>
<span class="c1">#SBATCH --mail-user=yourname@someplace.com # Send email updates to you or someone else</span>
<span class="c1">#SBATCH --mail-type=ALL          # send an email in all cases (job started, job ended, job aborted)</span>

module<span class="w"> </span>load<span class="w"> </span>gcc/9.3.0<span class="w"> </span>r/4.0.2
<span class="nb">export</span><span class="w"> </span><span class="nv">R_LIBS</span><span class="o">=</span>~/local/R_libs/
R<span class="w"> </span>CMD<span class="w"> </span>BATCH<span class="w"> </span>--no-save<span class="w"> </span>--no-restore<span class="w"> </span>test_foreach.R
</pre></div>
</div>
<p><br />
</p><p>3. Soumettez la tâche.
</p>
<div>
<div style="float:right; margin-left:8px">
<p><span typeof="mw:File"><a href="https://explainshell.com/explain?cmd=sbatch+job_foreach.sh" rel="nofollow"><img src="/mediawiki/images/thumb/3/30/Question.png/40px-Question.png" decoding="async" width="40" height="40" class="mw-file-element" srcset="/mediawiki/images/thumb/3/30/Question.png/60px-Question.png 1.5x, /mediawiki/images/thumb/3/30/Question.png/80px-Question.png 2x" /></a></span>
</p>
</div>
<div class="command">
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="o">[</span>name@server<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>sbatch<span class="w"> </span>job_foreach.sh
</pre></div>
</div>
</div>
<p>Pour plus d'information sur comment soumettre des tâches, consultez <a href="/wiki/Running_jobs/fr" title="Running jobs/fr">Exécuter des tâches</a>.
</p>
<h3><span class="mw-headline" id="doParallel_et_makeCluster">doParallel et makeCluster</span></h3>
<h4><span class="mw-headline" id="Utilisation_2">Utilisation</span></h4>
<p>Il faut enregistrer le système dorsal (<i>backend</i>) en lui donnant le nom des nœuds, multiplié par le nombre voulu de processus. Par exemple, nous créerions une grappe composée des hôtes <code>node1 node1 node2 node2</code>. Le type de grappe <i>PSOCK</i> exécute des commandes par des connexions SSH vers les nœuds.
</p>
<h4><span id="Ex.C3.A9cution_2"></span><span class="mw-headline" id="Exécution_2">Exécution</span></h4>
<p>1. Placer le code R dans un fichier script, ici <code>test_makecluster.R</code>.
</p>
<div class="code-file">
<div class="filename"><b>File&#160;:</b> test_makecluster.R</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="library%28doParallel%29%0A%0A%23+Create+an+array+from+the+NODESLIST+environnement+variable%0Anodeslist+%3D+unlist%28strsplit%28Sys.getenv%28%22NODESLIST%22%29%2C+split%3D%22+%22%29%29%0A%0A%23+Create+the+cluster+with+the+nodes+name.+One+process+per+count+of+node+name.%0A%23+nodeslist+%3D+node1+node1+node2+node2%2C+means+we+are+starting+2+processes+on+node1%2C+likewise+on+node2.%0Acl+%3D+makeCluster%28nodeslist%2C+type+%3D+%22PSOCK%22%29+%0AregisterDoParallel%28cl%29%0A%0A%23+Compute+%28Source+%3A+https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2FdoParallel%2Fvignettes%2FgettingstartedParallel.pdf%29%0Ax+%3C-+iris%5Bwhich%28iris%5B%2C5%5D+%21%3D+%22setosa%22%29%2C+c%281%2C5%29%5D%0Atrials+%3C-+10000%0A%0Aforeach%28icount%28trials%29%2C+.combine%3Dcbind%29+%25dopar%25%0A++++%7B%0A++++ind+%3C-+sample%28100%2C+100%2C+replace%3DTRUE%29%0A++++result1+%3C-+glm%28x%5Bind%2C2%5D%7Ex%5Bind%2C1%5D%2C+family%3Dbinomial%28logit%29%29%0A++++coefficients%28result1%29%0A++++%7D%0A%0A%23+Don%27t+forget+to+release+resources%0AstopCluster%28cl%29" />
<input type="hidden" name="filename" value="test_makecluster.R" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-r mw-content-ltr" dir="ltr"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">doParallel</span><span class="p">)</span>

<span class="c1"># Create an array from the NODESLIST environnement variable</span>
<span class="n">nodeslist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">unlist</span><span class="p">(</span><span class="nf">strsplit</span><span class="p">(</span><span class="nf">Sys.getenv</span><span class="p">(</span><span class="s">&quot;NODESLIST&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">split</span><span class="o">=</span><span class="s">&quot; &quot;</span><span class="p">))</span>

<span class="c1"># Create the cluster with the nodes name. One process per count of node name.</span>
<span class="c1"># nodeslist = node1 node1 node2 node2, means we are starting 2 processes on node1, likewise on node2.</span>
<span class="n">cl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">makeCluster</span><span class="p">(</span><span class="n">nodeslist</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;PSOCK&quot;</span><span class="p">)</span><span class="w"> </span>
<span class="nf">registerDoParallel</span><span class="p">(</span><span class="n">cl</span><span class="p">)</span>

<span class="c1"># Compute (Source&#160;: https://cran.r-project.org/web/packages/doParallel/vignettes/gettingstartedParallel.pdf)</span>
<span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">iris</span><span class="p">[</span><span class="nf">which</span><span class="p">(</span><span class="n">iris</span><span class="p">[,</span><span class="m">5</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s">&quot;setosa&quot;</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">5</span><span class="p">)]</span>
<span class="n">trials</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">10000</span>

<span class="nf">foreach</span><span class="p">(</span><span class="nf">icount</span><span class="p">(</span><span class="n">trials</span><span class="p">),</span><span class="w"> </span><span class="n">.combine</span><span class="o">=</span><span class="n">cbind</span><span class="p">)</span><span class="w"> </span><span class="o">%dopar%</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">    </span><span class="n">ind</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">sample</span><span class="p">(</span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="n">replace</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="w">    </span><span class="n">result1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">glm</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">ind</span><span class="p">,</span><span class="m">2</span><span class="p">]</span><span class="o">~</span><span class="n">x</span><span class="p">[</span><span class="n">ind</span><span class="p">,</span><span class="m">1</span><span class="p">],</span><span class="w"> </span><span class="n">family</span><span class="o">=</span><span class="nf">binomial</span><span class="p">(</span><span class="n">logit</span><span class="p">))</span>
<span class="w">    </span><span class="nf">coefficients</span><span class="p">(</span><span class="n">result1</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="c1"># Don&#39;t forget to release resources</span>
<span class="nf">stopCluster</span><span class="p">(</span><span class="n">cl</span><span class="p">)</span>
</pre></div>
</div>
<p><br />
</p><p>2. Copiez les lignes suivantes dans un script pour soumettre la tâche, ici <code>job_makecluster.sh</code>.
</p>
<div class="code-file">
<div class="filename"><b>File&#160;:</b> job_makecluster.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%23SBATCH+--account%3Ddef-someacct++%23+%C3%A0+remplacer+par+un+compte+appropri%C3%A9%0A%23SBATCH+--ntasks%3D4++++++++++++++%23+nombre+de+processus%0A%23SBATCH+--mem-per-cpu%3D512M++++++%23+m%C3%A9moire+par+coeur+CPU%3B+valeur+en+Mo+par+d%C3%A9faut%0A%23SBATCH+--time%3D00%3A05%3A00+++++++++%23+temps+%28HH%3AMM%3ASS%29%0A%0Amodule+load+gcc%2F9.3.0+r%2F4.0.2%0A%0A%23+Export+the+nodes+names.+%0A%23+If+all+processes+are+allocated+on+the+same+node%2C+NODESLIST+contains+%3A+node1+node1+node1+node1%0A%23+Cut+the+domain+name+and+keep+only+the+node+name%0Aexport+NODESLIST%3D%24%28echo+%24%28srun+hostname+%7C+cut+-f+1+-d+%27.%27%29%29%0AR+-f+test_makecluster.R" />
<input type="hidden" name="filename" value="job_makecluster.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --account=def-someacct  # à remplacer par un compte approprié</span>
<span class="c1">#SBATCH --ntasks=4              # nombre de processus</span>
<span class="c1">#SBATCH --mem-per-cpu=512M      # mémoire par coeur CPU; valeur en Mo par défaut</span>
<span class="c1">#SBATCH --time=00:05:00         # temps (HH:MM:SS)</span>

module<span class="w"> </span>load<span class="w"> </span>gcc/9.3.0<span class="w"> </span>r/4.0.2

<span class="c1"># Export the nodes names. </span>
<span class="c1"># If all processes are allocated on the same node, NODESLIST contains&#160;: node1 node1 node1 node1</span>
<span class="c1"># Cut the domain name and keep only the node name</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">NODESLIST</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="k">$(</span>srun<span class="w"> </span>hostname<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-f<span class="w"> </span><span class="m">1</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;.&#39;</span><span class="k">))</span>
R<span class="w"> </span>-f<span class="w"> </span>test_makecluster.R
</pre></div>
</div>
<p><br />
</p><p>Dans cet exemple, l'ordonnanceur pourrait placer les quatre processus sur un seul nœud.
Ceci peut convenir, mais si vous voulez prouver que la même tâche peut être traitée si les processus 
sont placés sur des nœuds différents, ajoutez la ligne <code>#SBATCH --ntasks-per-node=2</code>. 
</p><p>3. Soumettez la tâche avec
</p>
<div>
<div style="float:right; margin-left:8px">
<p><span typeof="mw:File"><a href="https://explainshell.com/explain?cmd=sbatch+job_makecluster.sh" rel="nofollow"><img src="/mediawiki/images/thumb/3/30/Question.png/40px-Question.png" decoding="async" width="40" height="40" class="mw-file-element" srcset="/mediawiki/images/thumb/3/30/Question.png/60px-Question.png 1.5x, /mediawiki/images/thumb/3/30/Question.png/80px-Question.png 2x" /></a></span>
</p>
</div>
<div class="command">
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="o">[</span>name@server<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>sbatch<span class="w"> </span>job_makecluster.sh
</pre></div>
</div>
</div>
<p>Pour plus d'information sur comment soumettre une tâche, voyez <a href="/wiki/Running_jobs/fr" title="Running jobs/fr">Exécuter des tâches</a>.
</p>
<h3><span class="mw-headline" id="Rmpi">Rmpi</span></h3>
<p>Les directives qui suivent ne fonctionnent pas sur <a href="/wiki/Cedar/fr" title="Cedar/fr">Cedar</a>; utilisez plutôt une autre grappe.
</p>
<h4><span class="mw-headline" id="Installation">Installation</span></h4>
<p>La procédure suivante installe <a rel="nofollow" class="external text" href="https://cran.r-project.org/web/packages/Rmpi/index.html">Rmpi</a>, une interface (<i>wrapper</i>) pour les routines MPI qui permet d'exécuter R en parallèle.
</p><p>1. Voyez les modules R disponibles avec la commande
</p>
 <div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>module<span class="w"> </span>spider<span class="w"> </span>r
</pre></div>
<p>2.  Sélectionnez la version et chargez le module OpenMPI approprié. Dans notre exemple, la version 4.0.3 est utilisée, pour que les processus s'exécutent correctement.
</p>
 <div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>module<span class="w"> </span>load<span class="w"> </span>gcc/11.3.0
module<span class="w"> </span>load<span class="w"> </span>r/4.2.1
module<span class="w"> </span>load<span class="w"> </span>openmpi/4.1.4
</pre></div>
<p>3. Téléchargez <a rel="nofollow" class="external text" href="https://cran.r-project.org/web/packages/Rmpi/index.html">la dernière version de Rmpi</a>  en remplaçant le numéro de la version selon le cas.
</p>
 <div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>wget<span class="w"> </span>https://cran.r-project.org/src/contrib/Rmpi_0.6-9.2.tar.gz
</pre></div>
<p>4. Indiquez le répertoire dans lequel vous voulez copier les fichiers; vous devez avoir une permission d'écriture pour ce répertoire. Le nom du répertoire peut être modifié.
</p>
 <div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/local/R_libs/
<span class="nb">export</span><span class="w"> </span><span class="nv">R_LIBS</span><span class="o">=</span>~/local/R_libs/
</pre></div>
<p>5. Lancez la commande d'installation.
</p>
 <div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>R<span class="w"> </span>CMD<span class="w"> </span>INSTALL<span class="w"> </span>--configure-args<span class="o">=</span><span class="s2">&quot;--with-Rmpi-include=</span><span class="nv">$EBROOTOPENMPI</span><span class="s2">/include   --with-Rmpi-libpath=</span><span class="nv">$EBROOTOPENMPI</span><span class="s2">/lib --with-Rmpi-type=&#39;OPENMPI&#39; &quot;</span><span class="w"> </span>Rmpi_0.6-9.2.tar.gz
</pre></div>
<p>Portez attention au message d'erreur qui s'affiche quand l'installation d'un paquet échoue; il pourrait indiquer d'autres modules qui seraient nécessaires.
</p>
<h4><span id="Ex.C3.A9cution_3"></span><span class="mw-headline" id="Exécution_3">Exécution</span></h4>
<p>1. Placez le code R dans un fichier script, ici le fichier <i>test.R</i>.
</p><p><br /> 
</p>
<div class="code-file">
<div class="filename"><b>File&#160;:</b> test.R</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23Tell+all+slaves+to+return+a+message+identifying+themselves.%0Alibrary%28%22Rmpi%22%29%0Asprintf%28%22TEST+mpi.universe.size%28%29+%3D++%25i%22%2C+mpi.universe.size%28%29%29%0Ans+%3C-+mpi.universe.size%28%29+-+1%0Asprintf%28%22TEST+attempt+to+spawn+%25i+slaves%22%2C+ns%29%0Ampi.spawn.Rslaves%28nslaves%3Dns%29%0Ampi.remote.exec%28paste%28%22I+am%22%2Cmpi.comm.rank%28%29%2C%22of%22%2Cmpi.comm.size%28%29%29%29%0Ampi.remote.exec%28paste%28mpi.comm.get.parent%28%29%29%29%0A%23Send+execution+commands+to+the+slaves%0Ax%3C-5%0A%23These+would+all+be+pretty+correlated+one+would+think%0Ax%3C-mpi.remote.exec%28rnorm%2Cx%29%0Alength%28x%29%0Ax%0Ampi.close.Rslaves%28%29%0Ampi.quit%28%29" />
<input type="hidden" name="filename" value="test.R" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-r mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">#Tell all slaves to return a message identifying themselves.</span>
<span class="nf">library</span><span class="p">(</span><span class="s">&quot;Rmpi&quot;</span><span class="p">)</span>
<span class="nf">sprintf</span><span class="p">(</span><span class="s">&quot;TEST mpi.universe.size() =  %i&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">mpi.universe.size</span><span class="p">())</span>
<span class="n">ns</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">mpi.universe.size</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span>
<span class="nf">sprintf</span><span class="p">(</span><span class="s">&quot;TEST attempt to spawn %i slaves&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ns</span><span class="p">)</span>
<span class="nf">mpi.spawn.Rslaves</span><span class="p">(</span><span class="n">nslaves</span><span class="o">=</span><span class="n">ns</span><span class="p">)</span>
<span class="nf">mpi.remote.exec</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="s">&quot;I am&quot;</span><span class="p">,</span><span class="nf">mpi.comm.rank</span><span class="p">(),</span><span class="s">&quot;of&quot;</span><span class="p">,</span><span class="nf">mpi.comm.size</span><span class="p">()))</span>
<span class="nf">mpi.remote.exec</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="nf">mpi.comm.get.parent</span><span class="p">()))</span>
<span class="c1">#Send execution commands to the slaves</span>
<span class="n">x</span><span class="o">&lt;-</span><span class="m">5</span>
<span class="c1">#These would all be pretty correlated one would think</span>
<span class="n">x</span><span class="o">&lt;-</span><span class="nf">mpi.remote.exec</span><span class="p">(</span><span class="n">rnorm</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>
<span class="nf">length</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">x</span>
<span class="nf">mpi.close.Rslaves</span><span class="p">()</span>
<span class="nf">mpi.quit</span><span class="p">()</span>
</pre></div>
</div>
<p><br />
</p><p>2. Copiez ce qui suit dans le script <i>job.sh</i>.
</p><p><br /> 
</p>
<div class="code-file">
<div class="filename"><b>File&#160;:</b> job.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%23SBATCH+--account%3Ddef-someacct+++%23+%C3%A0+remplacer+par+un+compte+appropri%C3%A9%0A%23SBATCH+--ntasks%3D5+++++++++++++++%23+nombre+de+processus+MPI%0A%23SBATCH+--mem-per-cpu%3D2048M++++++%23+m%C3%A9moire+par+coeur+CPU%3B+valeur+en+Mo+par+d%C3%A9faut%0A%23SBATCH+--time%3D0-00%3A15+++++++++++%23+temps+%28JJ-HH%3AMM%29%0A%0Amodule+load+gcc%2F11.3.0%0Amodule+load+r%2F4.2.1%0Amodule+load+openmpi%2F4.1.4%0Aexport+R_LIBS%3D%7E%2Flocal%2FR_libs%2F%0Ampirun+-np+1+R+CMD+BATCH+test.R+test.txt" />
<input type="hidden" name="filename" value="job.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --account=def-someacct   # à remplacer par un compte approprié</span>
<span class="c1">#SBATCH --ntasks=5               # nombre de processus MPI</span>
<span class="c1">#SBATCH --mem-per-cpu=2048M      # mémoire par coeur CPU; valeur en Mo par défaut</span>
<span class="c1">#SBATCH --time=0-00:15           # temps (JJ-HH:MM)</span>

module<span class="w"> </span>load<span class="w"> </span>gcc/11.3.0
module<span class="w"> </span>load<span class="w"> </span>r/4.2.1
module<span class="w"> </span>load<span class="w"> </span>openmpi/4.1.4
<span class="nb">export</span><span class="w"> </span><span class="nv">R_LIBS</span><span class="o">=</span>~/local/R_libs/
mpirun<span class="w"> </span>-np<span class="w"> </span><span class="m">1</span><span class="w"> </span>R<span class="w"> </span>CMD<span class="w"> </span>BATCH<span class="w"> </span>test.R<span class="w"> </span>test.txt
</pre></div>
</div>
<p><br />
</p><p>3. Soumettez la tâche.
</p>
 <div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>sbatch<span class="w"> </span>job.sh
</pre></div>
<p>Pour plus d'information sur comment soumettre des tâches, consultez <a href="/wiki/Running_jobs/fr" title="Running jobs/fr">Exécuter des tâches</a>.
</p>
<div class="mw-references-wrap"><ol class="references">
<li id="cite_note-1"><span class="mw-cite-backlink"><a href="#cite_ref-1">↑</a></span> <span class="reference-text"><a rel="nofollow" class="external free" href="https://stat.ethz.ch/R-manual/R-devel/library/parallel/doc/parallel.pdf">https://stat.ethz.ch/R-manual/R-devel/library/parallel/doc/parallel.pdf</a></span>
</li>
</ol></div>
<!-- 
NewPP limit report
Cached time: 20250530235135
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc]
CPU time usage: 0.081 seconds
Real time usage: 0.373 seconds
Preprocessor visited node count: 866/1000000
Post‐expand include size: 13432/2097152 bytes
Template argument size: 11754/2097152 bytes
Highest expansion depth: 7/100
Expensive parser function count: 30/100
Unstrip recursion depth: 1/20
Unstrip post‐expand size: 44210/5000000 bytes
ExtLoops count: 0/100
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  312.029      1 -total
 97.68%  304.790      9 Template:File
  0.79%    2.455     14 Template:Command
  0.21%    0.640      1 Template:Commands
-->

<!-- Saved in parser cache with key ccwiki:pcache:idhash:2634-0!canonical and timestamp 20250530235135 and revision id 155137. Rendering was triggered because: page-view
 -->
</div>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://docs.alliancecan.ca/mediawiki/index.php?title=R/fr&amp;oldid=155137">https://docs.alliancecan.ca/mediawiki/index.php?title=R/fr&amp;oldid=155137</a>"</div></div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="/mediawiki/index.php?title=Category:Pages_using_deprecated_source_tags&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages using deprecated source tags (page does not exist)">Pages using deprecated source tags</a></li><li><a href="/wiki/Category:Software" title="Category:Software">Software</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		
<nav id="p-personal" class="mw-portlet mw-portlet-personal vector-user-menu-legacy vector-menu" aria-labelledby="p-personal-label"  >
	<h3
		id="p-personal-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Personal tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="pt-uls" class="mw-list-item active"><a class="uls-trigger" href="#"><span>English</span></a></li><li id="pt-login" class="mw-list-item"><a href="/mediawiki/index.php?title=Special:UserLogin&amp;returnto=R%2Ffr" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span>Log in</span></a></li>
		</ul>
		
	</div>
</nav>

		<div id="left-navigation">
			
<nav id="p-namespaces" class="mw-portlet mw-portlet-namespaces vector-menu-tabs vector-menu-tabs-legacy vector-menu" aria-labelledby="p-namespaces-label"  >
	<h3
		id="p-namespaces-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Namespaces</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-nstab-main" class="selected mw-list-item"><a href="/wiki/R/fr" title="View the content page [c]" accesskey="c"><span>Page</span></a></li><li id="ca-talk" class="new mw-list-item"><a href="/mediawiki/index.php?title=Talk:R/fr&amp;action=edit&amp;redlink=1" rel="discussion" class="new" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
		</ul>
		
	</div>
</nav>

			
<nav id="p-variants" class="mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown vector-menu" aria-labelledby="p-variants-label"  >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox"
		aria-labelledby="p-variants-label"
	>
	<label
		id="p-variants-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">français</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			
<nav id="p-views" class="mw-portlet mw-portlet-views vector-menu-tabs vector-menu-tabs-legacy vector-menu" aria-labelledby="p-views-label"  >
	<h3
		id="p-views-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Views</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-view" class="selected mw-list-item"><a href="/wiki/R/fr"><span>Read</span></a></li><li id="ca-viewsource" class="mw-list-item"><a href="/mediawiki/index.php?title=R/fr&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e"><span>View source</span></a></li><li id="ca-history" class="mw-list-item"><a href="/mediawiki/index.php?title=R/fr&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
		</ul>
		
	</div>
</nav>

			
<nav id="p-cactions" class="mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-menu" aria-labelledby="p-cactions-label"  title="More options" >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox"
		aria-labelledby="p-cactions-label"
	>
	<label
		id="p-cactions-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<h3 >Search</h3>
	<form action="/mediawiki/index.php" id="searchform" class="vector-search-box-form">
		<div id="simpleSearch"
			class="vector-search-box-inner"
			 data-search-loc="header-navigation">
			<input class="vector-search-box-input"
				 type="search" name="search" placeholder="Search Alliance Doc" aria-label="Search Alliance Doc" autocapitalize="sentences" title="Search Alliance Doc [f]" accesskey="f" id="searchInput"
			>
			<input type="hidden" name="title" value="Special:Search">
			<input id="mw-searchButton"
				 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search">
			<input id="searchButton"
				 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go">
		</div>
	</form>
</div>

		</div>
	</div>
	
<div id="mw-panel" class="vector-legacy-sidebar">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="/wiki/Technical_documentation"
			title="Visit the main page"></a>
	</div>
	
<nav id="p-navigation" class="mw-portlet mw-portlet-navigation vector-menu-portal portal vector-menu" aria-labelledby="p-navigation-label"  >
	<h3
		id="p-navigation-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Navigation</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-wiki-main-page" class="mw-list-item"><a href="/wiki/Technical_documentation"><span>Wiki Main Page</span></a></li>
		</ul>
		
	</div>
</nav>

	
<nav id="p-sidebar-support" class="mw-portlet mw-portlet-sidebar-support vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-support-label"  >
	<h3
		id="p-sidebar-support-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Support</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-getting-started" class="mw-list-item"><a href="/wiki/Getting_started"><span>Getting started</span></a></li><li id="n-sidebar-technical-support" class="mw-list-item"><a href="/wiki/Technical_support"><span>Getting help</span></a></li><li id="n-sidebar-running-jobs" class="mw-list-item"><a href="/wiki/Running_jobs"><span>Running jobs</span></a></li><li id="n-sidebar-known-issues" class="mw-list-item"><a href="/wiki/Known_issues"><span>Known issues</span></a></li><li id="n-sidebar-system-status" class="mw-list-item"><a href="http://status.computecanada.ca" rel="nofollow"><span>System status</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-sidebar-resources" class="mw-portlet mw-portlet-sidebar-resources vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-resources-label"  >
	<h3
		id="p-sidebar-resources-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Resources</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-Béluga" class="mw-list-item"><a href="/wiki/B%C3%A9luga/en"><span>Béluga</span></a></li><li id="n-Cedar" class="mw-list-item"><a href="/wiki/Cedar"><span>Cedar</span></a></li><li id="n-Graham" class="mw-list-item"><a href="/wiki/Graham"><span>Graham</span></a></li><li id="n-Narval" class="mw-list-item"><a href="/wiki/Narval/en"><span>Narval</span></a></li><li id="n-Niagara" class="mw-list-item"><a href="/wiki/Niagara"><span>Niagara</span></a></li><li id="n-sidebar-cloud" class="mw-list-item"><a href="/wiki/CC-Cloud"><span>Cloud</span></a></li><li id="n-tamIA" class="mw-list-item"><a href="/wiki/TamIA/en"><span>tamIA</span></a></li><li id="n-Killarney" class="mw-list-item"><a href="/wiki/Killarney"><span>Killarney</span></a></li><li id="n-sidebar-quantum-computing" class="mw-list-item"><a href="/wiki/Services_d%27informatique_quantique/en"><span>Quantum computing</span></a></li><li id="n-sidebar-available-software" class="mw-list-item"><a href="/wiki/Available_software"><span>Available software</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-sidebar-alliance" class="mw-portlet mw-portlet-sidebar-alliance vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-alliance-label"  >
	<h3
		id="p-sidebar-alliance-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">The Alliance</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-alliance-main-page" class="mw-list-item"><a href="https://alliancecan.ca/en" rel="nofollow"><span>Alliance main page</span></a></li><li id="n-sidebar-ccdb" class="mw-list-item"><a href="https://ccdb.computecanada.ca/security/login" rel="nofollow"><span>CCDB</span></a></li><li id="n-sidebar-getting-an-account" class="mw-list-item"><a href="https://alliancecan.ca/en/services/advanced-research-computing/account-management/apply-account" rel="nofollow"><span>Getting An Account</span></a></li><li id="n-sidebar-acknowledging-alliance" class="mw-list-item"><a href="https://alliancecan.ca/en/services/advanced-research-computing/research-portal/acknowledging-alliance" rel="nofollow"><span>Acknowledging the Alliance</span></a></li><li id="n-sidebar-aup" class="mw-list-item"><a href="https://alliancecan.ca/en/services/advanced-research-computing/account-management/policies" rel="nofollow"><span>Acceptable Use Policy</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-sidebar-authoring" class="mw-portlet mw-portlet-sidebar-authoring vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-authoring-label"  >
	<h3
		id="p-sidebar-authoring-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Authoring</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-guidelines" class="mw-list-item"><a href="/wiki/Authoring_guidelines"><span>Guidelines</span></a></li><li id="n-sidebar-mediawiki-help" class="mw-list-item"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents"><span>MediaWiki Help</span></a></li><li id="n-recentchanges" class="mw-list-item"><a href="/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-tb" class="mw-portlet mw-portlet-tb vector-menu-portal portal vector-menu" aria-labelledby="p-tb-label"  >
	<h3
		id="p-tb-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="t-whatlinkshere" class="mw-list-item"><a href="/wiki/Special:WhatLinksHere/R/fr" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="/wiki/Special:RecentChangesLinked/R/fr" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="/mediawiki/index.php?title=R/fr&amp;oldid=155137" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="/mediawiki/index.php?title=R/fr&amp;action=info" title="More information about this page"><span>Page information</span></a></li>
		</ul>
		
	</div>
</nav>

	
</div>

</div>

<footer id="footer" class="mw-footer" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 10 June 2024, at 14:34.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="/wiki/CCWiki:Privacy_policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="/wiki/CCWiki:About">About Alliance Doc</a></li>
	<li id="footer-places-disclaimers"><a href="/wiki/CCWiki:General_disclaimer">Disclaimers</a></li>
	<li id="footer-places-mobileview"><a href="https://docs.alliancecan.ca/mediawiki/index.php?title=R/fr&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/mediawiki/resources/assets/poweredby_mediawiki.svg" alt="Powered by MediaWiki" width="88" height="31" loading="lazy"></a></li>
</ul>

</footer>

<script>(RLQ=window.RLQ||[]).push(function(){mw.log.warn("This page is using the deprecated ResourceLoader module \"codex-search-styles\".\n[1.43] Use a CodexModule with codexComponents to set your specific components used: https://www.mediawiki.org/wiki/Codex#Using_a_limited_subset_of_components");});</script>
<script src="https://www.googletagmanager.com/gtag/js?id=G-TVBPRD78K4" async=""></script><script>
window.dataLayer = window.dataLayer || [];

function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-TVBPRD78K4', {});
</script>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":490,"wgPageParseReport":{"limitreport":{"cputime":"0.081","walltime":"0.373","ppvisitednodes":{"value":866,"limit":1000000},"postexpandincludesize":{"value":13432,"limit":2097152},"templateargumentsize":{"value":11754,"limit":2097152},"expansiondepth":{"value":7,"limit":100},"expensivefunctioncount":{"value":30,"limit":100},"unstrip-depth":{"value":1,"limit":20},"unstrip-size":{"value":44210,"limit":5000000},"timingprofile":["100.00%  312.029      1 -total"," 97.68%  304.790      9 Template:File","  0.79%    2.455     14 Template:Command","  0.21%    0.640      1 Template:Commands"]},"loops":{"limitreport-count-limited":{"value":0,"limit":100}},"cachereport":{"timestamp":"20250530235135","ttl":86400,"transientcontent":false}}});});</script>
</body>
</html>