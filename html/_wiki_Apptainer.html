<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Apptainer - Alliance Doc</title>
<script>(function(){var className="client-js";var cookie=document.cookie.match(/(?:^|; )ccwikimwclientpreferences=([^;]+)/);if(cookie){cookie[1].split('%2C').forEach(function(pref){className=className.replace(new RegExp('(^| )'+pref.replace(/-clientpref-\w+$|[^\w-]+/g,'')+'-clientpref-\\w+( |$)'),'$1'+pref+'$2');});}document.documentElement.className=className;}());RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"aDpEB@3hIy4PhCb@BtLJPgAAAtE","wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Apptainer","wgTitle":"Apptainer","wgCurRevisionId":164626,"wgRevisionId":164626,"wgArticleId":20105,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[
"Pages using deprecated source tags"],"wgPageViewLanguage":"en","wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Apptainer","wgRelevantArticleId":20105,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgULSAcceptLanguageList":[],"wgMFDisplayWikibaseDescriptions":{"search":false,"watchlist":false,"tagline":false},"wgCiteReferencePreviewsActive":true,"wgTranslatePageTranslation":"source","wgULSPosition":"personal","wgULSisCompactLinksEnabled":true,"wgVector2022LanguageInHeader":false,"wgULSisLanguageSelectorEmpty":false};RLSTATE={"site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.translate.tag.languages":"ready","ext.pygments":"ready","skins.vector.styles.legacy":"ready","ext.translate.edit.documentation.styles":"ready","ext.translate":"ready","codex-search-styles":"ready","ext.uls.pt":"ready"};RLPAGEMODULES=["ext.pygments.view","site",
"mediawiki.page.ready","mediawiki.toc","skins.vector.legacy.js","ext.languageSelector","ext.translate.pagetranslation.uls","ext.uls.compactlinks","ext.uls.geoclient","ext.uls.interface","ext.moderation.notify","ext.moderation.notify.desktop"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.impl(function(){return["user.options@12s5i",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
}];});});</script>
<link rel="stylesheet" href="/mediawiki/load.php?lang=en&amp;modules=codex-search-styles%7Cext.pygments%2Ctranslate%7Cext.translate.edit.documentation.styles%7Cext.translate.tag.languages%7Cext.uls.pt%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector">
<script async="" src="/mediawiki/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content="">
<link rel="stylesheet" href="/mediawiki/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=1120">
<link rel="icon" href="/mediawiki/resources/assets/Alliance_favicon.png">
<link rel="search" type="application/opensearchdescription+xml" href="/mediawiki/rest.php/v1/search" title="Alliance Doc (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://docs.alliancecan.ca/mediawiki/api.php?action=rsd">
<link rel="alternate" type="application/atom+xml" title="Alliance Doc Atom feed" href="/mediawiki/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector-legacy mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Apptainer rootpage-Apptainer skin-vector action-view"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"></div>
	<div class="mw-indicators">
	<div id="mw-indicator-languageselector" class="mw-indicator"><span id="languageselector-box-1" class="languageselector " style=""><form name="languageselector-form-1" id="languageselector-form-1" method="get" action="/mediawiki/index.php" style="display:inline;"><input type="hidden" value="Apptainer" name="title"><select name="setlang" id="languageselector-select-1" style=""><option value="aae">Arbërisht</option><option value="ab">аԥсшәа</option><option value="abs">bahasa ambon</option><option value="ace">Acèh</option><option value="acf">Kwéyòl Sent Lisi</option><option value="acm">عراقي</option><option value="ady">адыгабзэ</option><option value="ady-cyrl">адыгабзэ</option><option value="aeb">تونسي / Tûnsî</option><option value="aeb-arab">تونسي</option><option value="aeb-latn">Tûnsî</option><option value="af">Afrikaans</option><option value="aln">Gegë</option><option value="alt">алтай тил</option><option value="am">አማርኛ</option><option value="ami">Pangcah</option><option value="an">aragonés</option><option value="ang">Ænglisc</option><option value="ann">Obolo</option><option value="anp">अंगिका</option><option value="apc">شامي</option><option value="ar">العربية</option><option value="arc">ܐܪܡܝܐ</option><option value="arn">mapudungun</option><option value="arq">جازايرية</option><option value="ary">الدارجة</option><option value="arz">مصرى</option><option value="as">অসমীয়া</option><option value="ase">American sign language</option><option value="ast">asturianu</option><option value="atj">Atikamekw</option><option value="av">авар</option><option value="avk">Kotava</option><option value="awa">अवधी</option><option value="ay">Aymar aru</option><option value="az">azərbaycanca</option><option value="azb">تۆرکجه</option><option value="ba">башҡортса</option><option value="ban">Basa Bali</option><option value="ban-bali">ᬩᬲᬩᬮᬶ</option><option value="bar">Boarisch</option><option value="bbc">Batak Toba</option><option value="bbc-latn">Batak Toba</option><option value="bcc">جهلسری بلوچی</option><option value="bci">wawle</option><option value="bcl">Bikol Central</option><option value="bdr">Bajau Sama</option><option value="be">беларуская</option><option value="be-tarask">беларуская (тарашкевіца)</option><option value="bew">Betawi</option><option value="bg">български</option><option value="bgc">हरियाणवी</option><option value="bgn">روچ کپتین بلوچی</option><option value="bh">भोजपुरी</option><option value="bho">भोजपुरी</option><option value="bi">Bislama</option><option value="bjn">Banjar</option><option value="blk">ပအိုဝ်ႏဘာႏသာႏ</option><option value="bm">bamanankan</option><option value="bn">বাংলা</option><option value="bo">བོད་ཡིག</option><option value="bpy">বিষ্ণুপ্রিয়া মণিপুরী</option><option value="bqi">بختیاری</option><option value="br">brezhoneg</option><option value="brh">Bráhuí</option><option value="bs">bosanski</option><option value="btm">Batak Mandailing</option><option value="bto">Iriga Bicolano</option><option value="bug">Basa Ugi</option><option value="bxr">буряад</option><option value="ca">català</option><option value="cbk-zam">Chavacano de Zamboanga</option><option value="ccp">𑄌𑄋𑄴𑄟𑄳𑄦</option><option value="cdo">閩東語 / Mìng-dĕ̤ng-ngṳ̄</option><option value="ce">нохчийн</option><option value="ceb">Cebuano</option><option value="ch">Chamoru</option><option value="chn">chinuk wawa</option><option value="chr">ᏣᎳᎩ</option><option value="chy">Tsetsêhestâhese</option><option value="ckb">کوردی</option><option value="co">corsu</option><option value="cps">Capiceño</option><option value="cpx">莆仙語 / Pó-sing-gṳ̂</option><option value="cpx-hans">莆仙语（简体）</option><option value="cpx-hant">莆仙語（繁體）</option><option value="cr">Nēhiyawēwin / ᓀᐦᐃᔭᐍᐏᐣ</option><option value="crh">qırımtatarca</option><option value="crh-cyrl">къырымтатарджа (Кирилл)</option><option value="crh-latn">qırımtatarca (Latin)</option><option value="crh-ro">tatarşa</option><option value="cs">čeština</option><option value="csb">kaszëbsczi</option><option value="cu">словѣньскъ / ⰔⰎⰑⰂⰡⰐⰠⰔⰍⰟ</option><option value="cv">чӑвашла</option><option value="cy">Cymraeg</option><option value="da">dansk</option><option value="dag">dagbanli</option><option value="de">Deutsch</option><option value="de-at">Österreichisches Deutsch</option><option value="de-ch">Schweizer Hochdeutsch</option><option value="de-formal">Deutsch (Sie-Form)</option><option value="dga">Dagaare</option><option value="din">Thuɔŋjäŋ</option><option value="diq">Zazaki</option><option value="dsb">dolnoserbski</option><option value="dtp">Kadazandusun</option><option value="dty">डोटेली</option><option value="dua">Duálá</option><option value="dv">ދިވެހިބަސް</option><option value="dz">ཇོང་ཁ</option><option value="ee">eʋegbe</option><option value="efi">Efịk</option><option value="egl">emiliàn e rumagnòl</option><option value="el">Ελληνικά</option><option value="eml">emiliàn e rumagnòl</option><option value="en" selected="">English</option><option value="en-ca">Canadian English</option><option value="en-gb">British English</option><option value="eo">Esperanto</option><option value="es">español</option><option value="es-formal">español (formal)</option><option value="et">eesti</option><option value="eu">euskara</option><option value="ext">estremeñu</option><option value="fa">فارسی</option><option value="fat">mfantse</option><option value="ff">Fulfulde</option><option value="fi">suomi</option><option value="fit">meänkieli</option><option value="fj">Na Vosa Vakaviti</option><option value="fo">føroyskt</option><option value="fon">fɔ̀ngbè</option><option value="fr">français</option><option value="frc">français cadien</option><option value="frp">arpetan</option><option value="frr">Nordfriisk</option><option value="fur">furlan</option><option value="fy">Frysk</option><option value="ga">Gaeilge</option><option value="gaa">Ga</option><option value="gag">Gagauz</option><option value="gan">贛語</option><option value="gan-hans">赣语（简体）</option><option value="gan-hant">贛語（繁體）</option><option value="gcf">kréyòl Gwadloup</option><option value="gcr">kriyòl gwiyannen</option><option value="gd">Gàidhlig</option><option value="gl">galego</option><option value="gld">на̄ни</option><option value="glk">گیلکی</option><option value="gn">Avañe'ẽ</option><option value="gom">गोंयची कोंकणी / Gõychi Konknni</option><option value="gom-deva">गोंयची कोंकणी</option><option value="gom-latn">Gõychi Konknni</option><option value="gor">Bahasa Hulontalo</option><option value="got">𐌲𐌿𐍄𐌹𐍃𐌺</option><option value="gpe">Ghanaian Pidgin</option><option value="grc">Ἀρχαία ἑλληνικὴ</option><option value="gsw">Alemannisch</option><option value="gu">ગુજરાતી</option><option value="guc">wayuunaiki</option><option value="gur">farefare</option><option value="guw">gungbe</option><option value="gv">Gaelg</option><option value="ha">Hausa</option><option value="hak">客家語 / Hak-kâ-ngî</option><option value="haw">Hawaiʻi</option><option value="he">עברית</option><option value="hi">हिन्दी</option><option value="hif">Fiji Hindi</option><option value="hif-latn">Fiji Hindi</option><option value="hil">Ilonggo</option><option value="hno">ہندکو</option><option value="hr">hrvatski</option><option value="hrx">Hunsrik</option><option value="hsb">hornjoserbsce</option><option value="hsn">湘語</option><option value="ht">Kreyòl ayisyen</option><option value="hu">magyar</option><option value="hu-formal">magyar (formal)</option><option value="hy">հայերեն</option><option value="hyw">Արեւմտահայերէն</option><option value="ia">interlingua</option><option value="iba">Jaku Iban</option><option value="ibb">ibibio</option><option value="id">Bahasa Indonesia</option><option value="ie">Interlingue</option><option value="ig">Igbo</option><option value="igl">Igala</option><option value="ii">ꆇꉙ</option><option value="ik">Iñupiatun</option><option value="ike-cans">ᐃᓄᒃᑎᑐᑦ</option><option value="ike-latn">inuktitut</option><option value="ilo">Ilokano</option><option value="inh">гӀалгӀай</option><option value="io">Ido</option><option value="is">íslenska</option><option value="isv-cyrl">меджусловјанскы</option><option value="isv-latn">medžuslovjansky</option><option value="it">italiano</option><option value="iu">ᐃᓄᒃᑎᑐᑦ / inuktitut</option><option value="ja">日本語</option><option value="jam">Patois</option><option value="jbo">la .lojban.</option><option value="jut">jysk</option><option value="jv">Jawa</option><option value="ka">ქართული</option><option value="kaa">Qaraqalpaqsha</option><option value="kab">Taqbaylit</option><option value="kai">Karai-karai</option><option value="kbd">адыгэбзэ</option><option value="kbd-cyrl">адыгэбзэ</option><option value="kbp">Kabɩyɛ</option><option value="kcg">Tyap</option><option value="kea">kabuverdianu</option><option value="kg">Kongo</option><option value="kge">Kumoring</option><option value="khw">کھوار</option><option value="ki">Gĩkũyũ</option><option value="kiu">Kırmancki</option><option value="kjh">хакас</option><option value="kjp">ဖၠုံလိက်</option><option value="kk">қазақша</option><option value="kk-arab">قازاقشا (تٴوتە)</option><option value="kk-cn">قازاقشا (جۇنگو)</option><option value="kk-cyrl">қазақша (кирил)</option><option value="kk-kz">қазақша (Қазақстан)</option><option value="kk-latn">qazaqşa (latın)</option><option value="kk-tr">qazaqşa (Türkïya)</option><option value="kl">kalaallisut</option><option value="km">ភាសាខ្មែរ</option><option value="kn">ಕನ್ನಡ</option><option value="knc">Yerwa Kanuri</option><option value="ko">한국어</option><option value="ko-kp">조선말</option><option value="koi">перем коми</option><option value="kr">kanuri</option><option value="krc">къарачай-малкъар</option><option value="kri">Krio</option><option value="krj">Kinaray-a</option><option value="krl">karjal</option><option value="ks">कॉशुर / کٲشُر</option><option value="ks-arab">کٲشُر</option><option value="ks-deva">कॉशुर</option><option value="ksh">Ripoarisch</option><option value="ksw">စှီၤ</option><option value="ku">kurdî</option><option value="ku-arab">کوردی (عەرەبی)</option><option value="ku-latn">kurdî (latînî)</option><option value="kum">къумукъ</option><option value="kus">Kʋsaal</option><option value="kv">коми</option><option value="kw">kernowek</option><option value="ky">кыргызча</option><option value="la">Latina</option><option value="lad">Ladino</option><option value="lb">Lëtzebuergesch</option><option value="lbe">лакку</option><option value="lez">лезги</option><option value="lfn">Lingua Franca Nova</option><option value="lg">Luganda</option><option value="li">Limburgs</option><option value="lij">Ligure</option><option value="liv">Līvõ kēļ</option><option value="lki">لەکی</option><option value="lld">Ladin</option><option value="lmo">lombard</option><option value="ln">lingála</option><option value="lo">ລາວ</option><option value="loz">Silozi</option><option value="lrc">لۊری شومالی</option><option value="lt">lietuvių</option><option value="ltg">latgaļu</option><option value="lua">ciluba</option><option value="lus">Mizo ţawng</option><option value="luz">لئری دوٙمینی</option><option value="lv">latviešu</option><option value="lzh">文言</option><option value="lzz">Lazuri</option><option value="mad">Madhurâ</option><option value="mag">मगही</option><option value="mai">मैथिली</option><option value="map-bms">Basa Banyumasan</option><option value="mdf">мокшень</option><option value="mg">Malagasy</option><option value="mhr">олык марий</option><option value="mi">Māori</option><option value="min">Minangkabau</option><option value="mk">македонски</option><option value="ml">മലയാളം</option><option value="mn">монгол</option><option value="mnc">manju gisun</option><option value="mnc-latn">manju gisun</option><option value="mnc-mong">ᠮᠠᠨᠵᡠ ᡤᡳᠰᡠᠨ</option><option value="mni">ꯃꯤꯇꯩ ꯂꯣꯟ</option><option value="mnw">ဘာသာမန်</option><option value="mo">молдовеняскэ</option><option value="mos">moore</option><option value="mr">मराठी</option><option value="mrh">Mara</option><option value="mrj">кырык мары</option><option value="ms">Bahasa Melayu</option><option value="ms-arab">بهاس ملايو</option><option value="mt">Malti</option><option value="mui">Baso Palembang</option><option value="mwl">Mirandés</option><option value="my">မြန်မာဘာသာ</option><option value="myv">эрзянь</option><option value="mzn">مازِرونی</option><option value="na">Dorerin Naoero</option><option value="nah">Nāhuatl</option><option value="nan">閩南語 / Bân-lâm-gú</option><option value="nan-hant">閩南語（傳統漢字）</option><option value="nan-latn-pehoeji">Bân-lâm-gú (Pe̍h-ōe-jī)</option><option value="nan-latn-tailo">Bân-lâm-gú (Tâi-lô)</option><option value="nap">Napulitano</option><option value="nb">norsk bokmål</option><option value="nds">Plattdüütsch</option><option value="nds-nl">Nedersaksies</option><option value="ne">नेपाली</option><option value="new">नेपाल भाषा</option><option value="nia">Li Niha</option><option value="nit">కొలామి</option><option value="niu">Niuē</option><option value="nl">Nederlands</option><option value="nl-informal">Nederlands (informeel)</option><option value="nmz">nawdm</option><option value="nn">norsk nynorsk</option><option value="nod">ᨣᩤᩴᨾᩮᩬᩥᨦ</option><option value="nog">ногайша</option><option value="nov">Novial</option><option value="nqo">ߒߞߏ</option><option value="nr">isiNdebele seSewula</option><option value="nrm">Nouormand</option><option value="nso">Sesotho sa Leboa</option><option value="nup">Nupe</option><option value="nv">Diné bizaad</option><option value="ny">Chi-Chewa</option><option value="nyn">runyankore</option><option value="nyo">Orunyoro</option><option value="nys">Nyunga</option><option value="oc">occitan</option><option value="ojb">Ojibwemowin</option><option value="olo">livvinkarjala</option><option value="om">Oromoo</option><option value="or">ଓଡ଼ିଆ</option><option value="os">ирон</option><option value="pa">ਪੰਜਾਬੀ</option><option value="pag">Pangasinan</option><option value="pam">Kapampangan</option><option value="pap">Papiamentu</option><option value="pcd">Picard</option><option value="pcm">Naijá</option><option value="pdc">Deitsch</option><option value="pdt">Plautdietsch</option><option value="pfl">Pälzisch</option><option value="pi">पालि</option><option value="pih">Norfuk / Pitkern</option><option value="pl">polski</option><option value="pms">Piemontèis</option><option value="pnb">پنجابی</option><option value="pnt">Ποντιακά</option><option value="prg">prūsiskan</option><option value="ps">پښتو</option><option value="pt">português</option><option value="pt-br">português do Brasil</option><option value="pwn">pinayuanan</option><option value="qqq">Message documentation</option><option value="qu">Runa Simi</option><option value="qug">Runa shimi</option><option value="rgn">Rumagnôl</option><option value="rif">Tarifit</option><option value="rki">ရခိုင်</option><option value="rm">rumantsch</option><option value="rmc">romaňi čhib</option><option value="rmy">romani čhib</option><option value="rn">ikirundi</option><option value="ro">română</option><option value="roa-tara">tarandíne</option><option value="rsk">руски</option><option value="ru">русский</option><option value="rue">русиньскый</option><option value="rup">armãneashti</option><option value="ruq">Vlăheşte</option><option value="ruq-cyrl">Влахесте</option><option value="ruq-latn">Vlăheşte</option><option value="rut">мыхаӀбишды</option><option value="rw">Ikinyarwanda</option><option value="ryu">うちなーぐち</option><option value="sa">संस्कृतम्</option><option value="sah">саха тыла</option><option value="sat">ᱥᱟᱱᱛᱟᱲᱤ</option><option value="sc">sardu</option><option value="scn">sicilianu</option><option value="sco">Scots</option><option value="sd">سنڌي</option><option value="sdc">Sassaresu</option><option value="sdh">کوردی خوارگ</option><option value="se">davvisámegiella</option><option value="se-fi">davvisámegiella (Suoma bealde)</option><option value="se-no">davvisámegiella (Norgga bealde)</option><option value="se-se">davvisámegiella (Ruoŧa bealde)</option><option value="sei">Cmique Itom</option><option value="ses">Koyraboro Senni</option><option value="sg">Sängö</option><option value="sgs">žemaitėška</option><option value="sh">srpskohrvatski / српскохрватски</option><option value="sh-cyrl">српскохрватски (ћирилица)</option><option value="sh-latn">srpskohrvatski (latinica)</option><option value="shi">Taclḥit</option><option value="shn">ၽႃႇသႃႇတႆး </option><option value="shy">tacawit</option><option value="shy-latn">tacawit</option><option value="si">සිංහල</option><option value="sjd">кӣллт са̄мь кӣлл</option><option value="sje">bidumsámegiella</option><option value="sk">slovenčina</option><option value="skr">سرائیکی</option><option value="skr-arab">سرائیکی</option><option value="sl">slovenščina</option><option value="sli">Schläsch</option><option value="sm">Gagana Samoa</option><option value="sma">åarjelsaemien</option><option value="smn">anarâškielâ</option><option value="sms">nuõrttsääʹmǩiõll</option><option value="sn">chiShona</option><option value="so">Soomaaliga</option><option value="sq">shqip</option><option value="sr">српски / srpski</option><option value="sr-ec">српски (ћирилица)</option><option value="sr-el">srpski (latinica)</option><option value="srn">Sranantongo</option><option value="sro">sardu campidanesu</option><option value="ss">SiSwati</option><option value="st">Sesotho</option><option value="stq">Seeltersk</option><option value="sty">себертатар</option><option value="su">Sunda</option><option value="sv">svenska</option><option value="sw">Kiswahili</option><option value="syl">ꠍꠤꠟꠐꠤ</option><option value="szl">ślůnski</option><option value="szy">Sakizaya</option><option value="ta">தமிழ்</option><option value="tay">Tayal</option><option value="tcy">ತುಳು</option><option value="tdd">ᥖᥭᥰ ᥖᥬᥲ ᥑᥨᥒᥰ</option><option value="te">తెలుగు</option><option value="tet">tetun</option><option value="tg">тоҷикӣ</option><option value="tg-cyrl">тоҷикӣ</option><option value="tg-latn">tojikī</option><option value="th">ไทย</option><option value="ti">ትግርኛ</option><option value="tig">ትግሬ</option><option value="tk">Türkmençe</option><option value="tl">Tagalog</option><option value="tly">tolışi</option><option value="tn">Setswana</option><option value="to">lea faka-Tonga</option><option value="tok">toki pona</option><option value="tpi">Tok Pisin</option><option value="tr">Türkçe</option><option value="tru">Ṫuroyo</option><option value="trv">Seediq</option><option value="ts">Xitsonga</option><option value="tt">татарча / tatarça</option><option value="tt-cyrl">татарча</option><option value="tt-latn">tatarça</option><option value="ttj">Orutooro</option><option value="tum">chiTumbuka</option><option value="tw">Twi</option><option value="ty">reo tahiti</option><option value="tyv">тыва дыл</option><option value="tzm">ⵜⴰⵎⴰⵣⵉⵖⵜ</option><option value="udm">удмурт</option><option value="ug">ئۇيغۇرچە / Uyghurche</option><option value="ug-arab">ئۇيغۇرچە</option><option value="ug-latn">Uyghurche</option><option value="uk">українська</option><option value="ur">اردو</option><option value="uz">oʻzbekcha / ўзбекча</option><option value="ve">Tshivenda</option><option value="vec">vèneto</option><option value="vep">vepsän kel’</option><option value="vi">Tiếng Việt</option><option value="vls">West-Vlams</option><option value="vmf">Mainfränkisch</option><option value="vmw">emakhuwa</option><option value="vo">Volapük</option><option value="vot">Vaďďa</option><option value="vro">võro</option><option value="wa">walon</option><option value="wal">wolaytta</option><option value="war">Winaray</option><option value="wls">Fakaʻuvea</option><option value="wo">Wolof</option><option value="wuu">吴语</option><option value="wuu-hans">吴语（简体）</option><option value="wuu-hant">吳語（正體）</option><option value="xal">хальмг</option><option value="xh">isiXhosa</option><option value="xmf">მარგალური</option><option value="xsy">saisiyat</option><option value="yi">ייִדיש</option><option value="yo">Yorùbá</option><option value="yrl">Nhẽẽgatú</option><option value="yue">粵語</option><option value="yue-hans">粵语（简体）</option><option value="yue-hant">粵語（繁體）</option><option value="za">Vahcuengh</option><option value="zea">Zeêuws</option><option value="zgh">ⵜⴰⵎⴰⵣⵉⵖⵜ ⵜⴰⵏⴰⵡⴰⵢⵜ</option><option value="zh">中文</option><option value="zh-cn">中文（中国大陆）</option><option value="zh-hans">中文（简体）</option><option value="zh-hant">中文（繁體）</option><option value="zh-hk">中文（香港）</option><option value="zh-mo">中文（澳門）</option><option value="zh-my">中文（马来西亚）</option><option value="zh-sg">中文（新加坡）</option><option value="zh-tw">中文（臺灣）</option><option value="zu">isiZulu</option></select><input id="languageselector-commit-1" style="" type="submit" value="set"></form></span></div>
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Apptainer</span></h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From Alliance Doc</div>
		<div id="contentSub"><div id="mw-content-subtitle"></div></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content"><div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr"><div class="mw-pt-languages noprint navigation-not-searchable" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><span class="mw-pt-languages-ui mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" lang="en" dir="ltr">English</span></li>
<li><a href="/wiki/Apptainer/fr" class="mw-pt-progress mw-pt-progress--complete" title="Apptainer/fr (100% translated)" lang="fr" dir="ltr">français</a></li></ul></div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Forewords"><span class="tocnumber">1</span> <span class="toctext">Forewords</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Official_Apptainer_documentation"><span class="tocnumber">1.1</span> <span class="toctext">Official Apptainer documentation</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#If_you_are_currently_using_Singularity"><span class="tocnumber">1.2</span> <span class="toctext">If you are currently using Singularity</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Other_Linux_container_technologies"><span class="tocnumber">1.3</span> <span class="toctext">Other Linux container technologies</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Other_items"><span class="tocnumber">1.4</span> <span class="toctext">Other items</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#General"><span class="tocnumber">1.4.1</span> <span class="toctext">General</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#sudo"><span class="tocnumber">1.4.2</span> <span class="toctext">sudo</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Building_images_or_overlays"><span class="tocnumber">1.4.3</span> <span class="toctext">Building images or overlays</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Loading_an_Apptainer_module"><span class="tocnumber">2</span> <span class="toctext">Loading an Apptainer module</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Running_programs_within_a_container"><span class="tocnumber">3</span> <span class="toctext">Running programs within a container</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Important_command_line_options"><span class="tocnumber">3.1</span> <span class="toctext">Important command line options</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Using_GPUs"><span class="tocnumber">3.2</span> <span class="toctext">Using GPUs</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Using_MPI_programs"><span class="tocnumber">3.3</span> <span class="toctext">Using MPI programs</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Container-specific_help:_apptainer_run-help"><span class="tocnumber">3.4</span> <span class="toctext">Container-specific help: apptainer run-help</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Running_software:_apptainer_run_or_apptainer_exec"><span class="tocnumber">3.5</span> <span class="toctext">Running software: apptainer run or apptainer exec</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Interactively_running_software:_apptainer_shell"><span class="tocnumber">3.6</span> <span class="toctext">Interactively running software: apptainer shell</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Running_daemons:_apptainer_instance"><span class="tocnumber">3.7</span> <span class="toctext">Running daemons: apptainer instance</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Running_MPI_programs"><span class="tocnumber">3.8</span> <span class="toctext">Running MPI programs</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="#Bind_mounts_and_persistent_overlays"><span class="tocnumber">4</span> <span class="toctext">Bind mounts and persistent overlays</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#Bind_mounts"><span class="tocnumber">4.1</span> <span class="toctext">Bind mounts</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Persistent_overlays"><span class="tocnumber">4.2</span> <span class="toctext">Persistent overlays</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22"><a href="#Building_an_Apptainer_image"><span class="tocnumber">5</span> <span class="toctext">Building an Apptainer image</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="#Building_a_SIF_image"><span class="tocnumber">5.1</span> <span class="toctext">Building a SIF image</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Building_a_sandbox_image"><span class="tocnumber">5.2</span> <span class="toctext">Building a sandbox image</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-25"><a href="#Example_use_cases"><span class="tocnumber">6</span> <span class="toctext">Example use cases</span></a>
<ul>
<li class="toclevel-2 tocsection-26"><a href="#Using_Conda_in_Apptainer"><span class="tocnumber">6.1</span> <span class="toctext">Using Conda in Apptainer</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Using_Spack_in_Apptainer"><span class="tocnumber">6.2</span> <span class="toctext">Using Spack in Apptainer</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Using_NVIDIA_GPUs_in_Apptainer"><span class="tocnumber">6.3</span> <span class="toctext">Using NVIDIA GPUs in Apptainer</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#Using_MPI_in_Apptainer"><span class="tocnumber">6.4</span> <span class="toctext">Using MPI in Apptainer</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#Creating_an_Apptainer_container_from_a_Dockerfile"><span class="tocnumber">6.5</span> <span class="toctext">Creating an Apptainer container from a Dockerfile</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-31"><a href="#Miscellaneous_items"><span class="tocnumber">7</span> <span class="toctext">Miscellaneous items</span></a>
<ul>
<li class="toclevel-2 tocsection-32"><a href="#Cleaning_Apptainer&#39;s_cache_directory"><span class="tocnumber">7.1</span> <span class="toctext">Cleaning Apptainer's cache directory</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Changing_Apptainer&#39;s_default_directories"><span class="tocnumber">7.2</span> <span class="toctext">Changing Apptainer's default directories</span></a></li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="Forewords">Forewords</span></h1>
<h2><span class="mw-headline" id="Official_Apptainer_documentation">Official Apptainer documentation</span></h2>
<p>This page does not describe all features of Apptainer and does not replace <a rel="nofollow" class="external text" href="http://apptainer.org/docs">Apptainer's official documentation</a>.  It summarizes basic use, documents some aspects of using Apptainer on Alliance systems, and provides some relevant examples. We recommend you read the official Apptainer documentation concerning the features of Apptainer you are using.
</p><p>Should you wish to install Apptainer on your own system, <a rel="nofollow" class="external text" href="http://apptainer.org/docs/user/main/quick_start.html#quick-installation">instructions appear here</a>. If you are using a recent Windows system, <a rel="nofollow" class="external text" href="https://learn.microsoft.com/en-ca/windows/wsl/install">install WSL</a> first, then within such, install Apptainer. If you are using a Mac, install a Linux distribution in a virtual machine on your computer first, then install Apptainer within such.
</p>
<h2><span class="mw-headline" id="If_you_are_currently_using_Singularity">If you are currently using Singularity</span></h2>
<p>We strongly recommend that you use Apptainer instead of Singularity. The Linux Foundation has adopted SingularityCE (up to v3.9.5) and renamed it Apptainer with these changes:
</p>
<ul><li>Added support for <a rel="nofollow" class="external text" href="https://dmtcp.sourceforge.io/">DMTCP checkpointing</a>.</li>
<li>Removed support for the <code>--nvccli</code> command line option.</li>
<li>Removed support for <code>apptainer build --remote</code>.</li>
<li>Removed support for the SylabsCloud remote endpoint, replacing it with a DefaultRemote endpoint with no defined server for <code>library://</code>.
<ul><li>If you need the SylabsCloud remote, the <a rel="nofollow" class="external text" href="https://apptainer.org/docs/user/1.0/endpoint.html#restoring-pre-apptainer-library-behavior">previous default can be restored</a>.</li></ul></li>
<li>Renamed all executable names, paths, etc. having <code>singularity</code> in their names to have <code>apptainer</code> in them.
<ul><li>E.g., instead of using the <code>singularity</code> command one uses the <code>apptainer</code> command.</li>
<li>E.g., the <code>~/.singularity</code> directory is now <code>~/.apptainer</code>.</li></ul></li>
<li>Renamed all environment variables having <code>SINGULARITY</code> in their names to have <code>APPTAINER</code> in them.</li></ul>
<p>Should you need to port scripts to Apptainer, know Apptainer version 1 is backwards compatible with Singularity so switching to Apptainer can be done incrementally.
</p>
<h2><span class="mw-headline" id="Other_Linux_container_technologies">Other Linux container technologies</span></h2>
<p>HPC clusters typically use Apptainer. Many users ask about other Linux container technologies so here are some with some comments:
</p>
<ul><li><a rel="nofollow" class="external text" href="https://podman.io/">Podman</a>
<ul><li>Supports rootless (i.e., normal) container use, etc. similar to Apptainer.</li>
<li>Is available as a package in rpm-supporting (and some other) Linux distributions.</li>
<li>While Podman is a Linux container technology, there are <a rel="nofollow" class="external text" href="https://github.com/containers/podman/blob/main/docs/tutorials/mac_win_client.md">instructions for installing Podman on Windows/Mac machines</a>.</li>
<li>Podman version 4 supports Apptainer .SIF files.</li></ul></li>
<li><a rel="nofollow" class="external text" href="https://www.docker.com/">Docker</a>
<ul><li>Using Docker on a multiuser cluster creates security risks, therefore we do not make Docker available on our HPC clusters.</li>
<li>You can install and use Docker on your own computer and use it to create an Apptainer image, which can then be uploaded to an HPC cluster as outlined in <b><a href="#Creating_an_Apptainer_container_from_a_Dockerfile">this section</a></b> later on this page.</li></ul></li></ul>
<h2><span class="mw-headline" id="Other_items">Other items</span></h2>
<h3><span class="mw-headline" id="General">General</span></h3>
<ul><li>In order to use Apptainer you must have a container <b>image</b>, e.g., a <code>.sif</code> file or a "sandbox" directory created previously. If you don't already have an image or a sandbox, see the section on <b><a class="mw-selflink-fragment" href="#Building_an_Apptainer_image">building an image</a></b> below.</li>
<li>While Apptainer is installed and available for use, using Apptainer will require you to install and/or build all software you will need to make use of in your container. In many instances, <b><a href="/wiki/Available_software" title="Available software">we already have such software installed on our clusters</a></b> so there is often no need to create a container with the same installed in it.</li></ul>
<h3><span class="mw-headline" id="sudo"><code>sudo</code></span></h3>
<p>Many users ask about <code>sudo</code> since documentation and websites often discuss using <code>sudo</code>. Know the ability to use <code>sudo</code> to obtain superuser/root permissions is not available on our clusters. Should you require using <code>sudo</code>, consider the following options:
</p>
<ul><li>Install Linux, Apptainer, and <code>sudo</code> in a virtual machine on a system you control so you will be able to have <code>sudo</code> access within such. Build your image(s) on that machine and upload them in order to use them on Alliance systems.</li>
<li>If appropriate, <a href="/wiki/Technical_Support" class="mw-redirect" title="Technical Support">submit a ticket</a> asking if Alliance staff would be able to help build the image(s) required needing <code>sudo</code>. This may or may not be possible, but feel free to ask in a ticket if what you wish to achieve is beyond your means. Additionally, we may respond with other ways to achieve such which may or may not involve Apptainer.</li>
<li>Apptainer version 1.1.x and newer has improved support for users using <code>--fakeroot</code> implicitly and explicitly so some things may be possible that were not with Apptainer version 1.0 and Singularity. This includes being able to build some images from <code>.def</code> definition files and building some images without needing to use <code>sudo</code>. That said, not all images will be able to be built without needing to use <code>sudo</code> or superuser/root.</li></ul>
<h3><span class="mw-headline" id="Building_images_or_overlays">Building images or overlays</span></h3>
<p>Should you need to build your own container image(s) or overlay(s), be aware of the following:
</p>
<ul><li>Avoid building a sandbox image using <code>--fakeroot</code> on networked filesystem(s): <a rel="nofollow" class="external text" href="https://apptainer.org/docs/admin/main/installation.html#fakeroot-with-uid-gid-mapping-on-network-filesystems">link to Apptainer documentation</a>.</li>
<li>Explicitly set <code>APPTAINER_CACHEDIR</code> to a non-networked filesystem location before using Apptainer: <a rel="nofollow" class="external text" href="https://apptainer.org/docs/admin/main/installation.html#apptainer-cache-atomic-rename">link to Apptainer documentation</a>.</li>
<li>Explicitly set <code>APPTAINER_TMPDIR</code> to a non-Lustre/GPFS filesystem location before using Apptainer: <a rel="nofollow" class="external text" href="https://apptainer.org/docs/admin/main/installation.html#lustre-gpfs">link to Apptainer documentation</a>.</li>
<li>Avoid using Lustre/GPFS filesystems as they don't have the feature set required to properly support building Apptainer containers (including <code>--fakeroot</code>): <a rel="nofollow" class="external text" href="https://apptainer.org/docs/admin/main/installation.html#lustre-gpfs">link to Apptainer documentation</a>.</li></ul>
<h1><span class="mw-headline" id="Loading_an_Apptainer_module">Loading an Apptainer module</span></h1>
<p>In order to use the default version of Apptainer available run:
</p>
<div class="mw-highlight mw-highlight-lang-console mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>load<span class="w"> </span>apptainer
</pre></div>
<p>To see the available versions of Apptainer that can be loaded run:
</p>
<div class="mw-highlight mw-highlight-lang-console mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>spider<span class="w"> </span>apptainer
</pre></div>
<h1><span class="mw-headline" id="Running_programs_within_a_container">Running programs within a container</span></h1>
<h2><span class="mw-headline" id="Important_command_line_options">Important command line options</span></h2>
<p>Software that is run inside a container is in an environment that uses different libraries and tools than what is installed on the host system. It is, therefore, important to run programs within containers by <b>not</b> using any environment settings or software defined outside of the container. Unfortunately, by default, Apptainer will run adopting the shell environment of the host and this can result in issues when running programs. To avoid such issues when using <code>apptainer run</code>, <code>apptainer shell</code>, <code>apptainer exec</code>, and/or <code>apptainer instance</code>, use one of these options:
</p>
<table class="wikitable">
<caption>Apptainer environment command line options

</caption>
<tbody><tr>
<td><code>-C</code></td>
<td>Isolates the running container from <b>all filesystems</b> as well as the parent PID, IPC, and environment. Using this option will require <a href="#Bind_mounts">using bind mounts</a> if access to filesystems outside of the container is needed.
</td></tr>
<tr>
<td><code>-c</code></td>
<td>Isolates the running container from <b>most filesystems</b> only using a minimal <code>/dev</code>, an empty <code>/tmp</code> directory, and an empty <code>/home</code> directory. Using this option will require <a href="#Bind_mounts">using bind mounts</a> if access to filesystems outside of the container is needed.
</td></tr>
<tr>
<td><code>-e</code></td>
<td>Cleans (some) shell environment variables before running container commands and applies settings for increased OCI/Docker compatibility. Using this option also implies the use of options <code>--containall</code>, <code>--no-init</code>, <code>--no-umask</code>, and <code>--writable-tmpfs</code>.
</td></tr></tbody></table>
<p>Another important option is the <code>-W</code> or <code>--workdir</code> option. On our clusters and on most Linux systems, <code>/tmp</code> and similar filesystems use RAM, not disk space. Since jobs typically run on our clusters with limited RAM amounts, this can result in jobs getting killed because they consume too much RAM relative to what was requested for the job. A suitable workaround for this is to tell Apptainer to use a real disk location for its working directory (<code>workdir</code>). This is done by passing the <code>-W</code> option followed by a path to a disk location where Apptainer can read/write temporary files For example, to run a command called <code>myprogram</code> in an Apptainer container image called <code>myimage.sif</code> with its working directory set to <code>/path/to/a/workdir</code> in the filesystem, you would use
</p>
<div class="mw-highlight mw-highlight-lang-console mw-content-ltr" dir="ltr"><pre><span></span><span class="go">apptainer run -C -B /project -W /path/to/a/workdir myimage.sif myprogram</span>
</pre></div>
<p>where:
</p>
<ul><li><code>workdir</code> can be removed if there are no live containers using it.</li>
<li>When using Apptainer in an <code>salloc</code>, in an <code>sbatch</code> job, or when using <a href="/wiki/JupyterHub" title="JupyterHub">JupyterHub</a> on our clusters, use <code>${SLURM_TMPDIR}</code> for the working directory's location, e.g., <code>-W ${SLURM_TMPDIR}</code>.
<ul><li>ASIDE: One should <b>not</b> be running programs (including Apptainer) on a login node.  Use an interactive <code>salloc</code> job.</li></ul></li>
<li>When using bind mounts, see the <a href="#Bind_Mounts">section on bind mounts</a> below since not all of our  clusters are the same concerning the exact bind mounts needed to access <code>/home</code>, <code>/project</code>, and <code>/scratch</code>.</li></ul>
<h2><span class="mw-headline" id="Using_GPUs">Using GPUs</span></h2>
<p>When running software inside a container that requires the use of GPUs it is important to do the following:
</p>
<ul><li>Ensure that you pass the <code>--nv</code> (for NVIDIA hardware) and <code>--rocm</code> (for AMD hardware) to Apptainer commands.
<ul><li>These options will ensure the appropriate <code>/dev</code> entries are bind mounted inside the container.</li>
<li>These options will locate and bind GPU-related libraries on the host, as well as set the <code>LD_LIBRARY_PATH</code> environment variable to enable the aforementioned libraries to work inside the container.</li></ul></li>
<li>Ensure the application using the GPU inside the container was properly compiled to use the GPU and its libraries.</li>
<li>When needing to use OpenCL inside the container, besides using the aforementioned options, use the following bind mount: <code>-B /etc/OpenCL</code>.</li></ul>
<p>An example of <a href="#Using_NVIDIA_GPUs_Within_an_Apptainer_Container">using NVIDIA GPUs within an Apptainer container</a> appears later on this page.
</p>
<h2><span class="mw-headline" id="Using_MPI_programs">Using MPI programs</span></h2>
<p>If you need to run MPI programs inside a container, there are things that need to be done in the host environment in order for such to work. Please see the <a href="#Running_MPI_Programs_Inside_an_Apptainer_Container">Running MPI Programs section below</a> for an example of how to run MPI programs inside a container. The <a rel="nofollow" class="external text" href="http://apptainer.org/docs/user/main/mpi.html">official Apptainer documentation</a> has more information concerning how MPI programs can be run inside a container.
</p>
<h2><span class="mw-headline" id="Container-specific_help:_apptainer_run-help">Container-specific help: <code>apptainer run-help</code></span></h2>
<p>Apptainer containers built from <a rel="nofollow" class="external text" href="http://apptainer.org/docs/user/main/definition_files.html">Definition files</a> often will have a <code>%help</code> section. To see this section run:
</p>
<pre>apptainer run-help your-container-name.sif
</pre>
<p>where:
</p>
<ul><li><code>your-container-name.sif</code> is the name of your container</li></ul>
<p>It is possible your container also has "apps" defined in it, you can get help for those apps by running:
</p>
<pre>apptainer run-help --app appname your-container-name.sif
</pre>
<p>where:
</p>
<ul><li><code>appname</code> is the name of the app</li>
<li><code>your-container-name.sif</code> is the name of your container</li></ul>
<p>To see a list of apps installed in your container (if there are any), run:
</p>
<pre>apptainer inspect --list-apps your-container-name.sif
</pre>
<p>where:
</p>
<ul><li><code>your-container-name.sif</code> is the name of your container</li></ul>
<h2><span class="mw-headline" id="Running_software:_apptainer_run_or_apptainer_exec">Running software: <code>apptainer run</code> or <code>apptainer exec</code></span></h2>
<p>When the <code>apptainer run</code> command launches the container, it first runs the <code>%runscript</code> defined for that container (if there is one), and then runs the specific command you specified. <br />
The <code>apptainer exec</code> command will not run the <code>%runscript</code>, even if one is defined in the container.
</p><p>We suggest that you aways use <code>apptainer run</code>.
</p><p>For example, suppose you want to run the <code>g++</code> compiler inside your container to compile a C++ program called <code>myprog.cpp</code> and then run that program. To do this, you might use this command:
</p>
<pre>apptainer run your-container-name.sif g++ -O2 -march=broadwell ./myprog.cpp
apptainer run your-container-name.sif ./a.out
</pre>
<p>where:
</p>
<ul><li><code>your-container-name.sif</code> is the name of your SIF file</li>
<li><code>g++ -O2 -march=broadwell ./myprog.cpp</code> is the command you want to run inside the container</li></ul>
<p>On our clusters, you will want to use a number of additional options (that appear after <code>run</code>, but before <code>your-container-name.sif</code>). These options include <code>-C</code>, <code>-c</code>, <code>-e</code>, <code>-W</code> as well as various bind mount options to make your disk space available to the programs that run in your container. For example:
</p>
<pre> apptainer run -C -W $SLURM_TMPDIR -B /project -B /scratch your-container-name.sif g++ -O2 -march=broadwell ./myprog.cpp
 apptainer run -C -W $SLURM_TMPDIR -B /project -B /scratch ./a.out
</pre>
<p>For more information on these options see the following sections on this page:
</p>
<ul><li><a href="#Important_command_line_options">Important command line options</a></li>
<li><a href="#Using_GPUs">Using GPUs</a></li>
<li><a href="#Bind_mounts_and_persistent_overlays">Bind mounts and persistent overlays</a></li></ul>
<p>as well as the <a rel="nofollow" class="external text" href="http://apptainer.org/docs/user/main/index.html">official Apptainer documentation</a>.
</p>
<h2><span class="mw-headline" id="Interactively_running_software:_apptainer_shell">Interactively running software: <code>apptainer shell</code></span></h2>
<p>The <code>apptainer run</code>, <code>apptainer exec</code>, and <code>apptainer instance</code> commands run the programs provided immediately which makes them excellent for use in BASH and SLURM job scripts. There are times when one needs to interactively do work inside a container. To run commands interactively while remaining inside a container, use the <code>apptainer shell</code> command instead.
</p><p>For example, to run commands interactively in a container one first invokes the <code>apptainer shell</code> command, e.g.,
</p>
<pre>apptainer shell your-container-name.sif
</pre>
<p>where:
</p>
<ul><li><code>your-container-name.sif</code> is the name of your SIF file</li></ul>
<p>Once the container starts, you will see an <code>Apptainer&gt;</code> prompt (or <code>Singularity&gt;</code> prompt if using Singularity). At this prompt you can run desired shell commands in the container. When done, type <code>exit</code> and hit the Enter/Return key to exit the container.
</p><p>On our clusters, you will want to use a number of additional options (that appear after <code>run</code> and before <code>your-container-name.sif</code>). These options will include <code>-C</code>, <code>-c</code>, <code>-e</code>, <code>-W</code> as well as various bind mount options to make your disk space available to the programs that run in your container. For example:
</p>
<pre> apptainer shell -C -W $SLURM_TMPDIR -B /home:/cluster_home -B /project -B /scratch your-container-name.sif
</pre>
<p>For more information on these options see the following sections on this page:
</p>
<ul><li><a href="#Important_Command_Line_Options">Important Command Line Options</a></li>
<li><a href="#Using_GPUs">Using GPUs</a></li>
<li><a href="#Bind_Mounts_and_Persistent_Overlays">Bind Mounts and Persistent Overlays</a></li></ul>
<p>as well as the <a rel="nofollow" class="external text" href="http://apptainer.org/docs/user/main/index.html">official Apptainer documentation</a>.
</p><p><b>IMPORTANT:</b>In addition to choose to use the above options, if you are making use of a persistent overlay image (as a separate file or contained within the SIF file) and want changes to be written to that image, it is extremely important to pass the <code>-w</code> or <code>--writable</code> option to your container. If this option is not passed to it, any changes you make to the image in the <code>apptainer shell</code> session will not be saved!
</p>
<h2><span class="mw-headline" id="Running_daemons:_apptainer_instance">Running daemons: <code>apptainer instance</code></span></h2>
<p>Apptainer has been designed to be able to properly run daemons within compute jobs on clusters. Running daemons is achieved, in part, by using <code>apptainer instance</code>. See the <a rel="nofollow" class="external text" href="http://apptainer.org/docs/user/main/running_services.html">official Apptainer documentation on Running Services</a> for the details.
</p><p><b>NOTE 1:</b> Don't run daemons manually without using <code>apptainer instance</code> and related commands. Apptainer works properly with other tools such as the Slurm scheduler that run on our clusters. When a job is cancelled, killed, crashes, or is otherwise finished, daemons run using <code>apptainer instance</code> will not hang or result in defunct processes. Additionally by using the <code>apptainer instance</code> command you will be able to control the daemons and programs running in the same container.
</p><p><b>NOTE 2:</b> Daemons can only run in your job while your job is running. Should the scheduler kill your job, all daemons running in that job will also be killed. Should you need to run daemons longer than the job they were started in, you may need to also have a virtual machine running in the cloud. If so please contact <a href="/wiki/Technical_support" title="Technical support">technical support</a>.
</p>
<h2><span class="mw-headline" id="Running_MPI_programs">Running MPI programs</span></h2>
<p>Running MPI programs within an Apptainer container across nodes likely will require special configuration. MPI exploits cluster interconnection hardware to communicate amongst nodes much more efficiently. Normally one does not need to worry about this since it is automatically done --except when running MPI programs across cluster nodes.
</p><p><b>NOTE:</b> When all MPI processes are running on a single shared-memory node, there is no need to use interconnection hardware and there will be no issues running MPI programs within an Apptainer container when all MPI processes run on a single cluster node, e.g., when the slurm option <code>--nodes=1</code> is used with an <code>sbatch</code> script. Unless one <b>explicitly</b> sets the maximum number of cluster nodes used to <code>1</code>, the scheduler can choose to run an MPI program over multiple nodes. If such will run from within an Apptainer container and has not been set up to properly run, then it is possible it will fail to run.
</p><p>More in preparation.
</p>
<h1><span class="mw-headline" id="Bind_mounts_and_persistent_overlays">Bind mounts and persistent overlays</span></h1>
<p>Often, one will want to use either or both of these features in Apptainer:
</p>
<ul><li><b>bind mounts</b>, to access disk space originating outside of the container, and,</li>
<li><b>persistent overlays</b>, to overlay a writable filesystem on an otherwise immutable (i.e., read-only) container image.</li></ul>
<h2><span class="mw-headline" id="Bind_mounts">Bind mounts</span></h2>
<p>When Apptainer is used with the <code>-C</code> or <code>-c</code> options, one will notice that they cannot access their disk space when inside the container. The remedy for this is to explicitly bind mount the disk space they wish to access. For example, suppose a user was using <code>-C</code> like this in an <code>sbatch</code> job to use Apptainer:
</p>
<pre>apptainer run -C -W $SLURM_TMPDIR a-container.sif wc -l ./my_data_file.txt
</pre>
<p>where <code>./my_data_file.txt</code> is a file in the current directory on the host, i.e., the file is not stored in the container at all. Because of the <code>-C</code> option, this file will not be accessible to the <code>wc</code> program inside the container and an access error will result. The fix is to bind mount the current directory, e.g.,
</p>
<pre>apptainer run -C -B . -W $SLURM_TMPDIR a-container.sif wc -l ./my_data_file.txt
</pre>
<p>where <code>-B .</code> will bind mount the current directory, <code>.</code>.
</p><p>While one can have multiple bind mounts specified, it is often easier to specify the top directories of the filesystems one wishes to access. For example, on our clusters one might want to use
</p>
<pre>apptainer run -C -B /project -B /scratch -W $SLURM_TMPDIR a-container.sif wc -l ./my_data_file.txt
</pre>
<p>where:
</p>
<ul><li><code>-B /project</code> mounts the project filesystem</li>
<li><code>-B /scratch</code> mounts the scratch filesystem</li></ul>
<p>Doing this is especially useful when:
</p>
<ul><li>you need to access others' files on your research team in other locations, and/or,</li>
<li>you need to access files/directories some of which are <code>symlinks</code> to different locations that would/might otherwise be broken if you did not mount the entire filesystem.</li></ul>
<p>If using these bind mounts does not work on the cluster you are using, run this next script to obtain the bind mount options you need to pass to Apptainer for /home, /project, and /scratch on that cluster
</p>
<pre>/home/preney/public/apptainer-scripts/get-apptainer-options.sh
</pre>
<p>It should be mentioned that a bind mount does not need to be in the same location inside the container: one can bind mount any file or directory to be at a different location, e.g.,
</p>
<pre>apptainer run -C -B ./my_data_file.txt:/special/input.dat -W $SLURM_TMPDIR a-container.sif wc -l /special/input.dat
</pre>
<p>i.e., <code>-B ./my_data_file.txt:/special/input.dat</code> bind mount maps the file <code>./my_data_file.txt</code> to be the file <code>/special/input.dat</code> inside the container and the <code>wc</code> command now processes that file. This feature can be useful when programs/scripts inside the container have hard-coded paths to files and directories that must be located in certain locations.
</p><p>If you need to bind-mount the <code>/home</code> filesystem in your container, use an alternate destination directory:
</p>
<ul><li><code>-B /home:/cluster_home</code></li></ul>
<p>This ensures that configuration files and programs in your home directory do not interfere with the software in your container. For example, programs in <code>$HOME/bin</code> and Python packages in <code>$HOME/.local/lib/python3.x</code> could be used instead of the corresponding files in your container if you used <code>-B /home</code>.
</p><p>Finally, <b>don't mount our CVMFS paths</b> inside your containers as this is fraught with perils and defeats many reasons to use a container. The programs that have to run inside a container need to be completely inside the container. Don't introduce even more programs inside the container if they don't need to be there.
</p>
<h2><span class="mw-headline" id="Persistent_overlays">Persistent overlays</span></h2>
<p>Please refer to Apptainer documentation page about <a rel="nofollow" class="external text" href="https://apptainer.org/docs/user/main/persistent_overlays.html">persistent overlays</a>.
</p>
<h1><span class="mw-headline" id="Building_an_Apptainer_image">Building an Apptainer image</span></h1>
<p><b>NOTE:</b> Please note and heed the advice given in section <b><a href="#Building_images_or_overlays">Building images and overlays</a></b>.
</p><p>Apptainer images can be created in the following formats:
</p>
<ul><li>as an <code>SIF</code> file, or</li>
<li>as a sandbox directory.</li></ul>
<p><b><code>SIF</code> files</b> can contain multiple parts where each part is typically a <code>squashfs</code> filesystem (which are read-only and compressed). It is possible for <code>SIF</code> files to contain read-write filesystems and overlay images as well, but such is beyond the scope of this page; see <a rel="nofollow" class="external text" href="http://apptainer.org/docs">Apptainer's official documentation</a> on how to do such. Unless more advanced methods of building an image were used, the Apptainer <code>build</code> command produces a <code>SIF</code> file with a read-only <code>squashfs</code> filesystem when building images. This is the preferred option since the resulting image remains as-is since it is read-only, and the image is much smaller because it is compressed. Know that disk reads from that image are done very quickly.
</p><p><b>A sandbox directory</b> is a normal directory in the filesystem that starts out as empty. As Apptainer builds the image, it adds to it the files and directories needed in the image. The contents of a sandbox directory should only be accessed or updated through the use of Apptainer. One might need to use a sandbox directory in situations where one needs to have read-write access to the image itself in order to be able to update the container image. That said, if updates are infrequent, it is typically easier and better to use a <code>SIF</code> file and when updates need to be done, build a sandbox image from the <code>SIF</code> file, make the required changes, and then build a new <code>SIF</code> file, e.g.,
</p>
<div class="mw-highlight mw-highlight-lang-console mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>
<span class="gp">$ </span>mkdir<span class="w"> </span>mynewimage.dir
<span class="gp">$ </span>apptainer<span class="w"> </span>build<span class="w"> </span>mynewimage.dir<span class="w"> </span>myimage.sif
<span class="gp">$ </span>apptainer<span class="w"> </span>shell<span class="w"> </span>--writable<span class="w"> </span>mynewimage.dir
<span class="go">Apptainer&gt; # Run commands to update mynewimage.dir here.</span>
<span class="go">Apptainer&gt; exit</span>
<span class="gp">$ </span>apptainer<span class="w"> </span>build<span class="w"> </span>newimage.sif<span class="w"> </span>mynewimage.dir
<span class="gp">$ </span>rm<span class="w"> </span>-rf<span class="w"> </span>mynewimage.dir
</pre></div>
<p>Using an <code>SIF</code> file is recommended as disk performance (from the container image) will be faster than storing each file separately on our cluster filesystems, which are set up to handle large files and parallel I/O. Using an <code>SIF</code> file instead of a sandbox image will also only use a quota file count amount of 1 instead of thousands (some images will typically contain thousands of files and directories).
</p><p>Many Linux distribution package managers require root permissions in order to use them. This implies that Apptainer version 1.0.x and the older Singularity cannot be used on compute clusters to build images as a normal user. Should such occur, <a href="/wiki/Technical_support" title="Technical support">submit a ticket</a> asking for help to create that image or use a computer with Apptainer installed where you have root permissions.
</p><p>Apptainer has a <code>--fakeroot</code> feature used to build and manipulate images. With versions prior to Apptainer 1.1, one wanting to use this feature on a cluster requires <a href="/wiki/Technical_support" title="Technical support">submitting a ticket</a> for a system administrator to consider adding that person so Apptainer's <code>--fakeroot</code> on a specific cluster, which may or not be possible. With Apptainer version 1.1, <code>--fakeroot</code> can be used without being formally added.
</p><p>Know that some containers will not build successfully without using a <code>root</code> account to build them. These images cannot be built on our clusters.
</p><p>If all you need is to use a Docker image as-is with Apptainer, often those images can be built and run without issues, e.g.,  without any need to have additional permissions or explicitly use <code>--fakeroot</code>. Should you need to modify the image after creating it, you may need elevated permissions to successfully do this, e.g., if the image's Linux distribution package manager requires such and you need to install a package using it. For this reason, the examples shown below assume one only needs to use a Docker image as-is.
</p>
<h2><span class="mw-headline" id="Building_a_SIF_image">Building a SIF image</span></h2>
<p><b>NOTE:</b>  Please note and heed the advice concerning building images/overlays in section <b><a href="#Building_Images.2FOverlays">Building images and overlays</a> </b> above.
</p><p>To build an Apptainer SIF file image from Docker's latest available busybox image, use the <code>apptainer build</code> command:
</p>
<div class="mw-highlight mw-highlight-lang-console mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>build<span class="w"> </span>bb.sif<span class="w"> </span>docker://busybox
</pre></div>
<p>See the <a rel="nofollow" class="external text" href="https://apptainer.org/docs">Apptainer documentation</a> for more advanced aspects of building images.
</p>
<h2><span class="mw-headline" id="Building_a_sandbox_image">Building a sandbox image</span></h2>
<p><b>NOTE:</b>  Please note and heed the advice concerning building images/overlays in section <b><a href="#Building_Images.2FOverlays">Building images and overlays</a> </b> above.
</p><p>In order to build a "sandbox" directory instead of an <code>SIF</code> file instead of providing an <code>SIF</code> file name, instead provide <code>--sandbox DIR_NAME</code> or <code>-s DIR_NAME</code> where <code>DIR_NAME</code> is the name of the to-be-created-directory where you want your "sandbox" image. For example, if the <code>apptainer build</code> command to create an <code>SIF</code> file was:
</p>
<div class="mw-highlight mw-highlight-lang-console mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>build<span class="w"> </span>bb.sif<span class="w"> </span>docker://busybox
</pre></div>
<p>then change <code>bb.sif</code> to a directory name, e.g., <code>bb.dir</code>, and prefix such with <code>--sandbox</code>:
</p>
<div class="mw-highlight mw-highlight-lang-console mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>build<span class="w"> </span>--sandbox<span class="w"> </span>bb.dir<span class="w"> </span>docker://busybox
</pre></div>
<p>Differences between building a "sandbox" image and a (normal) <code>SIF</code> file are:
</p>
<ul><li>the <code>SIF</code> file's image will be contained in a single file, compressed, and read-only,</li>
<li>the "sandbox" image will be placed in a directory, uncompressed, may contain thousands of files (depending on what exactly is in the image), and will be able to be read-write.</li></ul>
<p>Within an account, using a "sandbox" directory will consume significant amounts of both disk space and file count quotas, thus, if read-write access to the underlying image is not normally required, you are advised to use an <code>SIF</code> instead. Additionally, using an <code>SIF</code> file will have higher disk access speeds to content contained within the <code>SIF</code> file.
</p>
<h1><span class="mw-headline" id="Example_use_cases">Example use cases</span></h1>
<h2><span class="mw-headline" id="Using_Conda_in_Apptainer">Using Conda in Apptainer</span></h2>
<p>We will preface this tutorial on how to use Conda inside a container with the following <b>important notes</b>:
</p>
<ul><li>Even inside a container, Conda should be used only as a <b>last resort</b>. Priority should always be given to using <a href="/wiki/Modules" title="Modules">modules</a> from our <a href="/wiki/Available_software" title="Available software">software stack</a>, and <a href="/wiki/Python" title="Python">wheels</a> from our <a href="/wiki/Available_Python_wheels" title="Available Python wheels">Python wheelhouse</a>. These are optimized for our systems and we are better equipped to provide support if you use them. Please <a href="/wiki/Technical_support" title="Technical support">contact us</a> if you need a module or a Python package that is not currently available on our systems.</li>
<li>This tutorial will use the <a rel="nofollow" class="external text" href="https://mamba.readthedocs.io/en/latest/user_guide/micromamba.html">micromamba</a> package manager instead of Conda. If you choose to use Conda instead, keep in mind that its use is subject to <a rel="nofollow" class="external text" href="https://legal.anaconda.com/policies/en?name=terms-of-service#terms-of-service">Anaconda's Terms of Service</a> and might require a  <a rel="nofollow" class="external text" href="https://www.anaconda.com/pricing/terms-of-service-faqs">commercial license</a>.</li>
<li>This tutorial shows how to create a read-only image, i.e., a one-off <tt>.sif</tt> file containing a Conda environment that has everything you need to run your application. We strongly discourage installing software interactively with Conda inside a container and will not show how to do this here.</li></ul>
<p>Creating an Apptainer image and using Conda to install software inside it is a 3-step process. The first step is to create a <tt>.yml</tt> file describing the Conda environment we wish to create inside the container. In the example that follows, we create the file <tt>environment.yml</tt> . This file is where we give our environment a name, then give Conda a list of packages that must be installed and the channels where to look for them. For more information <a rel="nofollow" class="external text" href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#create-env-file-manually">see here</a>.
</p><p><br />
</p>
<div class="code-file">
<div class="filename"><b>File&#160;:</b> environment.yml</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="name%3A+base%0Achannels%3A%0A++-+conda-forge%0A++-+bioconda%0A++-+defaults%0Adependencies%3A%0A++-+python%0A++-+pip%0A++-+star%0A++-+bwa%0A++-+multiqc" />
<input type="hidden" name="filename" value="environment.yml" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-yaml mw-content-ltr" dir="ltr"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">base</span>
<span class="nt">channels</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conda-forge</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bioconda</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">defaults</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">star</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bwa</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">multiqc</span>
</pre></div>
</div>
<p><br />
</p><p>Second, we create an Apptainer <a rel="nofollow" class="external text" href="https://apptainer.org/docs/user/main/definition_files.html">image definition file</a>. This file, here called <tt>image.def</tt>, describes what are the steps Apptainer should take to create our image. These steps are:
</p>
<ol><li>Pull a Docker image from DockerHub that has the micromamba package manager pre-installed.</li>
<li>Create a copy of the Conda environment definition file <tt>environment.yml</tt> inside the container</li>
<li>Call micromamba and have it configure the environment defined in <tt>environment.yml</tt>.</li></ol>
<p><br />
</p>
<div class="code-file">
<div class="filename"><b>File&#160;:</b> image.def</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="Bootstrap%3A+docker%0AFrom%3A+mambaorg%2Fmicromamba%3Alatest%0A%0A%25files%0A++++environment.yml+%2Fenvironment.yml%0A%0A%25post%0A++++micromamba+install+-n+base+--file+environment.yml+%26%26+%5C%0A++++++++micromamba+clean+--all+--yes" />
<input type="hidden" name="filename" value="image.def" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-yaml mw-content-ltr" dir="ltr"><pre><span></span><span class="nt">Bootstrap</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker</span>
<span class="nt">From</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mambaorg/micromamba:latest</span>

<span class="err">%</span><span class="l l-Scalar l-Scalar-Plain">files</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">environment.yml /environment.yml</span>

<span class="err">%</span><span class="l l-Scalar l-Scalar-Plain">post</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">micromamba install -n base --file environment.yml &amp;&amp; \</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">micromamba clean --all --yes</span>
</pre></div>
</div>
<p><br />
</p><p>The last step is to build the Apptainer image using the definition file above:
</p>
<pre>  module load apptainer
  APPTAINER_BIND=' ' apptainer build image.sif image.def
</pre>
<p>You can test that your image provides <code>multiqc</code>, for example, like this:
</p>
<div>
<div style="float:right; margin-left:8px">
<p><span typeof="mw:File"><a href="https://explainshell.com/explain?cmd=apptainer+run+image.sif+multiqc+--help" rel="nofollow"><img src="/mediawiki/images/thumb/3/30/Question.png/40px-Question.png" decoding="async" width="40" height="40" class="mw-file-element" srcset="/mediawiki/images/thumb/3/30/Question.png/60px-Question.png 1.5x, /mediawiki/images/thumb/3/30/Question.png/80px-Question.png 2x" /></a></span>
</p>
</div>
<div class="command">
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="o">[</span>name@server<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>apptainer<span class="w"> </span>run<span class="w"> </span>image.sif<span class="w"> </span>multiqc<span class="w"> </span>--help
///<span class="w"> </span>MultiQC<span class="w"> </span>🎃<span class="w"> </span>v1.25.1
<span class="w"> </span>
<span class="w"> </span>Usage:<span class="w"> </span>multiqc<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span><span class="w"> </span><span class="o">[</span>ANALYSIS<span class="w"> </span>DIRECTORY<span class="o">]</span>
...
</pre></div>
</div>
</div>
<h2><span class="mw-headline" id="Using_Spack_in_Apptainer">Using Spack in Apptainer</span></h2>
<p>In preparation.
</p>
<h2><span class="mw-headline" id="Using_NVIDIA_GPUs_in_Apptainer">Using NVIDIA GPUs in Apptainer</span></h2>
<p>In preparation.
</p>
<h2><span class="mw-headline" id="Using_MPI_in_Apptainer">Using MPI in Apptainer</span></h2>
<p>In preparation.
</p>
<h2><span class="mw-headline" id="Creating_an_Apptainer_container_from_a_Dockerfile">Creating an Apptainer container from a Dockerfile</span></h2>
<p><b>NOTE: This section requires you to install and use Docker and Apptainer on a system where you have appropriate privileges. These instructions will <i>not</i> work on our compute clusters.</b>
</p><p>Unfortunately, some instructions for packages only provide a <code>Dockerfile</code> without a container image. A <code>Dockerfile</code> contains the instructions necessary for the Docker software to build that container. Our clusters do not have the Docker software installed. That said, if you've access to a system with both Docker and Apptainer installed, and, sufficient access to Docker (e.g., <code>sudo</code> or root access, or, you are in that system's <code>docker</code> group) and if needed Apptainer (e.g., <code>sudo</code> or root access, or, you have <code>--fakeroot</code> access), then you can follow the instructions below to use Docker and then Apptainer to build an Apptainer image on that system.
</p><p><b>NOTE:</b> Using Docker may fail if you are not in the <code>docker</code> group. Similarly, building some containers may fail with Apptainer without appropriate <code>sudo</code>, root, or <code>--fakeroot</code> permissions. It is your responsibility to ensure you've such access on the system you are running the commands below.
</p><p>If one only has a Dockerfile and wishes to create an Apptainer image, run the following on a computer with Docker and Apptainer installed (where you've sufficient permissions):
</p>
<pre>docker build -f Dockerfile -t your-tag-name
docker save your-tag-name -o your-tarball-name.tar
docker image rm your-tag-name
apptainer build --fakeroot your-sif-name.sif docker-archive://your-tarball-name.tar
rm your-tarball-name.tar
</pre>
<p>where:
</p>
<ul><li><code>your-tag-name</code> is a name you make up that will identify the container created in Docker</li>
<li><code>your-tarball-name.tar</code> is a filename you create that Docker will save the generated content of the container to</li>
<li><code>--fakeroot</code> is possibly optional (if so omit such); if <code>sudo</code> is needed instead then omit <code>--fakeroot</code> and prefix the line with <code>sudo</code></li>
<li><code>your-sif-name.sif</code> is the name of the Apptainer SIF file for the Apptainer container</li></ul>
<p>After this is done, the SIF file is an Apptainer container for the <code>Dockerfile</code>. Transfer the SIF to the appropriate cluster(s) in order to use such.
</p><p><b>NOTE:</b> It is possible that the Dockerfile pulled in more layers which means you will have to manually delete those additional layers by running:
</p>
<pre>docker images
</pre>
<p>followed by running <code>docker image rm ID</code> (where ID is the image ID output from the <code>docker images</code> command) in order to free up the disk space associated with those other image layers on the system you are using.
</p>
<h1><span class="mw-headline" id="Miscellaneous_items">Miscellaneous items</span></h1>
<h2><span id="Cleaning_Apptainer.27s_cache_directory"></span><span class="mw-headline" id="Cleaning_Apptainer's_cache_directory">Cleaning Apptainer's cache directory</span></h2>
<p>Over time Apptainer's file cache will grow. To see where these files are run:
</p>
<pre>apptainer cache list
</pre>
<p>and to remove those files, run:
</p>
<pre>apptainer cache clean
</pre>
<h2><span id="Changing_Apptainer.27s_default_directories"></span><span class="mw-headline" id="Changing_Apptainer's_default_directories">Changing Apptainer's default directories</span></h2>
<p>You can override Apptainer's default temporary and cache directories by setting these environment variables before running <code>apptainer</code>:
</p>
<ul><li><code>APPTAINER_CACHEDIR</code>: the directory where Apptainer will download and cache files</li>
<li><code>APPTAINER_TMPDIR</code>: the directory where Apptainer will write temporary files including when building (squashfs) images</li></ul>
<p>For example, to tell Apptainer to use your scratch space for its cache and temporary files (which is might be a better location), one might run:
</p>
<pre>$ mkdir -p /scratch/$USER/apptainer/{cache,tmp}
$ export APPTAINER_CACHEDIR="/scratch/$USER/apptainer/cache"
$ export APPTAINER_TMPDIR="/scratch/$USER/apptainer/tmp"
</pre>
<p>before running <code>apptainer</code>.
</p>
<!-- 
NewPP limit report
Cached time: 20250530234928
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc]
CPU time usage: 0.075 seconds
Real time usage: 0.963 seconds
Preprocessor visited node count: 511/1000000
Post‐expand include size: 1284/2097152 bytes
Template argument size: 883/2097152 bytes
Highest expansion depth: 6/100
Expensive parser function count: 10/100
Unstrip recursion depth: 1/20
Unstrip post‐expand size: 7425/5000000 bytes
ExtLoops count: 0/100
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  303.786      1 -total
 65.78%  199.835      2 Template:File
 34.12%  103.664      1 Template:Command
-->

<!-- Saved in parser cache with key ccwiki:pcache:idhash:20105-0!canonical and timestamp 20250530234928 and revision id 164626. Rendering was triggered because: page-view
 -->
</div>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://docs.alliancecan.ca/mediawiki/index.php?title=Apptainer&amp;oldid=164626">https://docs.alliancecan.ca/mediawiki/index.php?title=Apptainer&amp;oldid=164626</a>"</div></div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/mediawiki/index.php?title=Category:Pages_using_deprecated_source_tags&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages using deprecated source tags (page does not exist)">Pages using deprecated source tags</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		
<nav id="p-personal" class="mw-portlet mw-portlet-personal vector-user-menu-legacy vector-menu" aria-labelledby="p-personal-label"  >
	<h3
		id="p-personal-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Personal tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="pt-uls" class="mw-list-item active"><a class="uls-trigger" href="#"><span>English</span></a></li><li id="pt-login" class="mw-list-item"><a href="/mediawiki/index.php?title=Special:UserLogin&amp;returnto=Apptainer" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span>Log in</span></a></li>
		</ul>
		
	</div>
</nav>

		<div id="left-navigation">
			
<nav id="p-namespaces" class="mw-portlet mw-portlet-namespaces vector-menu-tabs vector-menu-tabs-legacy vector-menu" aria-labelledby="p-namespaces-label"  >
	<h3
		id="p-namespaces-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Namespaces</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-nstab-main" class="selected mw-list-item"><a href="/wiki/Apptainer" title="View the content page [c]" accesskey="c"><span>Page</span></a></li><li id="ca-talk" class="new mw-list-item"><a href="/mediawiki/index.php?title=Talk:Apptainer&amp;action=edit&amp;redlink=1" rel="discussion" class="new" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
		</ul>
		
	</div>
</nav>

			
<nav id="p-variants" class="mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown vector-menu" aria-labelledby="p-variants-label"  >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox"
		aria-labelledby="p-variants-label"
	>
	<label
		id="p-variants-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			
<nav id="p-views" class="mw-portlet mw-portlet-views vector-menu-tabs vector-menu-tabs-legacy vector-menu" aria-labelledby="p-views-label"  >
	<h3
		id="p-views-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Views</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-view" class="selected mw-list-item"><a href="/wiki/Apptainer"><span>Read</span></a></li><li id="ca-viewsource" class="mw-list-item"><a href="/mediawiki/index.php?title=Apptainer&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e"><span>View source</span></a></li><li id="ca-history" class="mw-list-item"><a href="/mediawiki/index.php?title=Apptainer&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
		</ul>
		
	</div>
</nav>

			
<nav id="p-cactions" class="mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-menu" aria-labelledby="p-cactions-label"  title="More options" >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox"
		aria-labelledby="p-cactions-label"
	>
	<label
		id="p-cactions-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<h3 >Search</h3>
	<form action="/mediawiki/index.php" id="searchform" class="vector-search-box-form">
		<div id="simpleSearch"
			class="vector-search-box-inner"
			 data-search-loc="header-navigation">
			<input class="vector-search-box-input"
				 type="search" name="search" placeholder="Search Alliance Doc" aria-label="Search Alliance Doc" autocapitalize="sentences" title="Search Alliance Doc [f]" accesskey="f" id="searchInput"
			>
			<input type="hidden" name="title" value="Special:Search">
			<input id="mw-searchButton"
				 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search">
			<input id="searchButton"
				 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go">
		</div>
	</form>
</div>

		</div>
	</div>
	
<div id="mw-panel" class="vector-legacy-sidebar">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="/wiki/Technical_documentation"
			title="Visit the main page"></a>
	</div>
	
<nav id="p-navigation" class="mw-portlet mw-portlet-navigation vector-menu-portal portal vector-menu" aria-labelledby="p-navigation-label"  >
	<h3
		id="p-navigation-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Navigation</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-wiki-main-page" class="mw-list-item"><a href="/wiki/Technical_documentation"><span>Wiki Main Page</span></a></li>
		</ul>
		
	</div>
</nav>

	
<nav id="p-sidebar-support" class="mw-portlet mw-portlet-sidebar-support vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-support-label"  >
	<h3
		id="p-sidebar-support-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Support</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-getting-started" class="mw-list-item"><a href="/wiki/Getting_started"><span>Getting started</span></a></li><li id="n-sidebar-technical-support" class="mw-list-item"><a href="/wiki/Technical_support"><span>Getting help</span></a></li><li id="n-sidebar-running-jobs" class="mw-list-item"><a href="/wiki/Running_jobs"><span>Running jobs</span></a></li><li id="n-sidebar-known-issues" class="mw-list-item"><a href="/wiki/Known_issues"><span>Known issues</span></a></li><li id="n-sidebar-system-status" class="mw-list-item"><a href="http://status.computecanada.ca" rel="nofollow"><span>System status</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-sidebar-resources" class="mw-portlet mw-portlet-sidebar-resources vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-resources-label"  >
	<h3
		id="p-sidebar-resources-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Resources</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-Béluga" class="mw-list-item"><a href="/wiki/B%C3%A9luga/en"><span>Béluga</span></a></li><li id="n-Cedar" class="mw-list-item"><a href="/wiki/Cedar"><span>Cedar</span></a></li><li id="n-Graham" class="mw-list-item"><a href="/wiki/Graham"><span>Graham</span></a></li><li id="n-Narval" class="mw-list-item"><a href="/wiki/Narval/en"><span>Narval</span></a></li><li id="n-Niagara" class="mw-list-item"><a href="/wiki/Niagara"><span>Niagara</span></a></li><li id="n-sidebar-cloud" class="mw-list-item"><a href="/wiki/CC-Cloud"><span>Cloud</span></a></li><li id="n-tamIA" class="mw-list-item"><a href="/wiki/TamIA/en"><span>tamIA</span></a></li><li id="n-Killarney" class="mw-list-item"><a href="/wiki/Killarney"><span>Killarney</span></a></li><li id="n-sidebar-quantum-computing" class="mw-list-item"><a href="/wiki/Services_d%27informatique_quantique/en"><span>Quantum computing</span></a></li><li id="n-sidebar-available-software" class="mw-list-item"><a href="/wiki/Available_software"><span>Available software</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-sidebar-alliance" class="mw-portlet mw-portlet-sidebar-alliance vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-alliance-label"  >
	<h3
		id="p-sidebar-alliance-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">The Alliance</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-alliance-main-page" class="mw-list-item"><a href="https://alliancecan.ca/en" rel="nofollow"><span>Alliance main page</span></a></li><li id="n-sidebar-ccdb" class="mw-list-item"><a href="https://ccdb.computecanada.ca/security/login" rel="nofollow"><span>CCDB</span></a></li><li id="n-sidebar-getting-an-account" class="mw-list-item"><a href="https://alliancecan.ca/en/services/advanced-research-computing/account-management/apply-account" rel="nofollow"><span>Getting An Account</span></a></li><li id="n-sidebar-acknowledging-alliance" class="mw-list-item"><a href="https://alliancecan.ca/en/services/advanced-research-computing/research-portal/acknowledging-alliance" rel="nofollow"><span>Acknowledging the Alliance</span></a></li><li id="n-sidebar-aup" class="mw-list-item"><a href="https://alliancecan.ca/en/services/advanced-research-computing/account-management/policies" rel="nofollow"><span>Acceptable Use Policy</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-sidebar-authoring" class="mw-portlet mw-portlet-sidebar-authoring vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-authoring-label"  >
	<h3
		id="p-sidebar-authoring-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Authoring</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-guidelines" class="mw-list-item"><a href="/wiki/Authoring_guidelines"><span>Guidelines</span></a></li><li id="n-sidebar-mediawiki-help" class="mw-list-item"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents"><span>MediaWiki Help</span></a></li><li id="n-recentchanges" class="mw-list-item"><a href="/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-tb" class="mw-portlet mw-portlet-tb vector-menu-portal portal vector-menu" aria-labelledby="p-tb-label"  >
	<h3
		id="p-tb-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="t-whatlinkshere" class="mw-list-item"><a href="/wiki/Special:WhatLinksHere/Apptainer" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="/wiki/Special:RecentChangesLinked/Apptainer" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="/mediawiki/index.php?title=Apptainer&amp;oldid=164626" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="/mediawiki/index.php?title=Apptainer&amp;action=info" title="More information about this page"><span>Page information</span></a></li>
		</ul>
		
	</div>
</nav>

	
</div>

</div>

<footer id="footer" class="mw-footer" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 13 November 2024, at 19:55.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="/wiki/CCWiki:Privacy_policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="/wiki/CCWiki:About">About Alliance Doc</a></li>
	<li id="footer-places-disclaimers"><a href="/wiki/CCWiki:General_disclaimer">Disclaimers</a></li>
	<li id="footer-places-mobileview"><a href="https://docs.alliancecan.ca/mediawiki/index.php?title=Apptainer&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/mediawiki/resources/assets/poweredby_mediawiki.svg" alt="Powered by MediaWiki" width="88" height="31" loading="lazy"></a></li>
</ul>

</footer>

<script>(RLQ=window.RLQ||[]).push(function(){mw.log.warn("This page is using the deprecated ResourceLoader module \"codex-search-styles\".\n[1.43] Use a CodexModule with codexComponents to set your specific components used: https://www.mediawiki.org/wiki/Codex#Using_a_limited_subset_of_components");});</script>
<script src="https://www.googletagmanager.com/gtag/js?id=G-TVBPRD78K4" async=""></script><script>
window.dataLayer = window.dataLayer || [];

function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-TVBPRD78K4', {});
</script>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":1069,"wgPageParseReport":{"limitreport":{"cputime":"0.075","walltime":"0.963","ppvisitednodes":{"value":511,"limit":1000000},"postexpandincludesize":{"value":1284,"limit":2097152},"templateargumentsize":{"value":883,"limit":2097152},"expansiondepth":{"value":6,"limit":100},"expensivefunctioncount":{"value":10,"limit":100},"unstrip-depth":{"value":1,"limit":20},"unstrip-size":{"value":7425,"limit":5000000},"timingprofile":["100.00%  303.786      1 -total"," 65.78%  199.835      2 Template:File"," 34.12%  103.664      1 Template:Command"]},"loops":{"limitreport-count-limited":{"value":0,"limit":100}},"cachereport":{"timestamp":"20250530234928","ttl":86400,"transientcontent":false}}});});</script>
</body>
</html>