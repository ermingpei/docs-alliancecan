<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>META-Farm - Alliance Doc</title>
<script>(function(){var className="client-js";var cookie=document.cookie.match(/(?:^|; )ccwikimwclientpreferences=([^;]+)/);if(cookie){cookie[1].split('%2C').forEach(function(pref){className=className.replace(new RegExp('(^| )'+pref.replace(/-clientpref-\w+$|[^\w-]+/g,'')+'-clientpref-\\w+( |$)'),'$1'+pref+'$2');});}document.documentElement.className=className;}());RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":[",\t."," \t,"],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],"wgRequestId":"aDpEu7FgDh4jAkatbzZEwAAAAII","wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"META-Farm/fr","wgTitle":"META-Farm/fr","wgCurRevisionId":174697,"wgRevisionId":174697,"wgArticleId":18335,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[
"Pages using deprecated source tags"],"wgPageViewLanguage":"fr","wgPageContentLanguage":"fr","wgPageContentModel":"wikitext","wgRelevantPageName":"META-Farm/fr","wgRelevantArticleId":18335,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgULSAcceptLanguageList":[],"wgMFDisplayWikibaseDescriptions":{"search":false,"watchlist":false,"tagline":false},"wgCiteReferencePreviewsActive":true,"wgTranslatePageTranslation":"translation","wgULSPosition":"personal","wgULSisCompactLinksEnabled":true,"wgVector2022LanguageInHeader":false,"wgULSisLanguageSelectorEmpty":false};RLSTATE={"site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.translate.tag.languages":"ready","ext.pygments":"ready","skins.vector.styles.legacy":"ready","ext.translate":"ready","codex-search-styles":"ready","ext.uls.pt":"ready"};RLPAGEMODULES=["ext.pygments.view","site","mediawiki.page.ready","mediawiki.toc",
"skins.vector.legacy.js","ext.languageSelector","ext.translate.pagetranslation.uls","ext.uls.compactlinks","ext.uls.geoclient","ext.uls.interface","ext.moderation.notify","ext.moderation.notify.desktop"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.impl(function(){return["user.options@12s5i",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
}];});});</script>
<link rel="stylesheet" href="/mediawiki/load.php?lang=en&amp;modules=codex-search-styles%7Cext.pygments%2Ctranslate%7Cext.translate.tag.languages%7Cext.uls.pt%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector">
<script async="" src="/mediawiki/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content="">
<link rel="stylesheet" href="/mediawiki/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=1120">
<link rel="icon" href="/mediawiki/resources/assets/Alliance_favicon.png">
<link rel="search" type="application/opensearchdescription+xml" href="/mediawiki/rest.php/v1/search" title="Alliance Doc (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://docs.alliancecan.ca/mediawiki/api.php?action=rsd">
<link rel="alternate" type="application/atom+xml" title="Alliance Doc Atom feed" href="/mediawiki/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector-legacy mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-META-Farm_fr rootpage-META-Farm_fr skin-vector action-view"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"></div>
	<div class="mw-indicators">
	<div id="mw-indicator-languageselector" class="mw-indicator"><span id="languageselector-box-1" class="languageselector " style=""><form name="languageselector-form-1" id="languageselector-form-1" method="get" action="/mediawiki/index.php" style="display:inline;"><input type="hidden" value="META-Farm/fr" name="title"><select name="setlang" id="languageselector-select-1" style=""><option value="aae">Arbërisht</option><option value="ab">аԥсшәа</option><option value="abs">bahasa ambon</option><option value="ace">Acèh</option><option value="acf">Kwéyòl Sent Lisi</option><option value="acm">عراقي</option><option value="ady">адыгабзэ</option><option value="ady-cyrl">адыгабзэ</option><option value="aeb">تونسي / Tûnsî</option><option value="aeb-arab">تونسي</option><option value="aeb-latn">Tûnsî</option><option value="af">Afrikaans</option><option value="aln">Gegë</option><option value="alt">алтай тил</option><option value="am">አማርኛ</option><option value="ami">Pangcah</option><option value="an">aragonés</option><option value="ang">Ænglisc</option><option value="ann">Obolo</option><option value="anp">अंगिका</option><option value="apc">شامي</option><option value="ar">العربية</option><option value="arc">ܐܪܡܝܐ</option><option value="arn">mapudungun</option><option value="arq">جازايرية</option><option value="ary">الدارجة</option><option value="arz">مصرى</option><option value="as">অসমীয়া</option><option value="ase">American sign language</option><option value="ast">asturianu</option><option value="atj">Atikamekw</option><option value="av">авар</option><option value="avk">Kotava</option><option value="awa">अवधी</option><option value="ay">Aymar aru</option><option value="az">azərbaycanca</option><option value="azb">تۆرکجه</option><option value="ba">башҡортса</option><option value="ban">Basa Bali</option><option value="ban-bali">ᬩᬲᬩᬮᬶ</option><option value="bar">Boarisch</option><option value="bbc">Batak Toba</option><option value="bbc-latn">Batak Toba</option><option value="bcc">جهلسری بلوچی</option><option value="bci">wawle</option><option value="bcl">Bikol Central</option><option value="bdr">Bajau Sama</option><option value="be">беларуская</option><option value="be-tarask">беларуская (тарашкевіца)</option><option value="bew">Betawi</option><option value="bg">български</option><option value="bgc">हरियाणवी</option><option value="bgn">روچ کپتین بلوچی</option><option value="bh">भोजपुरी</option><option value="bho">भोजपुरी</option><option value="bi">Bislama</option><option value="bjn">Banjar</option><option value="blk">ပအိုဝ်ႏဘာႏသာႏ</option><option value="bm">bamanankan</option><option value="bn">বাংলা</option><option value="bo">བོད་ཡིག</option><option value="bpy">বিষ্ণুপ্রিয়া মণিপুরী</option><option value="bqi">بختیاری</option><option value="br">brezhoneg</option><option value="brh">Bráhuí</option><option value="bs">bosanski</option><option value="btm">Batak Mandailing</option><option value="bto">Iriga Bicolano</option><option value="bug">Basa Ugi</option><option value="bxr">буряад</option><option value="ca">català</option><option value="cbk-zam">Chavacano de Zamboanga</option><option value="ccp">𑄌𑄋𑄴𑄟𑄳𑄦</option><option value="cdo">閩東語 / Mìng-dĕ̤ng-ngṳ̄</option><option value="ce">нохчийн</option><option value="ceb">Cebuano</option><option value="ch">Chamoru</option><option value="chn">chinuk wawa</option><option value="chr">ᏣᎳᎩ</option><option value="chy">Tsetsêhestâhese</option><option value="ckb">کوردی</option><option value="co">corsu</option><option value="cps">Capiceño</option><option value="cpx">莆仙語 / Pó-sing-gṳ̂</option><option value="cpx-hans">莆仙语（简体）</option><option value="cpx-hant">莆仙語（繁體）</option><option value="cr">Nēhiyawēwin / ᓀᐦᐃᔭᐍᐏᐣ</option><option value="crh">qırımtatarca</option><option value="crh-cyrl">къырымтатарджа (Кирилл)</option><option value="crh-latn">qırımtatarca (Latin)</option><option value="crh-ro">tatarşa</option><option value="cs">čeština</option><option value="csb">kaszëbsczi</option><option value="cu">словѣньскъ / ⰔⰎⰑⰂⰡⰐⰠⰔⰍⰟ</option><option value="cv">чӑвашла</option><option value="cy">Cymraeg</option><option value="da">dansk</option><option value="dag">dagbanli</option><option value="de">Deutsch</option><option value="de-at">Österreichisches Deutsch</option><option value="de-ch">Schweizer Hochdeutsch</option><option value="de-formal">Deutsch (Sie-Form)</option><option value="dga">Dagaare</option><option value="din">Thuɔŋjäŋ</option><option value="diq">Zazaki</option><option value="dsb">dolnoserbski</option><option value="dtp">Kadazandusun</option><option value="dty">डोटेली</option><option value="dua">Duálá</option><option value="dv">ދިވެހިބަސް</option><option value="dz">ཇོང་ཁ</option><option value="ee">eʋegbe</option><option value="efi">Efịk</option><option value="egl">emiliàn e rumagnòl</option><option value="el">Ελληνικά</option><option value="eml">emiliàn e rumagnòl</option><option value="en" selected="">English</option><option value="en-ca">Canadian English</option><option value="en-gb">British English</option><option value="eo">Esperanto</option><option value="es">español</option><option value="es-formal">español (formal)</option><option value="et">eesti</option><option value="eu">euskara</option><option value="ext">estremeñu</option><option value="fa">فارسی</option><option value="fat">mfantse</option><option value="ff">Fulfulde</option><option value="fi">suomi</option><option value="fit">meänkieli</option><option value="fj">Na Vosa Vakaviti</option><option value="fo">føroyskt</option><option value="fon">fɔ̀ngbè</option><option value="fr">français</option><option value="frc">français cadien</option><option value="frp">arpetan</option><option value="frr">Nordfriisk</option><option value="fur">furlan</option><option value="fy">Frysk</option><option value="ga">Gaeilge</option><option value="gaa">Ga</option><option value="gag">Gagauz</option><option value="gan">贛語</option><option value="gan-hans">赣语（简体）</option><option value="gan-hant">贛語（繁體）</option><option value="gcf">kréyòl Gwadloup</option><option value="gcr">kriyòl gwiyannen</option><option value="gd">Gàidhlig</option><option value="gl">galego</option><option value="gld">на̄ни</option><option value="glk">گیلکی</option><option value="gn">Avañe'ẽ</option><option value="gom">गोंयची कोंकणी / Gõychi Konknni</option><option value="gom-deva">गोंयची कोंकणी</option><option value="gom-latn">Gõychi Konknni</option><option value="gor">Bahasa Hulontalo</option><option value="got">𐌲𐌿𐍄𐌹𐍃𐌺</option><option value="gpe">Ghanaian Pidgin</option><option value="grc">Ἀρχαία ἑλληνικὴ</option><option value="gsw">Alemannisch</option><option value="gu">ગુજરાતી</option><option value="guc">wayuunaiki</option><option value="gur">farefare</option><option value="guw">gungbe</option><option value="gv">Gaelg</option><option value="ha">Hausa</option><option value="hak">客家語 / Hak-kâ-ngî</option><option value="haw">Hawaiʻi</option><option value="he">עברית</option><option value="hi">हिन्दी</option><option value="hif">Fiji Hindi</option><option value="hif-latn">Fiji Hindi</option><option value="hil">Ilonggo</option><option value="hno">ہندکو</option><option value="hr">hrvatski</option><option value="hrx">Hunsrik</option><option value="hsb">hornjoserbsce</option><option value="hsn">湘語</option><option value="ht">Kreyòl ayisyen</option><option value="hu">magyar</option><option value="hu-formal">magyar (formal)</option><option value="hy">հայերեն</option><option value="hyw">Արեւմտահայերէն</option><option value="ia">interlingua</option><option value="iba">Jaku Iban</option><option value="ibb">ibibio</option><option value="id">Bahasa Indonesia</option><option value="ie">Interlingue</option><option value="ig">Igbo</option><option value="igl">Igala</option><option value="ii">ꆇꉙ</option><option value="ik">Iñupiatun</option><option value="ike-cans">ᐃᓄᒃᑎᑐᑦ</option><option value="ike-latn">inuktitut</option><option value="ilo">Ilokano</option><option value="inh">гӀалгӀай</option><option value="io">Ido</option><option value="is">íslenska</option><option value="isv-cyrl">меджусловјанскы</option><option value="isv-latn">medžuslovjansky</option><option value="it">italiano</option><option value="iu">ᐃᓄᒃᑎᑐᑦ / inuktitut</option><option value="ja">日本語</option><option value="jam">Patois</option><option value="jbo">la .lojban.</option><option value="jut">jysk</option><option value="jv">Jawa</option><option value="ka">ქართული</option><option value="kaa">Qaraqalpaqsha</option><option value="kab">Taqbaylit</option><option value="kai">Karai-karai</option><option value="kbd">адыгэбзэ</option><option value="kbd-cyrl">адыгэбзэ</option><option value="kbp">Kabɩyɛ</option><option value="kcg">Tyap</option><option value="kea">kabuverdianu</option><option value="kg">Kongo</option><option value="kge">Kumoring</option><option value="khw">کھوار</option><option value="ki">Gĩkũyũ</option><option value="kiu">Kırmancki</option><option value="kjh">хакас</option><option value="kjp">ဖၠုံလိက်</option><option value="kk">қазақша</option><option value="kk-arab">قازاقشا (تٴوتە)</option><option value="kk-cn">قازاقشا (جۇنگو)</option><option value="kk-cyrl">қазақша (кирил)</option><option value="kk-kz">қазақша (Қазақстан)</option><option value="kk-latn">qazaqşa (latın)</option><option value="kk-tr">qazaqşa (Türkïya)</option><option value="kl">kalaallisut</option><option value="km">ភាសាខ្មែរ</option><option value="kn">ಕನ್ನಡ</option><option value="knc">Yerwa Kanuri</option><option value="ko">한국어</option><option value="ko-kp">조선말</option><option value="koi">перем коми</option><option value="kr">kanuri</option><option value="krc">къарачай-малкъар</option><option value="kri">Krio</option><option value="krj">Kinaray-a</option><option value="krl">karjal</option><option value="ks">कॉशुर / کٲشُر</option><option value="ks-arab">کٲشُر</option><option value="ks-deva">कॉशुर</option><option value="ksh">Ripoarisch</option><option value="ksw">စှီၤ</option><option value="ku">kurdî</option><option value="ku-arab">کوردی (عەرەبی)</option><option value="ku-latn">kurdî (latînî)</option><option value="kum">къумукъ</option><option value="kus">Kʋsaal</option><option value="kv">коми</option><option value="kw">kernowek</option><option value="ky">кыргызча</option><option value="la">Latina</option><option value="lad">Ladino</option><option value="lb">Lëtzebuergesch</option><option value="lbe">лакку</option><option value="lez">лезги</option><option value="lfn">Lingua Franca Nova</option><option value="lg">Luganda</option><option value="li">Limburgs</option><option value="lij">Ligure</option><option value="liv">Līvõ kēļ</option><option value="lki">لەکی</option><option value="lld">Ladin</option><option value="lmo">lombard</option><option value="ln">lingála</option><option value="lo">ລາວ</option><option value="loz">Silozi</option><option value="lrc">لۊری شومالی</option><option value="lt">lietuvių</option><option value="ltg">latgaļu</option><option value="lua">ciluba</option><option value="lus">Mizo ţawng</option><option value="luz">لئری دوٙمینی</option><option value="lv">latviešu</option><option value="lzh">文言</option><option value="lzz">Lazuri</option><option value="mad">Madhurâ</option><option value="mag">मगही</option><option value="mai">मैथिली</option><option value="map-bms">Basa Banyumasan</option><option value="mdf">мокшень</option><option value="mg">Malagasy</option><option value="mhr">олык марий</option><option value="mi">Māori</option><option value="min">Minangkabau</option><option value="mk">македонски</option><option value="ml">മലയാളം</option><option value="mn">монгол</option><option value="mnc">manju gisun</option><option value="mnc-latn">manju gisun</option><option value="mnc-mong">ᠮᠠᠨᠵᡠ ᡤᡳᠰᡠᠨ</option><option value="mni">ꯃꯤꯇꯩ ꯂꯣꯟ</option><option value="mnw">ဘာသာမန်</option><option value="mo">молдовеняскэ</option><option value="mos">moore</option><option value="mr">मराठी</option><option value="mrh">Mara</option><option value="mrj">кырык мары</option><option value="ms">Bahasa Melayu</option><option value="ms-arab">بهاس ملايو</option><option value="mt">Malti</option><option value="mui">Baso Palembang</option><option value="mwl">Mirandés</option><option value="my">မြန်မာဘာသာ</option><option value="myv">эрзянь</option><option value="mzn">مازِرونی</option><option value="na">Dorerin Naoero</option><option value="nah">Nāhuatl</option><option value="nan">閩南語 / Bân-lâm-gú</option><option value="nan-hant">閩南語（傳統漢字）</option><option value="nan-latn-pehoeji">Bân-lâm-gú (Pe̍h-ōe-jī)</option><option value="nan-latn-tailo">Bân-lâm-gú (Tâi-lô)</option><option value="nap">Napulitano</option><option value="nb">norsk bokmål</option><option value="nds">Plattdüütsch</option><option value="nds-nl">Nedersaksies</option><option value="ne">नेपाली</option><option value="new">नेपाल भाषा</option><option value="nia">Li Niha</option><option value="nit">కొలామి</option><option value="niu">Niuē</option><option value="nl">Nederlands</option><option value="nl-informal">Nederlands (informeel)</option><option value="nmz">nawdm</option><option value="nn">norsk nynorsk</option><option value="nod">ᨣᩤᩴᨾᩮᩬᩥᨦ</option><option value="nog">ногайша</option><option value="nov">Novial</option><option value="nqo">ߒߞߏ</option><option value="nr">isiNdebele seSewula</option><option value="nrm">Nouormand</option><option value="nso">Sesotho sa Leboa</option><option value="nup">Nupe</option><option value="nv">Diné bizaad</option><option value="ny">Chi-Chewa</option><option value="nyn">runyankore</option><option value="nyo">Orunyoro</option><option value="nys">Nyunga</option><option value="oc">occitan</option><option value="ojb">Ojibwemowin</option><option value="olo">livvinkarjala</option><option value="om">Oromoo</option><option value="or">ଓଡ଼ିଆ</option><option value="os">ирон</option><option value="pa">ਪੰਜਾਬੀ</option><option value="pag">Pangasinan</option><option value="pam">Kapampangan</option><option value="pap">Papiamentu</option><option value="pcd">Picard</option><option value="pcm">Naijá</option><option value="pdc">Deitsch</option><option value="pdt">Plautdietsch</option><option value="pfl">Pälzisch</option><option value="pi">पालि</option><option value="pih">Norfuk / Pitkern</option><option value="pl">polski</option><option value="pms">Piemontèis</option><option value="pnb">پنجابی</option><option value="pnt">Ποντιακά</option><option value="prg">prūsiskan</option><option value="ps">پښتو</option><option value="pt">português</option><option value="pt-br">português do Brasil</option><option value="pwn">pinayuanan</option><option value="qqq">Message documentation</option><option value="qu">Runa Simi</option><option value="qug">Runa shimi</option><option value="rgn">Rumagnôl</option><option value="rif">Tarifit</option><option value="rki">ရခိုင်</option><option value="rm">rumantsch</option><option value="rmc">romaňi čhib</option><option value="rmy">romani čhib</option><option value="rn">ikirundi</option><option value="ro">română</option><option value="roa-tara">tarandíne</option><option value="rsk">руски</option><option value="ru">русский</option><option value="rue">русиньскый</option><option value="rup">armãneashti</option><option value="ruq">Vlăheşte</option><option value="ruq-cyrl">Влахесте</option><option value="ruq-latn">Vlăheşte</option><option value="rut">мыхаӀбишды</option><option value="rw">Ikinyarwanda</option><option value="ryu">うちなーぐち</option><option value="sa">संस्कृतम्</option><option value="sah">саха тыла</option><option value="sat">ᱥᱟᱱᱛᱟᱲᱤ</option><option value="sc">sardu</option><option value="scn">sicilianu</option><option value="sco">Scots</option><option value="sd">سنڌي</option><option value="sdc">Sassaresu</option><option value="sdh">کوردی خوارگ</option><option value="se">davvisámegiella</option><option value="se-fi">davvisámegiella (Suoma bealde)</option><option value="se-no">davvisámegiella (Norgga bealde)</option><option value="se-se">davvisámegiella (Ruoŧa bealde)</option><option value="sei">Cmique Itom</option><option value="ses">Koyraboro Senni</option><option value="sg">Sängö</option><option value="sgs">žemaitėška</option><option value="sh">srpskohrvatski / српскохрватски</option><option value="sh-cyrl">српскохрватски (ћирилица)</option><option value="sh-latn">srpskohrvatski (latinica)</option><option value="shi">Taclḥit</option><option value="shn">ၽႃႇသႃႇတႆး </option><option value="shy">tacawit</option><option value="shy-latn">tacawit</option><option value="si">සිංහල</option><option value="sjd">кӣллт са̄мь кӣлл</option><option value="sje">bidumsámegiella</option><option value="sk">slovenčina</option><option value="skr">سرائیکی</option><option value="skr-arab">سرائیکی</option><option value="sl">slovenščina</option><option value="sli">Schläsch</option><option value="sm">Gagana Samoa</option><option value="sma">åarjelsaemien</option><option value="smn">anarâškielâ</option><option value="sms">nuõrttsääʹmǩiõll</option><option value="sn">chiShona</option><option value="so">Soomaaliga</option><option value="sq">shqip</option><option value="sr">српски / srpski</option><option value="sr-ec">српски (ћирилица)</option><option value="sr-el">srpski (latinica)</option><option value="srn">Sranantongo</option><option value="sro">sardu campidanesu</option><option value="ss">SiSwati</option><option value="st">Sesotho</option><option value="stq">Seeltersk</option><option value="sty">себертатар</option><option value="su">Sunda</option><option value="sv">svenska</option><option value="sw">Kiswahili</option><option value="syl">ꠍꠤꠟꠐꠤ</option><option value="szl">ślůnski</option><option value="szy">Sakizaya</option><option value="ta">தமிழ்</option><option value="tay">Tayal</option><option value="tcy">ತುಳು</option><option value="tdd">ᥖᥭᥰ ᥖᥬᥲ ᥑᥨᥒᥰ</option><option value="te">తెలుగు</option><option value="tet">tetun</option><option value="tg">тоҷикӣ</option><option value="tg-cyrl">тоҷикӣ</option><option value="tg-latn">tojikī</option><option value="th">ไทย</option><option value="ti">ትግርኛ</option><option value="tig">ትግሬ</option><option value="tk">Türkmençe</option><option value="tl">Tagalog</option><option value="tly">tolışi</option><option value="tn">Setswana</option><option value="to">lea faka-Tonga</option><option value="tok">toki pona</option><option value="tpi">Tok Pisin</option><option value="tr">Türkçe</option><option value="tru">Ṫuroyo</option><option value="trv">Seediq</option><option value="ts">Xitsonga</option><option value="tt">татарча / tatarça</option><option value="tt-cyrl">татарча</option><option value="tt-latn">tatarça</option><option value="ttj">Orutooro</option><option value="tum">chiTumbuka</option><option value="tw">Twi</option><option value="ty">reo tahiti</option><option value="tyv">тыва дыл</option><option value="tzm">ⵜⴰⵎⴰⵣⵉⵖⵜ</option><option value="udm">удмурт</option><option value="ug">ئۇيغۇرچە / Uyghurche</option><option value="ug-arab">ئۇيغۇرچە</option><option value="ug-latn">Uyghurche</option><option value="uk">українська</option><option value="ur">اردو</option><option value="uz">oʻzbekcha / ўзбекча</option><option value="ve">Tshivenda</option><option value="vec">vèneto</option><option value="vep">vepsän kel’</option><option value="vi">Tiếng Việt</option><option value="vls">West-Vlams</option><option value="vmf">Mainfränkisch</option><option value="vmw">emakhuwa</option><option value="vo">Volapük</option><option value="vot">Vaďďa</option><option value="vro">võro</option><option value="wa">walon</option><option value="wal">wolaytta</option><option value="war">Winaray</option><option value="wls">Fakaʻuvea</option><option value="wo">Wolof</option><option value="wuu">吴语</option><option value="wuu-hans">吴语（简体）</option><option value="wuu-hant">吳語（正體）</option><option value="xal">хальмг</option><option value="xh">isiXhosa</option><option value="xmf">მარგალური</option><option value="xsy">saisiyat</option><option value="yi">ייִדיש</option><option value="yo">Yorùbá</option><option value="yrl">Nhẽẽgatú</option><option value="yue">粵語</option><option value="yue-hans">粵语（简体）</option><option value="yue-hant">粵語（繁體）</option><option value="za">Vahcuengh</option><option value="zea">Zeêuws</option><option value="zgh">ⵜⴰⵎⴰⵣⵉⵖⵜ ⵜⴰⵏⴰⵡⴰⵢⵜ</option><option value="zh">中文</option><option value="zh-cn">中文（中国大陆）</option><option value="zh-hans">中文（简体）</option><option value="zh-hant">中文（繁體）</option><option value="zh-hk">中文（香港）</option><option value="zh-mo">中文（澳門）</option><option value="zh-my">中文（马来西亚）</option><option value="zh-sg">中文（新加坡）</option><option value="zh-tw">中文（臺灣）</option><option value="zu">isiZulu</option></select><input id="languageselector-commit-1" style="" type="submit" value="set"></form></span></div>
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading">META-Farm</h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From Alliance Doc</div>
		<div id="contentSub"><div id="mw-content-subtitle"></div></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content"><div class="mw-pt-translate-header noprint" dir="ltr" lang="en">This page is a <span class="plainlinks"><a rel="nofollow" class="external text" href="https://docs.alliancecan.ca/mediawiki/index.php?title=Special:Translate&amp;group=page-META-Farm&amp;action=page&amp;filter=&amp;language=fr">translated version</a></span> of the page <a href="/wiki/META-Farm" title="META-Farm">META-Farm</a> and the translation is 100% complete.</div><div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr"><div class="mw-pt-languages noprint navigation-not-searchable" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="/wiki/META-Farm" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="META-Farm (100% translated)" lang="en" dir="ltr">English</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" lang="fr" dir="ltr">français</span></li></ul></div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Nouveauté"><span class="tocnumber">1</span> <span class="toctext">Nouveauté</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Description"><span class="tocnumber">2</span> <span class="toctext">Description</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#META_vs_GLOST"><span class="tocnumber">2.1</span> <span class="toctext">META vs GLOST</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Webinaire_META"><span class="tocnumber">2.2</span> <span class="toctext">Webinaire META</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#Démarrage_rapide"><span class="tocnumber">3</span> <span class="toctext">Démarrage rapide</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Liste_des_commandes"><span class="tocnumber">4</span> <span class="toctext">Liste des commandes</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Mode_SIMPLE_pour_un_petit_nombre_de_cas"><span class="tocnumber">5</span> <span class="toctext">Mode SIMPLE pour un petit nombre de cas</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#submit.run"><span class="tocnumber">5.1</span> <span class="toctext">submit.run</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#single_case.sh"><span class="tocnumber">5.2</span> <span class="toctext">single_case.sh</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#STATUS_et_traitement_des_erreurs"><span class="tocnumber">5.2.1</span> <span class="toctext">STATUS et traitement des erreurs</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-11"><a href="#job_script.sh"><span class="tocnumber">5.3</span> <span class="toctext">job_script.sh</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Fichiers_de_sortie"><span class="tocnumber">5.4</span> <span class="toctext">Fichiers de sortie</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Resoumettre_les_cas_qui_ont_échoué"><span class="tocnumber">5.5</span> <span class="toctext">Resoumettre les cas qui ont échoué</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#Mode_META_pour_un_grand_nombre_de_cas"><span class="tocnumber">6</span> <span class="toctext">Mode META pour un grand nombre de cas</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#Estimation_du_temps_d&#39;exécution_et_du_nombre_de_métatâches"><span class="tocnumber">6.1</span> <span class="toctext">Estimation du temps d'exécution et du nombre de métatâches</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#Quelques_précautions"><span class="tocnumber">7</span> <span class="toctext">Quelques précautions</span></a></li>
<li class="toclevel-1 tocsection-17"><a href="#Assistance_supplémentaire"><span class="tocnumber">8</span> <span class="toctext">Assistance supplémentaire</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#Terminologie"><span class="tocnumber">8.1</span> <span class="toctext">Terminologie</span></a></li>
</ul>
</li>
</ul>
</div>

<h1><span id="Nouveaut.C3.A9"></span><span class="mw-headline" id="Nouveauté">Nouveauté</span></h1>
<ul><li>La version 1.0.3 publiée en mars 2025 fonctionne sur la grappe Niagara (et sur Trillium qui remplacera Niagara). Ceci est rendu possible avec l'ajout du nouveau mode WHOLE_NODE (inactif par défaut, mais configurable dans config.h) et de quelques autres ajustements. Le mode WHOLE_NODE rassemble les cas séquentiels de calcul dans des tâches qui demandent des nœuds complets. Pour plus d'information, voir  <a href="/wiki/META-Farm:_Advanced_features_and_troubleshooting/fr" title="META-Farm: Advanced features and troubleshooting/fr">META-Farm&#160;: Fonctions avancées et dépannage</a>.</li></ul>
<h1><span class="mw-headline" id="Description">Description</span></h1>
<p>META (pour META-Farm) est une suite de scripts conçus par l’équipe SHARCNET pour automatiser l’exécution d’un  grand nombre de calculs connexes. En anglais, cette pratique est parfois nommée <i>farming</i>, <i>serial farming</i> ou <i>task farming</i>. META fonctionne sur tous les systèmes nationaux de l'Alliance et peut également être utilisée sur d'autres grappes qui possèdent la même configuration et qui font usage de <a rel="nofollow" class="external text" href="https://slurm.schedmd.com/documentation.html">l’ordonnanceur Slurm</a>.  
</p><p>Nous employons ici le terme <b>cas</b> (en anglais <i>case</i>) pour désigner un calcul distinct; il peut être l'exécution d'un programme en série, d'un programme parallèle ou d'un programme utilisant un GPU.<br />
Le terme <b>tâche</b> (en anglais <i>job</i>) est employé pour désigner une invocation à l’ordonnanceur de tâches; une tâche peut regrouper plusieurs cas.
</p><p>META possède les fonctionnalités suivantes&#160;:
</p>
<ul><li>deux modes de fonctionnement&#160;:
<ul><li>le mode SIMPLE avec un cas par tâche,</li>
<li>le mode META avec plusieurs cas par tâche.</li></ul></li>
<li>équilibrage dynamique de la charge de travail en mode META,</li>
<li>capture du statut de sortie pour tous les cas individuels,</li>
<li>resoumission automatique de tous les cas qui ont échoué ou n'ont jamais été exécutés,</li>
<li>exécution automatique d’une tâche de post-traitement une fois que tous les cas ont été traités avec succès.</li></ul>
<p>Quelques exigences techniques&#160;:
</p>
<ul><li>Pour chaque groupe de cas, chaque cas à traiter doit être décrit sur une ligne distincte dans un fichier table.dat.</li>
<li>Vous pouvez exécuter plusieurs groupes de cas indépendamment, mais chacun doit avoir son propre répertoire.</li></ul>
<p>En mode META, le nombre de tâches (ou <i>métatâches</i>) effectivement soumises est généralement bien inférieur au nombre de cas à traiter. Chaque métatâche peut traiter plusieurs lignes du fichier table.dat, donc plusieurs cas. Une collection de métatâches lira les lignes de table.dat séquentiellement en commençant par la première ligne et utilisera le mécanisme <a rel="nofollow" class="external text" href="https://linux.die.net/man/1/lockfile">lockfile</a> pour éviter une situation de concurrence. Ceci garantit un bon équilibre dynamique de la charge de travail entre les métatâches, car celles qui traitent des cas plus courts peuvent en traiter davantage.
</p><p>En mode META, toutes les métatâches n'ont pas besoin d'exécuter des cas. La première métatâche commencera à traiter les lignes de table.dat et si la deuxième tâche démarre, elle rejoint la première, et ainsi de suite. Si le temps d'exécution d'une métatâche individuelle est suffisamment long, tous les cas peuvent être traités avec une seule métatâche.
</p>
<h2><span class="mw-headline" id="META_vs_GLOST">META vs GLOST</span></h2>
<p>META possède des avantages importants par rapport à d'autres approches telles que <a href="/wiki/GLOST/fr" title="GLOST/fr">GLOST</a> où le traitement de chaque groupe de cas est effectué dans une seule grande tâche parallèle (MPI).
</p>
<ul><li>Comme l'ordonnanceur dispose de toute la souplesse pour démarrer les métatâches individuelles quand il le souhaite, le temps en file d'attente peut être beaucoup plus court avec META qu'avec GLOST. Par exemple, dans un contexte où 1 000 cœurs CPU doivent être utilisés pendant 3 jours
<ul><li>avec GLOST et MPI, le temps en file d'attente peut être de plusieurs semaines et il faudra donc des semaines avant d’obtenir votre tout premier résultat;</li>
<li>avec META, certaines métatâches démarrent et produisent les premiers résultats en quelques minutes.</li></ul></li>
<li>À la fin du traitement d'un groupe de cas,
<ul><li>avec GLOST, certains rangs MPI se termineront plus tôt et resteront inactifs jusqu'à la fin du tout dernier rang MPI, le plus lent;</li>
<li>avec META, il n'y a pas de telle perte à la fin du traitement; les métatâches individuelles sortent plus tôt si elles n'ont plus de charge de travail à traiter.</li></ul></li>
<li>GLOST et d'autres outils similaires ne prennent pas en charge la resoumission automatisée des cas qui ont échoué ou qui n'ont jamais été exécutés. META possède cette fonctionnalité qui de plus est très facile à utiliser.</li></ul>
<h2><span class="mw-headline" id="Webinaire_META">Webinaire META</span></h2>
<p>Voyez le <a rel="nofollow" class="external text" href="https://youtu.be/GcYbaPClwGE">webinaire enregistré le 6 octobre 2021</a>.
</p>
<h1><span id="D.C3.A9marrage_rapide"></span><span class="mw-headline" id="Démarrage_rapide">Démarrage rapide</span></h1>
<p>Si vous débutez avec META, suivez les étapes ci-dessous. Il est toutefois fortement recommandé de lire cette page au complet.
</p>
<ul><li>Connectez-vous à une grappe.</li>
<li>Chargez le module <code>meta-farm</code>.</li></ul>
<pre>$ module load meta-farm
</pre>
<ul><li>Choisissez un nom pour le répertoire du groupe de cas, par exemple <code>Farm_name</code> et créez-le avec</li></ul>
<pre>$ farm_init.run  Farm_name
</pre>
<ul><li>Cette commande créera également quelques fichiers importants dans le répertoire, dont certains devront être personnalisés.</li>
<li>Copiez vos fichiers exécutables et vos fichiers d'entrée dans le répertoire du groupe de cas. (Vous pouvez ignorer cette étape si vous prévoyez utiliser des chemins complets partout.)</li>
<li>Modifiez le fichier <code>table.dat</code> dans le répertoire. Il s'agit d'un fichier texte décrivant un cas (un calcul distinct) par ligne. Voyez des exemples dans les sections suivantes&#160;:
<ul><li><a class="mw-selflink-fragment" href="#single_case.sh">single_case.sh</a></li>
<li><a href="/wiki/META-Farm:_Advanced_features_and_troubleshooting/fr#Exemple_:_fichiers_d&#39;entrée_numérotés" title="META-Farm: Advanced features and troubleshooting/fr">Exemple&#160;: fichiers d'entrée numérotés </a> (avancé)</li>
<li><a href="/wiki/META-Farm:_Advanced_features_and_troubleshooting/fr#Exemple_:_fichier_d&#39;entrée_doit_avoir_le_même_nom" title="META-Farm: Advanced features and troubleshooting/fr">Exemple&#160;: fichier d'entrée doit avoir le même nom</a> (avancé)</li>
<li><a href="/wiki/META-Farm:_Advanced_features_and_troubleshooting/fr#Accéder_à_chaque_paramètre_d&#39;un_cas" title="META-Farm: Advanced features and troubleshooting/fr">Accéder à chaque paramètre d'un cas
</a> (avancé)</li></ul></li>
<li>Modifiez le script <code>single_case.sh</code> au besoin. Souvent, aucune modification n'est requise; voir les sections suivantes&#160;:
<ul><li><a class="mw-selflink-fragment" href="#single_case.sh">single_case.sh</a></li>
<li><a class="mw-selflink-fragment" href="#STATUS_et_traitement_des_erreurs">STATUS et traitement des erreurs</a></li>
<li><a href="/wiki/META-Farm:_Advanced_features_and_troubleshooting/fr#Exemple_:_fichier_d&#39;entrée_doit_avoir_le_même_nom" title="META-Farm: Advanced features and troubleshooting/fr">Exemple&#160;: fichier d'entrée doit avoir le même nom</a> (avancé)</li>
<li><a href="/wiki/META-Farm:_Advanced_features_and_troubleshooting/fr#Accéder_à_chaque_paramètre_d&#39;un_cas" title="META-Farm: Advanced features and troubleshooting/fr">Accéder à chaque paramètre d'un cas
</a> (avancé)</li></ul></li>
<li>Modifiez le fichier <code>job_script.sh</code> selon vos besoins, tel que décrit dans <a class="mw-selflink-fragment" href="#job_script.sh">job_script.sh, ci-dessous</a>. En particulier, utilisez un nom de compte de calcul valide et indiquez une durée d’exécution appropriée. Pour plus d'information sur le temps d’exécution, voir <a class="mw-selflink-fragment" href="#Estimation_du_temps_d&#39;exécution_et_du_nombre_de_métatâches">Estimation du temps d'exécution et du nombre de métatâches</a>.</li>
<li>Dans le répertoire des cas, lancez</li></ul>
<pre>$ submit.run -1
</pre>
<p>pour le mode SIMPLE (un cas par tâche) ou
</p>
<pre>$ submit.run N
</pre>
<p>pour le mode META, où N est le nombre de métatâches à utiliser. La valeur de N doit être de beaucoup inférieure au nombre total de cas.
</p><p>Pour faire exécuter un autre groupe de cas en même temps que le premier, lancez de nouveau <code>farm_init.run</code> avec un nom de groupe différent et personnalisez les fichiers <code>single_case.sh</code> et <code>job_script.sh</code> à l’intérieur du répertoire; créez ensuite un nouveau fichier table.dat au même endroit. Copiez l’exécutable et tous les fichiers d’entrée nécessaires. Vous pouvez maintenant lancer la commande <code>submit.run</code>dans le deuxième répertoire de cas pour soumettre le deuxième groupe de cas.
</p>
<h1><span class="mw-headline" id="Liste_des_commandes">Liste des commandes</span></h1>
<ul><li><b>farm_init.run</b>&#160;: initialise un groupe de cas; voir <a class="mw-selflink-fragment" href="#Démarrage_rapide">Démarrage rapide, ci-dessus</a>.</li>
<li><b>submit.run</b>&#160;: soumet le groupe de cas à l’ordonnanceur; voir <a class="mw-selflink-fragment" href="#submit.run">submit.run, ci-dessous</a>.</li>
<li><b>resubmit.run</b>&#160;: soumettre comme nouveau groupe de cas tous les traitements qui ont échoué ou qui n’ont jamais été exécutés; voir <a class="mw-selflink-fragment" href="#Resoumettre_les_cas_qui_ont_échoué">Resoumettre les cas qui ont échoué, ci-dessous</a>.</li>
<li><b>list.run</b>&#160;: liste toutes les tâches et leur état actuel.</li>
<li><b>query.run</b>&#160;: fournit un sommaire de l’état du groupe de cas avec le nombre de tâches dans la queue, en cours d’exécution et terminées. Cette commande est plus pratique que <code>list.run</code> quand il y a un grand nombre de tâches. La commande fournit aussi de l’information sur la progression générale et celle de l’exécution en cours, c’est-à-dire le nombre de cas traités par rapport au nombre total de cas.</li>
<li><b>kill.run</b>&#160;: interrompt toutes les tâches en cours et annule celles dans la file d’attente.</li>
<li><b>prune.run</b>&#160;: annule uniquement les tâches dans la file d’attente.</li>
<li><b>Status.run (le S au début est en majuscule)</b>&#160;: liste les états de tous les cas traités. L’option <code>-f</code>, fait afficher à la toute fin les lignes d’état non nulles, le cas échéant.</li>
<li><b>clean.run</b>&#160;: supprime tous les fichiers dans le répertoire du groupe de cas ainsi que les sous-répertoires s’il y a lieu, à l’exception des fichiers <code>job_script.sh, single_case.sh, final.sh, resubmit_script.sh, config.h</code> et <code>table.dat</code>. Tous les fichiers dans le répertoire <code>/home/$USER/tmp</code> qui sont associés au groupe de cas sont aussi supprimés. Utilisez ce script avec beaucoup de prudence.</li></ul>
<p>Toutes ces commandes (à l'exception de <code>farm_init.run</code> elle-même) doivent être exécutées dans un répertoire de groupe de cas créé par <code>farm_init.run</code>.
</p>
<h1><span class="mw-headline" id="Mode_SIMPLE_pour_un_petit_nombre_de_cas">Mode SIMPLE pour un petit nombre de cas</span></h1>
<p>Rappelons qu'une seule exécution de votre code est un <b>cas</b> et qu’une invocation de l'ordonnanceur est une <b>tâche</b>. Si:
</p>
<ul><li>le nombre total de cas est assez bas, disons moins de 500 et que</li>
<li>chaque cas prend au moins 20 minutes,</li></ul>
<p>il est raisonnable de dédier une tâche distincte à chacun des cas en utilisant le mode SIMPLE. Sinon, vous devriez utiliser le mode META pour gérer de nombreux cas par tâche; voir <a class="mw-selflink-fragment" href="#Mode_META_pour_un_grand_nombre_de_cas">Mode META pour un grand nombre de cas, ci-dessous</a>.
</p><p>Les trois scripts essentiels sont la commande  <code>submit.run</code> et deux scripts personnalisables <code>single_case.sh</code> et <code>job_script.sh</code>.
</p>
<h2><span class="mw-headline" id="submit.run">submit.run</span></h2>
<p><i><b>Remarque&#160;:</b> La présente section est valide pour les deux modes.</i><br />
Un argument de cette commande doit être spécifié, soit <i>N</i> qui représente le nombre de tâches à soumettre.
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="w">   </span>$<span class="w"> </span>submit.run<span class="w"> </span>N<span class="w"> </span><span class="o">[</span>-auto<span class="o">]</span><span class="w"> </span><span class="o">[</span>optional_sbatch_arguments<span class="o">]</span>
</pre></div>
<p>Avec <i>N</i>=-1, vous demandez le mode SIMPLE (pour soumettre autant de tâches qu'il y a de lignes dans le fichier table.dat). Si <i>N</i> est un entier positif, vous demandez le mode META (pour soumettre une tâche avec plusieurs cas), <i>N</i> étant le nombre de métatâches demandées. Toute autre valeur de <i>N</i> est une erreur.
</p><p>Si l’option <code>-auto</code> est présente, la soumission se refera automatiquement à la fin, plus d'une fois si nécessaire, jusqu'à ce que tous les cas dans table.dat aient été traités. Cette fonction est décrite dans Exécution automatique de resubmit.run. <a href="/wiki/META-Farm:_Advanced_features_and_troubleshooting/fr#Resoumettre_automatiquement_les_cas_qui_ont_échoué" title="META-Farm: Advanced features and troubleshooting/fr">Resoumettre automatiquement les cas qui ont échoué</a>.
</p><p>Si un fichier nommé <code>final.sh</code> est présent dans le répertoire du groupe de cas, <code>submit.run</code> le traitera comme un script de tâche pour le post-traitement et il sera lancé automatiquement une fois que tous les cas de table.dat auront été traités avec succès; voir <a href="/wiki/META-Farm:_Advanced_features_and_troubleshooting/fr#Exécuter_automatiquement_une_tâche_de_post-traitement" title="META-Farm: Advanced features and troubleshooting/fr">Exécuter automatiquement une tâche de post-traitement</a>.
</p><p>Si vous fournissez d'autres arguments, ils seront transmis à la commande <code>sbatch</code> de l’ordonnanceur pour le lancement de toutes les métatâches pour ce groupe de cas.
</p>
<h2><span class="mw-headline" id="single_case.sh">single_case.sh</span></h2>
<p><i><b>Remarque&#160;:</b> La présente section est valide pour les deux modes.</i><br />
</p><p>Le script <code>single_case.sh</code> lit une ligne du fichier <code>table.dat</code>, l’analyse, puis utilise le contenu de la ligne pour lancer votre code pour un des cas. Vous pouvez adapter <code>single_case.sh</code> à vos besoins. 
</p><p>La version de <code>single_case.sh</code> fournie par <code>farm_init.run</code> traite chaque ligne de <code>table.dat</code> comme étant une commande littérale et l’exécute dans son propre répertoire <code>RUNyyy</code> où <i>yyy</i> représente le numéro du cas. Voici la partie pertinente de <code>single_case.sh</code>&#160;:
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>...
<span class="c1"># ++++++++++++++++++++++  Modifiez le code selon vos besoins.  ++++++++++++++++++++++++</span>
<span class="c1">#  Dans cet exemple,</span>
<span class="c1">#  $ID est l&#39;identifiant du cas dans la table d&#39;origine (peut fournir une source unique pour le code, etc.),</span>
<span class="c1">#  $COMM est la ligne qui correspond à l&#39;$ID du cas dans la table d&#39;origine, sans le champ ID,</span>
<span class="c1">#  $METAJOB_ID est l&#39;identifiant de la tâche pour la métatâche en cours (utile pour créer des fichiers par tâche).</span>

mkdir<span class="w"> </span>-p<span class="w"> </span>RUN<span class="nv">$ID</span>
<span class="nb">cd</span><span class="w"> </span>RUN<span class="nv">$ID</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Case </span><span class="nv">$ID</span><span class="s2">:&quot;</span>

<span class="c1"># Exécute la commande (une ligne dans table.dat).</span>
<span class="c1"># Peut utiliser plus qu&#39;une commande pour l&#39;interpréteur (séparées par le deux-points) sur une même ligne.</span>
<span class="nb">eval</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$COMM</span><span class="s2">&quot;</span>

<span class="c1"># État à la sortie du code</span>
<span class="nv">STATUS</span><span class="o">=</span><span class="nv">$?</span>

<span class="nb">cd</span><span class="w"> </span>..
<span class="c1"># +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span>
...
</pre></div>
<p><br />
Par conséquent, si <code>single_case.sh</code> n’est pas modifié, chaque ligne de <code>table.dat</code> doit contenir une commande complète; il peut s'agir d'une commande composée, c'est-à-dire plusieurs commandes séparées par des points-virgules (;).
</p><p>En règle générale, le fichier <code>table.dat</code> contiendra une liste de commandes identiques différenciées uniquement par leurs arguments, mais ce n'est pas obligatoire. Tout énoncé exécutable peut se trouver dans <code>table.dat</code> qui pourrait ressembler à ceci
</p>
<pre> /home/user/bin/code1  1.0  10  2.1
 cp -f ~/input_dir/input1 .; ~/code_dir/code 
 ./code2 &lt; IC.2
</pre>
<p>Si vous voulez exécuter la même commande pour chacun des cas et ne voulez pas avoir à la répéter à chacune des lignes de <code>table.dat</code>, vous pouvez modifier <code>single_case.sh</code> pour inclure la commande commune, puis modifier <code>table.dat</code> pour qu’il contienne uniquement les arguments ou/et des redirections pour chaque cas.
</p><p>Dans l’exemple suivant, <code>single_case.sh</code> a été modifié. La commande <code>/path/to/your/code</code> est ajoutée, le contenu de <code>table.dat</code> sert d’arguments à la commande et l’argument <code>$ID</code>  est ajouté pour le numéro de cas.
</p>
<ul><li>single_case.sh</li></ul>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>...
<span class="c1"># ++++++++++++++++++++++  Modifiez le code selon vos besoins.  ++++++++++++++++++++++++</span>
<span class="c1"># Dans cet exemple, $ID (numéro du cas) est utilisé comme source pour le traitement selon la méthode Monte-Carlo.</span>
/path/to/your/code<span class="w"> </span>-par<span class="w"> </span><span class="nv">$COMM</span><span class="w">  </span>-seed<span class="w"> </span><span class="nv">$ID</span>
<span class="nv">STATUS</span><span class="o">=</span><span class="nv">$?</span>
<span class="c1"># +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span>
...
</pre></div>
<ul><li>table.dat</li></ul>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="m">12</span>.56
<span class="w"> </span><span class="m">21</span>.35
<span class="w"> </span>...
</pre></div>
<p><b>Remarque</b> 1&#160;: Si votre code n’a pas besoin de lire d’arguments dans le fichier <code>table.dat</code>, il faut quand même générer ce fichier avec le nombre de lignes égal au nombre de cas à traiter. Tout ce qui importe dans le contenu de <code>table.dat</code> est le nombre total de lignes. Dans notre exemple, la commande simplifiée serait alors
</p>
<pre>/path/to/your/code -seed $ID
</pre>
<p><b>Remarque 2&#160;:</b> Il n’est pas nécessaire d’inclure les numéros de ligne au début de chaque ligne de <code>table.dat</code>. Si le script <code>submit.run</code> ne les trouve pas, il modifiera <code>table.dat</code> pour y ajouter les numéros de lignes. 
</p>
<h3><span class="mw-headline" id="STATUS_et_traitement_des_erreurs">STATUS et traitement des erreurs</span></h3>
<p>À quoi sert <code>STATUS</code> dans <code>single_case.sh</code>? La valeur de cette variable devrait être de 0 si votre cas a été traité correctement, autrement sa valeur sera positive (plus grande que 0). Ceci est très important, car <code>resubmit.run</code> l’utilise pour identifier les cas qui ont échoué et qui doivent être traités de nouveau. Dans la version de <code>single_case.sh</code> que nous fournissons, <code>STATUS</code> est le code de sortie de votre programme. Ceci ne résout pas tous les problèmes parce que certains programmes produisent un code de sortie de 0 même si tout ne s’est pas bien déroulé. Vous pouvez changer la définition de <code>STATUS</code> en modifiant <code>single_case.sh</code>.  
</p><p>Par exemple, si votre code doit créer le fichier <code>out.dat</code> à la fin de chaque cas, effectuez un test pour savoir si le fichier existe et changez la valeur de <code>STATUS</code> en conséquence. Dans l’exemple suivant, la valeur de <code>$STATUS</code> sera positive si le code de sortie du programme est positif ou si <code>out.dat</code> n’existe pas ou est vide.
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="w">  </span><span class="nv">STATUS</span><span class="o">=</span><span class="nv">$?</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>!<span class="w"> </span>-s<span class="w"> </span>out.dat
<span class="w">     </span><span class="k">then</span>
<span class="w">     </span><span class="nv">STATUS</span><span class="o">=</span><span class="m">1</span>
<span class="w">     </span><span class="k">fi</span>
</pre></div>
<h2><span class="mw-headline" id="job_script.sh">job_script.sh</span></h2>
<p><i><b>Remarque&#160;:</b> La présente section est valide pour les deux modes.</i><br />
Ce fichier est le script qui sera soumis à l’ordonnanceur pour toutes les métatâches du groupe de cas.  La version crée par défaut par <code>farm_init.run</code> est
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1"># Indiquez les arguments sbatch pour toutes les tâches du groupe de cas.</span>
<span class="c1"># Doit contenir l&#39;option pour la durée d&#39;exécution (soit -t ou --time).</span>
<span class="c1">#SBATCH -t 0-00:10</span>
<span class="c1">#SBATCH --mem=4G</span>
<span class="c1">#SBATCH -A Nom_de_votre_compte</span>

<span class="c1"># Ne modifiez pas la ligne suivante.</span>
task.run
</pre></div>
<p>Vous devez configurer le nom du compte (option -<code>-A</code>) et la durée d’exécution (option <code>-t</code>) de la métatâche. En mode SIMPLE, indiquez une durée d’exécution un peu plus longue que celle prévue pour le cas individuel qui est de plus longue durée.
</p><p><b>Important&#160;:</b> Le script <code>job_script.sh</code> doit contenir une option pour la durée d’exécution, soit <code>-t</code> ou <code>--time</code>. Ceci ne peut pas être passé à <code>sbatch</code> comme argument optionnel pour <code>submit.run</code>.
</p><p>Le problème suivant peut se produire&#160;: Une métatâche peut avoir été allouée à un nœud défectueux, ce qui fait immédiatement échouer le programme. Par exemple, votre programme pourrait nécessiter un GPU, mais celui qui vous est assigné fonctionne mal ou encore le système de fichiers <code>/project</code> n’est pas disponible. Tout problème avec un nœud devrait être signalé à l’équipe de soutien technique. Si ceci se produit, une seule métatâche incorrecte peut rapidement parcourir <code>table.dat</code> et faire échouer tout le groupe de cas. Pour prévenir ce problème, ajoutez des tests à <code>job_script.sh</code> avant la ligne <code>task.run</code>. Par exemple, la modification suivante teste la présence d’un GPU NVidia et force la fin d’une métatâche avant que des cas échouent
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>nvidia-smi<span class="w"> </span>&gt;/dev/null
<span class="nv">retVal</span><span class="o">=</span><span class="nv">$?</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$retVal</span><span class="w"> </span>-ne<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<span class="k">fi</span>
task.run
</pre></div>
<p>L’utilitaire <code>gpu_test</code> fait un travail équivalent. Sur Graham, Cedar ou Béluga, copiez-le dans votre répertoire <code>~/bin</code>.
</p>
<pre>cp ~syam/bin/gpu_test ~/bin
</pre>
<p>Un mécanisme intégré à META tente de détecter de tels problèmes pour interrompre une métatâche qui passerait trop rapidement sur les cas. Les paramètres <code>N_failed_max</code> et <code>dt_failed</code> sont définis dans le fichier <code>config.h</code>. Le mécanisme de protection se déclenche quand les <code>$N_failed_max</code> premiers cas sont d’une durée inférieure à <code>$dt_failed</code> secondes. Les valeurs par défaut sont 5 et 5; ainsi, la métatâche s’arrête par défaut si les 5 premiers cas sont terminés en moins de 5 secondes. Si le mécanisme se déclenche parce que certains de vos cas ont une durée d’exécution inférieure à <code>$dt_failed</code>, diminuez la valeur de <code>dt_failed</code> dans <code>config.h</code>.
</p>
<h2><span class="mw-headline" id="Fichiers_de_sortie">Fichiers de sortie</span></h2>
<p><i><b>Remarque&#160;:</b> La présente section est valide pour les deux modes.</i>
</p><p>Une fois qu'une ou plusieurs métatâches sont en cours d'exécution, les fichiers suivants sont créés dans le répertoire du groupe de cas&#160;:
</p>
<ul><li><code>OUTPUT/slurm-$JOBID.out</code>, un fichier par métatâche contenant la sortie standard,</li>
<li><code>STATUSES/status.$JOBID</code>, un fichier par métatâche contenant l'état de chaque cas traité.</li></ul>
<p>Dans les deux cas, <code>$JOBID</code> est l’identifiant de la tâche pour la métatâche correspondante.
</p><p>Le répertoire <code>MISC</code> est également créé dans le répertoire racine du groupe de cas.
</p><p>De plus, chaque fois que <code>submit.run</code> est exécuté, un sous-répertoire unique est créé dans <code>/home/$USER/tmp</code>. Dans ce sous-répertoire, certains petits fichiers de travail seront créés, tels que les fichiers utilisés par <code>lockfile</code> pour protéger certaines opérations critiques à l'intérieur des tâches. Les noms de ces sous-répertoires contiennent
<code>$NODE.$PID</code> où <code>$NODE</code>  est le nom du nœud actuel qui est généralement un nœud de connexion et
<code>$PID</code>, l’identifiant unique du processus pour le script.
Ce sous-répertoire peut être supprimé une fois que le traitement complet du groupe de cas est terminé. Si vous lancez <code>clean.run</code>, le sous-répertoire sera automatiquement supprimé, mais prenez garde parce que cette commande supprime aussi tous les résultats obtenus.
</p>
<h2><span id="Resoumettre_les_cas_qui_ont_.C3.A9chou.C3.A9"></span><span class="mw-headline" id="Resoumettre_les_cas_qui_ont_échoué">Resoumettre les cas qui ont échoué</span></h2>
<p><i><b>Remarque&#160;:</b> La présente section est valide pour les deux modes.</i><br /><br />
La commande <code>resubmit.run</code> utilise les mêmes arguments que <code>submit.run</code>.
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="w">   </span>$<span class="w">  </span>resubmit.run<span class="w"> </span>N<span class="w"> </span><span class="o">[</span>-auto<span class="o">]</span><span class="w"> </span><span class="o">[</span>optional_sbatch_arguments<span class="o">]</span>
</pre></div>
<p>La commande <code>resubmit.run</code> 
</p>
<ul><li>analyse tous les fichiers  status.* (voir <a class="mw-selflink-fragment" href="#Fichiers_de_sortie">Fichiers de sortie, ci-dessus</a>);</li>
<li>détermine les cas qui ont échoué et ceux qui n'ont jamais été exécutés pour une raison quelconque, par exemple, à cause de la limite de temps d'exécution des métatâches;</li>
<li>crée ou recrée un fichier secondaire <code>table.dat_</code> qui répertorie uniquement les cas qui doivent encore être exécutés;</li>
<li>lance un nouveau groupe de cas pour ces cas.</li></ul>
<p>Vous ne pouvez pas exécuter <code>resubmit.run</code> tant que toutes les tâches de l'exécution d'origine ne sont pas terminées ou annulées 
</p><p>Si certains cas échouent ou ne s'exécutent toujours pas, vous pouvez soumettre le groupe de cas à nouveau, autant de fois que nécessaire. Bien sûr, si certains cas échouent à plusieurs reprises, il doit y avoir un problème avec le programme que vous exécutez ou avec son entrée. Dans ce cas, vous pouvez utiliser la commande <code>Status.run</code> (le S est en majuscule) qui affiche l’état de tous les cas traités. Avec l'option <code>-f</code>, <code>Status.run</code> triera le résultat en fonction de l’état de la sortie en affichant les cas avec un état différent de zéro dans le bas pour mieux les repérer.
</p><p>De la même manière que pour <code>submit.run</code>, si l’option <code>-auto</code> est présente, le groupe de cas sera automatiquement soumis de nouveau à la fin, plus d'une fois si nécessaire (voir <a href="/wiki/META-Farm:_Advanced_features_and_troubleshooting/fr#Resoumettre_automatiquement_les_cas_qui_ont_échoué" title="META-Farm: Advanced features and troubleshooting/fr">Resoumettre automatiquement les cas qui ont échoué </a>).
</p>
<h1><span class="mw-headline" id="Mode_META_pour_un_grand_nombre_de_cas">Mode META pour un grand nombre de cas</span></h1>
<p>Le mode SIMPLE (un cas par tâche) fonctionne bien lorsque le nombre de cas est assez petit (&lt;500). Lorsque le nombre de cas est largement supérieur à 500, les problèmes suivants peuvent survenir&#160;:
</p>
<ul><li>Chaque grappe a une limite quant au nombre de tâches que vous pouvez avoir en même temps; pour Graham par exemple, la limite est de 1000.</li>
<li>Avec un très grand nombre de cas, chaque traitement de cas est généralement court. Si un cas s'exécute pendant &lt;20 min, les cycles CPU peuvent être gaspillés par de l’ordonnancement non nécessaire.</li></ul>
<p>Le mode META est la solution à ces problèmes. Au lieu de soumettre une tâche distincte pour chaque cas, un plus petit nombre de métatâches sont soumises, chacune traitant plusieurs cas. Pour activer le mode META, le premier argument de <code>submit.run</code> doit être le nombre souhaité de métatâches, qui doit être un nombre assez petit, soit beaucoup plus petit que le nombre de cas à traiter, par exemple
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="w">   </span>$<span class="w">  </span>submit.run<span class="w">  </span><span class="m">32</span>
</pre></div>
<p>Étant donné que chaque cas peut prendre un temps de traitement différent, le mode META utilise un schéma d'équilibrage dynamique de la charge de travail. Voici comment le mode META est implémenté&#160;:
</p><p><span typeof="mw:File"><a href="/wiki/File:Meta1.png" class="mw-file-description"><img src="/mediawiki/images/thumb/b/b8/Meta1.png/500px-Meta1.png" decoding="async" width="500" height="413" class="mw-file-element" srcset="/mediawiki/images/thumb/b/b8/Meta1.png/750px-Meta1.png 1.5x, /mediawiki/images/b/b8/Meta1.png 2x" /></a></span>
</p><p>Chaque tâche exécute le même script <code>task.run</code>. À l'intérieur de ce script, il y a une boucle <code>while</code> pour les cas. Chaque itération de la boucle doit passer par une zone critique (c'est-à-dire qu'une seule tâche à la fois peut effectuer certaines opérations), où elle obtient le cas suivant à traiter dans <code>table.dat</code>. Ensuite, le script <code>single_case.sh</code> (voir <a class="mw-selflink-fragment" href="#single_case.sh">single_case.sh</a>) est exécuté une fois pour ce nouveau cas, ce qui appelle ensuite votre code.
</p><p>Cette approche crée un équilibrage dynamique de la charge de travail réalisé par toutes les métatâches actives d’un même groupe de cas. L'algorithme est illustré par le schéma ci-dessous&#160;:
</p><p><span typeof="mw:File"><a href="/wiki/File:DWB_META.png" class="mw-file-description"><img src="/mediawiki/images/thumb/7/78/DWB_META.png/800px-DWB_META.png" decoding="async" width="800" height="374" class="mw-file-element" srcset="/mediawiki/images/thumb/7/78/DWB_META.png/1200px-DWB_META.png 1.5x, /mediawiki/images/thumb/7/78/DWB_META.png/1600px-DWB_META.png 2x" /></a></span>
</p><p><a rel="nofollow" class="external text" href="https://www.youtube.com/watch?v=GcYbaPClwGE&amp;t=423s">Cette animation tirée du webinaire META</a> en illustre le fonctionnement.
</p><p>L'équilibrage dynamique de la charge de travail a pour résultat que toutes les métatâches se terminent à peu près au même moment, quelle que soit la différence des durées d'exécution pour les cas individuels, quelle que soit la vitesse des processeurs des différents nœuds et quel que soit le moment où chacune des métatâches démarre. De plus, toutes les métatâches n'ont pas besoin de commencer à s'exécuter pour que tous les cas soient traités. Enfin, si une métatâche est interrompue en plein calcul (par exemple si un nœud tombe en panne), c’est au plus un cas qui sera perdu. Ceci peut facilement être repris avec resubmit.run (voir <a class="mw-selflink-fragment" href="#Resoumettre_les_cas_qui_ont_échoué">Resoumettre les cas qui ont échoué</a>).
</p><p>En résumé, toutes les métatâches demandées ne s'exécuteront pas nécessairement; cela dépend de la disponibilité de la grappe. Mais comme décrit ci-dessus, vous obtiendrez éventuellement tous vos résultats en mode META, quel que soit le nombre de métatâches exécutées, même si vous devrez peut-être utiliser <code>resubmit.run</code> pour terminer un groupe de cas en particulier.
</p>
<h2><span id="Estimation_du_temps_d.27ex.C3.A9cution_et_du_nombre_de_m.C3.A9tat.C3.A2ches"></span><span class="mw-headline" id="Estimation_du_temps_d'exécution_et_du_nombre_de_métatâches">Estimation du temps d'exécution et du nombre de métatâches</span></h2>
<p>Comment peut-on déterminer le nombre optimal de métatâches et le temps d'exécution à utiliser dans <code>job_script.sh</code>? 
</p><p>Vous devez d'abord déterminer le temps d'exécution moyen pour un cas individuel (une seule ligne dans <code>table.dat</code>). Pour ce faire, en supposant que votre programme ne soit pas parallèle, allouez un seul cœur CPU avec <a href="/wiki/Running_jobs/fr#Tâches_interactives" title="Running jobs/fr"><code>salloc</code></a>, puis exécutez <code>single_case.sh</code> pour quelques cas différents. Mesurez la durée d'exécution totale et divisez-la par le nombre de cas que vous avez exécutés pour obtenir une estimation de la durée d'exécution moyenne des cas. Cela peut être fait avec une boucle <code>for</code>.
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="w">   </span>$<span class="w">  </span><span class="nv">N</span><span class="o">=</span><span class="m">10</span><span class="p">;</span><span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">1</span><span class="p">;</span><span class="w"> </span>i&lt;<span class="o">=</span><span class="nv">$N</span><span class="p">;</span><span class="w"> </span>i++<span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w">  </span>./single_case.sh<span class="w"> </span>table.dat<span class="w"> </span><span class="nv">$i</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="k">done</span>
</pre></div>
<p>Divisez le temps réel obtenu par <code>$N</code>  pour obtenir une estimation du temps moyen d’exécution que nous appellerons ici <i>dt_case</i>.
</p><p>Estimez le temps CPU total nécessaire pour traiter le tout en multipliant <i>dt_case</i> par le nombre de cas, c'est-à-dire le nombre de lignes dans <code>table.dat</code>. Si c'est en secondes CPU, diviser cela par 3600 vous donne le nombre total d'heures CPU. Multipliez cela par quelque chose comme 1,1 ou 1,3 pour avoir une certaine marge de sécurité.
</p><p>Vous pouvez maintenant faire un choix judicieux pour le temps d'exécution des métatâches et cela déterminera également le nombre de métatâches nécessaires pour traiter le groupe de cas en entier.
</p><p>La durée d'exécution que vous choisissez doit être nettement supérieure à la durée d'exécution moyenne d'un cas individuel, idéalement par un facteur de 100 ou plus. Il doit certainement être supérieur à la durée d'exécution la plus longue que vous prévoyez pour un cas individuel. En revanche, il ne doit pas être trop grand, soit pas plus de 3 jours. Plus la durée d'exécution d'une tâche est longue, plus elle restera longtemps en file d’attente. Sur les grappes à usage général de l’Alliance, un bon choix serait 12 ou 24 heures en raison des <a href="/wiki/Job_scheduling_policies/fr#Durée_maximale" title="Job scheduling policies/fr">politiques d’ordonnancement des tâches</a>. Une fois le temps d'exécution choisi, divisez le nombre total d'heures CPU par le temps d'exécution que vous avez choisi (en heures) pour obtenir le nombre requis de métatâches. Arrondissez ce nombre à l'entier supérieur.
</p><p>Avec ces choix, le temps dans la file d'attente devrait être acceptable, et le débit et l'efficacité devraient être assez élevés.
</p><p>Prenons un exemple précis. Supposons que vous exécutez la boucle <code>for</code> ci-dessus sur un processeur dédié obtenu avec <code>salloc</code> et que le résultat indique que le temps réel était de 15m50s, soit 950 secondes. Divisez cela par le nombre de cas servant d’échantillons soit 10, pour trouver que le temps moyen pour un cas individuel est de 95 secondes. Supposons également que le nombre total de cas que vous devez traiter (le nombre de lignes dans <code>table.dat</code>) est de 1000. Le temps CPU total nécessaire pour calculer tous vos cas est alors de<br />
95 x 1 000 = 95000 secondes CPU, soit 26,4 heures CPU.<br /> 
Par mesure de sécurité, multipliez cela par un facteur de 1,2 pour obtenir 31,7 heures CPU. Une durée d'exécution de 3 heures pour vos métatâches fonctionnerait ici et devrait conduire à une période acceptable dans la file d'attente. Modifiez la valeur de <code>#SBATCH -t</code> dans code&gt;job_script.sh pour qu'elle soit <code>3:00:00</code>. Estimez maintenant le nombre de métatâches dont vous aurez besoin pour traiter tous les cas.<br />
N = 31,7 heures de base / 3 heures = 10,6<br />
ce qui, arrondi au nombre entier suivant, est 11. Ensuite, vous pouvez lancer le groupe de cas en exécutant une fois <code>submit.run 11</code>.
</p><p>Si le nombre de métatâches dans l'analyse est supérieur à 1000, vous disposez d'un groupe de cas de taille particulièrement grande. Le nombre maximum de tâches pouvant être soumis sur Graham et Béluga étant de 1000, vous ne pourrez donc pas exécuter tout le groupe de cas avec une seule soumission. La solution de contournement consiste à utiliser la séquence de commandes suivante. N'oubliez pas que chaque commande ne peut être exécutée qu'après la fin de l'exécution du groupe précédent.
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="w">   </span>$<span class="w">  </span>submit.run<span class="w"> </span><span class="m">1000</span>
<span class="w">   </span>$<span class="w">  </span>resubmit.run<span class="w"> </span><span class="m">1000</span>
<span class="w">   </span>$<span class="w">  </span>resubmit.run<span class="w"> </span><span class="m">1000</span>
<span class="w">   </span>...
</pre></div>
<p>Si cela semble plutôt fastidieux, envisagez plutôt d'utiliser la fonctionnalité avancée pour <a href="/wiki/META-Farm:_Advanced_features_and_troubleshooting/fr#Resoumettre_automatiquement_les_cas_qui_ont_échoué" title="META-Farm: Advanced features and troubleshooting/fr">resoumettre automatiquement les cas qui ont échoué</a>.
</p>
<h1><span id="Quelques_pr.C3.A9cautions"></span><span class="mw-headline" id="Quelques_précautions">Quelques précautions</span></h1>
<p>Commencez toujours par un petit test pour vous assurer que tout fonctionne avant de soumettre un grand groupe de cas. Vous pouvez tester des cas individuels en réservant un nœud interactif avec <code>salloc</code>, en passant au répertoire du groupe de cas et en exécutant des commandes telles que <code>./single_case.sh table.dat 1</code>, <code>./single_case.sh table.dat 2</code>, etc.
</p><p>Si vous avez plus de 10,000 cas, vous devez déployer des efforts supplémentaires pour vous assurer que tout fonctionne aussi efficacement que possible. En particulier, minimisez le nombre de fichiers et/ou de répertoires créés lors de l'exécution. Si possible, faites que votre code poursuive ses écritures à la suite des fichiers existants (un par métatâche; <b>ne mélangez pas les résultats de différentes métatâches dans un seul fichier de sortie</b>) plutôt que de créer un fichier séparé pour chaque cas. Évitez de créer un sous-répertoire distinct pour chaque cas. Oui, la création de sous-répertoires séparés pour chaque cas est la configuration par défaut de META, mais ce comportement par défaut a été choisi pour la sécurité et non pour l'efficacité.
</p><p>L'exemple suivant est optimisé pour un très grand nombre de cas. Il suppose, pour l'exemple&#160;:
</p>
<ul><li>que votre code accepte le nom du fichier de sortie via une option en ligne de commande <code>-o</code>,</li>
<li>que l'application ouvre le fichier de sortie en mode ajout (<i>append</i>), c'est-à-dire que plusieurs exécutions continueront à s'ajouter au fichier existant,</li>
<li>que chaque ligne de <code>table.dat</code> fournit le reste des arguments en ligne de commande pour votre code,</li>
<li>que plusieurs instances de votre code peuvent s'exécuter simultanément en toute sécurité dans le même répertoire et qu’il n'est donc pas nécessaire de créer un sous-répertoire pour chaque cas,</li>
<li>que chaque exécution ne produira aucun fichier en plus du fichier de sortie.</li></ul>
<p>Avec cette configuration, même les très grands groupes de cas (des centaines de milliers, voire des millions) devraient être efficacement exécutés, car relativement peu de fichiers seront créés.
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>...
<span class="c1"># ++++++++++++++++++++++  Modifiez le code selon vos besoins.  ++++++++++++++++++++++++</span>
<span class="c1">#  Here:</span>
<span class="c1">#  $ID est l&#39;identifiant du cas dans la table d&#39;origine (peut fournir une source unique pour le code, etc.),</span>
<span class="c1">#  $COMM est la ligne qui correspond à l&#39;$ID du cas dans la table d&#39;origine, sans le champ ID,</span>
<span class="c1">#  $METAJOB_ID est l&#39;identifiant de la tâche pour la métatâche en cours (utile pour créer des fichiers par tâche).</span>

<span class="c1"># Exécute la commande (une ligne dans table.dat).</span>
/path/to/your/code<span class="w">  </span><span class="nv">$COMM</span><span class="w">  </span>-o<span class="w"> </span>output.<span class="nv">$METAJOB_ID</span>

<span class="c1"># État à la sortie du code.</span>
<span class="nv">STATUS</span><span class="o">=</span><span class="nv">$?</span>
<span class="c1"># +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span>
...
</pre></div>
<h1><span id="Assistance_suppl.C3.A9mentaire"></span><span class="mw-headline" id="Assistance_supplémentaire">Assistance supplémentaire</span></h1>
<p>Pour des détails sur certaines fonctionnalités et des suggestions de dépannage, voyez la version française de la page <a href="/wiki/META-Farm:_Advanced_features_and_troubleshooting/fr" title="META-Farm: Advanced features and troubleshooting/fr">META-Farm&#160;: Fonctions avancées et dépannage</a>.
</p><p>Si vous avez besoin de plus d’assistance, contactez le <a href="/wiki/Technical_support/fr" title="Technical support/fr">soutien technique</a> et mentionnez le nom de l’outil META et celui de son développeur, Sergey Mashchenko.
</p>
<h2><span class="mw-headline" id="Terminologie">Terminologie</span></h2>
<ul><li><b>cas</b> (en anglais <i>case</i>)&#160;: Un calcul distinct. Le fichier <code>table.dat</code> contient un cas par ligne.</li>
<li><b>groupe de cas</b> (en anglais <i>farm</i>) &#160;: Répertoire et fichiers utilisés par une instance de META-Farm. En anglais, le <i>farming</i> est la pratique d’exécuter sur une grappe plusieurs tâches distinctes qui effectuent des calculs de même nature.</li>
<li><b>métatâche</b> (en anglais <i>metajob</i>)&#160;: Tâche pouvant traiter séparément plusieurs cas en provenance de <code>table.dat</code>.</li>
<li><b>mode META</b>&#160;: Mode d’opération où chaque tâche peut traiter plusieurs cas en provenance de <code>table.dat</code>.</li>
<li><b>mode SIMPLE</b>&#160;:  Mode d’opération où chaque tâche peut traiter un seul cas en provenance de <code>table.dat</code>.</li></ul>
<!-- 
NewPP limit report
Cached time: 20250530235228
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc]
CPU time usage: 0.073 seconds
Real time usage: 1.277 seconds
Preprocessor visited node count: 147/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/100
Expensive parser function count: 12/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 9090/5000000 bytes
ExtLoops count: 0/100
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key ccwiki:pcache:idhash:18335-0!canonical and timestamp 20250530235228 and revision id 174697. Rendering was triggered because: page-view
 -->
</div>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://docs.alliancecan.ca/mediawiki/index.php?title=META-Farm/fr&amp;oldid=174697">https://docs.alliancecan.ca/mediawiki/index.php?title=META-Farm/fr&amp;oldid=174697</a>"</div></div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/mediawiki/index.php?title=Category:Pages_using_deprecated_source_tags&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages using deprecated source tags (page does not exist)">Pages using deprecated source tags</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		
<nav id="p-personal" class="mw-portlet mw-portlet-personal vector-user-menu-legacy vector-menu" aria-labelledby="p-personal-label"  >
	<h3
		id="p-personal-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Personal tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="pt-uls" class="mw-list-item active"><a class="uls-trigger" href="#"><span>English</span></a></li><li id="pt-login" class="mw-list-item"><a href="/mediawiki/index.php?title=Special:UserLogin&amp;returnto=META-Farm%2Ffr" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span>Log in</span></a></li>
		</ul>
		
	</div>
</nav>

		<div id="left-navigation">
			
<nav id="p-namespaces" class="mw-portlet mw-portlet-namespaces vector-menu-tabs vector-menu-tabs-legacy vector-menu" aria-labelledby="p-namespaces-label"  >
	<h3
		id="p-namespaces-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Namespaces</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-nstab-main" class="selected mw-list-item"><a href="/wiki/META-Farm/fr" title="View the content page [c]" accesskey="c"><span>Page</span></a></li><li id="ca-talk" class="new mw-list-item"><a href="/mediawiki/index.php?title=Talk:META-Farm/fr&amp;action=edit&amp;redlink=1" rel="discussion" class="new" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
		</ul>
		
	</div>
</nav>

			
<nav id="p-variants" class="mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown vector-menu" aria-labelledby="p-variants-label"  >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox"
		aria-labelledby="p-variants-label"
	>
	<label
		id="p-variants-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">français</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			
<nav id="p-views" class="mw-portlet mw-portlet-views vector-menu-tabs vector-menu-tabs-legacy vector-menu" aria-labelledby="p-views-label"  >
	<h3
		id="p-views-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Views</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-view" class="selected mw-list-item"><a href="/wiki/META-Farm/fr"><span>Read</span></a></li><li id="ca-viewsource" class="mw-list-item"><a href="/mediawiki/index.php?title=META-Farm/fr&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e"><span>View source</span></a></li><li id="ca-history" class="mw-list-item"><a href="/mediawiki/index.php?title=META-Farm/fr&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
		</ul>
		
	</div>
</nav>

			
<nav id="p-cactions" class="mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-menu" aria-labelledby="p-cactions-label"  title="More options" >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox"
		aria-labelledby="p-cactions-label"
	>
	<label
		id="p-cactions-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<h3 >Search</h3>
	<form action="/mediawiki/index.php" id="searchform" class="vector-search-box-form">
		<div id="simpleSearch"
			class="vector-search-box-inner"
			 data-search-loc="header-navigation">
			<input class="vector-search-box-input"
				 type="search" name="search" placeholder="Search Alliance Doc" aria-label="Search Alliance Doc" autocapitalize="sentences" title="Search Alliance Doc [f]" accesskey="f" id="searchInput"
			>
			<input type="hidden" name="title" value="Special:Search">
			<input id="mw-searchButton"
				 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search">
			<input id="searchButton"
				 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go">
		</div>
	</form>
</div>

		</div>
	</div>
	
<div id="mw-panel" class="vector-legacy-sidebar">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="/wiki/Technical_documentation"
			title="Visit the main page"></a>
	</div>
	
<nav id="p-navigation" class="mw-portlet mw-portlet-navigation vector-menu-portal portal vector-menu" aria-labelledby="p-navigation-label"  >
	<h3
		id="p-navigation-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Navigation</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-wiki-main-page" class="mw-list-item"><a href="/wiki/Technical_documentation"><span>Wiki Main Page</span></a></li>
		</ul>
		
	</div>
</nav>

	
<nav id="p-sidebar-support" class="mw-portlet mw-portlet-sidebar-support vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-support-label"  >
	<h3
		id="p-sidebar-support-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Support</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-getting-started" class="mw-list-item"><a href="/wiki/Getting_started"><span>Getting started</span></a></li><li id="n-sidebar-technical-support" class="mw-list-item"><a href="/wiki/Technical_support"><span>Getting help</span></a></li><li id="n-sidebar-running-jobs" class="mw-list-item"><a href="/wiki/Running_jobs"><span>Running jobs</span></a></li><li id="n-sidebar-known-issues" class="mw-list-item"><a href="/wiki/Known_issues"><span>Known issues</span></a></li><li id="n-sidebar-system-status" class="mw-list-item"><a href="http://status.computecanada.ca" rel="nofollow"><span>System status</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-sidebar-resources" class="mw-portlet mw-portlet-sidebar-resources vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-resources-label"  >
	<h3
		id="p-sidebar-resources-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Resources</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-Béluga" class="mw-list-item"><a href="/wiki/B%C3%A9luga/en"><span>Béluga</span></a></li><li id="n-Cedar" class="mw-list-item"><a href="/wiki/Cedar"><span>Cedar</span></a></li><li id="n-Graham" class="mw-list-item"><a href="/wiki/Graham"><span>Graham</span></a></li><li id="n-Narval" class="mw-list-item"><a href="/wiki/Narval/en"><span>Narval</span></a></li><li id="n-Niagara" class="mw-list-item"><a href="/wiki/Niagara"><span>Niagara</span></a></li><li id="n-sidebar-cloud" class="mw-list-item"><a href="/wiki/CC-Cloud"><span>Cloud</span></a></li><li id="n-tamIA" class="mw-list-item"><a href="/wiki/TamIA/en"><span>tamIA</span></a></li><li id="n-Killarney" class="mw-list-item"><a href="/wiki/Killarney"><span>Killarney</span></a></li><li id="n-sidebar-quantum-computing" class="mw-list-item"><a href="/wiki/Services_d%27informatique_quantique/en"><span>Quantum computing</span></a></li><li id="n-sidebar-available-software" class="mw-list-item"><a href="/wiki/Available_software"><span>Available software</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-sidebar-alliance" class="mw-portlet mw-portlet-sidebar-alliance vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-alliance-label"  >
	<h3
		id="p-sidebar-alliance-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">The Alliance</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-alliance-main-page" class="mw-list-item"><a href="https://alliancecan.ca/en" rel="nofollow"><span>Alliance main page</span></a></li><li id="n-sidebar-ccdb" class="mw-list-item"><a href="https://ccdb.computecanada.ca/security/login" rel="nofollow"><span>CCDB</span></a></li><li id="n-sidebar-getting-an-account" class="mw-list-item"><a href="https://alliancecan.ca/en/services/advanced-research-computing/account-management/apply-account" rel="nofollow"><span>Getting An Account</span></a></li><li id="n-sidebar-acknowledging-alliance" class="mw-list-item"><a href="https://alliancecan.ca/en/services/advanced-research-computing/research-portal/acknowledging-alliance" rel="nofollow"><span>Acknowledging the Alliance</span></a></li><li id="n-sidebar-aup" class="mw-list-item"><a href="https://alliancecan.ca/en/services/advanced-research-computing/account-management/policies" rel="nofollow"><span>Acceptable Use Policy</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-sidebar-authoring" class="mw-portlet mw-portlet-sidebar-authoring vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-authoring-label"  >
	<h3
		id="p-sidebar-authoring-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Authoring</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-guidelines" class="mw-list-item"><a href="/wiki/Authoring_guidelines"><span>Guidelines</span></a></li><li id="n-sidebar-mediawiki-help" class="mw-list-item"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents"><span>MediaWiki Help</span></a></li><li id="n-recentchanges" class="mw-list-item"><a href="/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-tb" class="mw-portlet mw-portlet-tb vector-menu-portal portal vector-menu" aria-labelledby="p-tb-label"  >
	<h3
		id="p-tb-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="t-whatlinkshere" class="mw-list-item"><a href="/wiki/Special:WhatLinksHere/META-Farm/fr" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="/wiki/Special:RecentChangesLinked/META-Farm/fr" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="/mediawiki/index.php?title=META-Farm/fr&amp;oldid=174697" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="/mediawiki/index.php?title=META-Farm/fr&amp;action=info" title="More information about this page"><span>Page information</span></a></li>
		</ul>
		
	</div>
</nav>

	
</div>

</div>

<footer id="footer" class="mw-footer" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 26 March 2025, at 19:51.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="/wiki/CCWiki:Privacy_policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="/wiki/CCWiki:About">About Alliance Doc</a></li>
	<li id="footer-places-disclaimers"><a href="/wiki/CCWiki:General_disclaimer">Disclaimers</a></li>
	<li id="footer-places-mobileview"><a href="https://docs.alliancecan.ca/mediawiki/index.php?title=META-Farm/fr&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/mediawiki/resources/assets/poweredby_mediawiki.svg" alt="Powered by MediaWiki" width="88" height="31" loading="lazy"></a></li>
</ul>

</footer>

<script>(RLQ=window.RLQ||[]).push(function(){mw.log.warn("This page is using the deprecated ResourceLoader module \"codex-search-styles\".\n[1.43] Use a CodexModule with codexComponents to set your specific components used: https://www.mediawiki.org/wiki/Codex#Using_a_limited_subset_of_components");});</script>
<script src="https://www.googletagmanager.com/gtag/js?id=G-TVBPRD78K4" async=""></script><script>
window.dataLayer = window.dataLayer || [];

function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-TVBPRD78K4', {});
</script>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":1393,"wgPageParseReport":{"limitreport":{"cputime":"0.073","walltime":"1.277","ppvisitednodes":{"value":147,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":100},"expensivefunctioncount":{"value":12,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":9090,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"loops":{"limitreport-count-limited":{"value":0,"limit":100}},"cachereport":{"timestamp":"20250530235228","ttl":86400,"transientcontent":false}}});});</script>
</body>
</html>