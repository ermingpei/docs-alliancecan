<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Terraform - Alliance Doc</title>
<script>(function(){var className="client-js";var cookie=document.cookie.match(/(?:^|; )ccwikimwclientpreferences=([^;]+)/);if(cookie){cookie[1].split('%2C').forEach(function(pref){className=className.replace(new RegExp('(^| )'+pref.replace(/-clientpref-\w+$|[^\w-]+/g,'')+'-clientpref-\\w+( |$)'),'$1'+pref+'$2');});}document.documentElement.className=className;}());RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":[",\t."," \t,"],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],"wgRequestId":"aDpESe3hIy4PhCb@BtLJSwAAAsU","wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Terraform/fr","wgTitle":"Terraform/fr","wgCurRevisionId":172834,"wgRevisionId":172834,"wgArticleId":12033,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[
"Pages using deprecated source tags","Cloud"],"wgPageViewLanguage":"fr","wgPageContentLanguage":"fr","wgPageContentModel":"wikitext","wgRelevantPageName":"Terraform/fr","wgRelevantArticleId":12033,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgULSAcceptLanguageList":[],"wgMFDisplayWikibaseDescriptions":{"search":false,"watchlist":false,"tagline":false},"wgCiteReferencePreviewsActive":true,"wgTranslatePageTranslation":"translation","wgULSPosition":"personal","wgULSisCompactLinksEnabled":true,"wgVector2022LanguageInHeader":false,"wgULSisLanguageSelectorEmpty":false};RLSTATE={"site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.translate.tag.languages":"ready","ext.pygments":"ready","skins.vector.styles.legacy":"ready","ext.translate":"ready","codex-search-styles":"ready","ext.uls.pt":"ready"};RLPAGEMODULES=["ext.pygments.view","mediawiki.page.media","site","mediawiki.page.ready",
"mediawiki.toc","skins.vector.legacy.js","ext.languageSelector","ext.translate.pagetranslation.uls","ext.uls.compactlinks","ext.uls.geoclient","ext.uls.interface","ext.moderation.notify","ext.moderation.notify.desktop"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.impl(function(){return["user.options@12s5i",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
}];});});</script>
<link rel="stylesheet" href="/mediawiki/load.php?lang=en&amp;modules=codex-search-styles%7Cext.pygments%2Ctranslate%7Cext.translate.tag.languages%7Cext.uls.pt%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector">
<script async="" src="/mediawiki/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content="">
<link rel="stylesheet" href="/mediawiki/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=1120">
<link rel="icon" href="/mediawiki/resources/assets/Alliance_favicon.png">
<link rel="search" type="application/opensearchdescription+xml" href="/mediawiki/rest.php/v1/search" title="Alliance Doc (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://docs.alliancecan.ca/mediawiki/api.php?action=rsd">
<link rel="alternate" type="application/atom+xml" title="Alliance Doc Atom feed" href="/mediawiki/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector-legacy mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Terraform_fr rootpage-Terraform_fr skin-vector action-view"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"></div>
	<div class="mw-indicators">
	<div id="mw-indicator-languageselector" class="mw-indicator"><span id="languageselector-box-1" class="languageselector " style=""><form name="languageselector-form-1" id="languageselector-form-1" method="get" action="/mediawiki/index.php" style="display:inline;"><input type="hidden" value="Terraform/fr" name="title"><select name="setlang" id="languageselector-select-1" style=""><option value="aae">Arbërisht</option><option value="ab">аԥсшәа</option><option value="abs">bahasa ambon</option><option value="ace">Acèh</option><option value="acf">Kwéyòl Sent Lisi</option><option value="acm">عراقي</option><option value="ady">адыгабзэ</option><option value="ady-cyrl">адыгабзэ</option><option value="aeb">تونسي / Tûnsî</option><option value="aeb-arab">تونسي</option><option value="aeb-latn">Tûnsî</option><option value="af">Afrikaans</option><option value="aln">Gegë</option><option value="alt">алтай тил</option><option value="am">አማርኛ</option><option value="ami">Pangcah</option><option value="an">aragonés</option><option value="ang">Ænglisc</option><option value="ann">Obolo</option><option value="anp">अंगिका</option><option value="apc">شامي</option><option value="ar">العربية</option><option value="arc">ܐܪܡܝܐ</option><option value="arn">mapudungun</option><option value="arq">جازايرية</option><option value="ary">الدارجة</option><option value="arz">مصرى</option><option value="as">অসমীয়া</option><option value="ase">American sign language</option><option value="ast">asturianu</option><option value="atj">Atikamekw</option><option value="av">авар</option><option value="avk">Kotava</option><option value="awa">अवधी</option><option value="ay">Aymar aru</option><option value="az">azərbaycanca</option><option value="azb">تۆرکجه</option><option value="ba">башҡортса</option><option value="ban">Basa Bali</option><option value="ban-bali">ᬩᬲᬩᬮᬶ</option><option value="bar">Boarisch</option><option value="bbc">Batak Toba</option><option value="bbc-latn">Batak Toba</option><option value="bcc">جهلسری بلوچی</option><option value="bci">wawle</option><option value="bcl">Bikol Central</option><option value="bdr">Bajau Sama</option><option value="be">беларуская</option><option value="be-tarask">беларуская (тарашкевіца)</option><option value="bew">Betawi</option><option value="bg">български</option><option value="bgc">हरियाणवी</option><option value="bgn">روچ کپتین بلوچی</option><option value="bh">भोजपुरी</option><option value="bho">भोजपुरी</option><option value="bi">Bislama</option><option value="bjn">Banjar</option><option value="blk">ပအိုဝ်ႏဘာႏသာႏ</option><option value="bm">bamanankan</option><option value="bn">বাংলা</option><option value="bo">བོད་ཡིག</option><option value="bpy">বিষ্ণুপ্রিয়া মণিপুরী</option><option value="bqi">بختیاری</option><option value="br">brezhoneg</option><option value="brh">Bráhuí</option><option value="bs">bosanski</option><option value="btm">Batak Mandailing</option><option value="bto">Iriga Bicolano</option><option value="bug">Basa Ugi</option><option value="bxr">буряад</option><option value="ca">català</option><option value="cbk-zam">Chavacano de Zamboanga</option><option value="ccp">𑄌𑄋𑄴𑄟𑄳𑄦</option><option value="cdo">閩東語 / Mìng-dĕ̤ng-ngṳ̄</option><option value="ce">нохчийн</option><option value="ceb">Cebuano</option><option value="ch">Chamoru</option><option value="chn">chinuk wawa</option><option value="chr">ᏣᎳᎩ</option><option value="chy">Tsetsêhestâhese</option><option value="ckb">کوردی</option><option value="co">corsu</option><option value="cps">Capiceño</option><option value="cpx">莆仙語 / Pó-sing-gṳ̂</option><option value="cpx-hans">莆仙语（简体）</option><option value="cpx-hant">莆仙語（繁體）</option><option value="cr">Nēhiyawēwin / ᓀᐦᐃᔭᐍᐏᐣ</option><option value="crh">qırımtatarca</option><option value="crh-cyrl">къырымтатарджа (Кирилл)</option><option value="crh-latn">qırımtatarca (Latin)</option><option value="crh-ro">tatarşa</option><option value="cs">čeština</option><option value="csb">kaszëbsczi</option><option value="cu">словѣньскъ / ⰔⰎⰑⰂⰡⰐⰠⰔⰍⰟ</option><option value="cv">чӑвашла</option><option value="cy">Cymraeg</option><option value="da">dansk</option><option value="dag">dagbanli</option><option value="de">Deutsch</option><option value="de-at">Österreichisches Deutsch</option><option value="de-ch">Schweizer Hochdeutsch</option><option value="de-formal">Deutsch (Sie-Form)</option><option value="dga">Dagaare</option><option value="din">Thuɔŋjäŋ</option><option value="diq">Zazaki</option><option value="dsb">dolnoserbski</option><option value="dtp">Kadazandusun</option><option value="dty">डोटेली</option><option value="dua">Duálá</option><option value="dv">ދިވެހިބަސް</option><option value="dz">ཇོང་ཁ</option><option value="ee">eʋegbe</option><option value="efi">Efịk</option><option value="egl">emiliàn e rumagnòl</option><option value="el">Ελληνικά</option><option value="eml">emiliàn e rumagnòl</option><option value="en" selected="">English</option><option value="en-ca">Canadian English</option><option value="en-gb">British English</option><option value="eo">Esperanto</option><option value="es">español</option><option value="es-formal">español (formal)</option><option value="et">eesti</option><option value="eu">euskara</option><option value="ext">estremeñu</option><option value="fa">فارسی</option><option value="fat">mfantse</option><option value="ff">Fulfulde</option><option value="fi">suomi</option><option value="fit">meänkieli</option><option value="fj">Na Vosa Vakaviti</option><option value="fo">føroyskt</option><option value="fon">fɔ̀ngbè</option><option value="fr">français</option><option value="frc">français cadien</option><option value="frp">arpetan</option><option value="frr">Nordfriisk</option><option value="fur">furlan</option><option value="fy">Frysk</option><option value="ga">Gaeilge</option><option value="gaa">Ga</option><option value="gag">Gagauz</option><option value="gan">贛語</option><option value="gan-hans">赣语（简体）</option><option value="gan-hant">贛語（繁體）</option><option value="gcf">kréyòl Gwadloup</option><option value="gcr">kriyòl gwiyannen</option><option value="gd">Gàidhlig</option><option value="gl">galego</option><option value="gld">на̄ни</option><option value="glk">گیلکی</option><option value="gn">Avañe'ẽ</option><option value="gom">गोंयची कोंकणी / Gõychi Konknni</option><option value="gom-deva">गोंयची कोंकणी</option><option value="gom-latn">Gõychi Konknni</option><option value="gor">Bahasa Hulontalo</option><option value="got">𐌲𐌿𐍄𐌹𐍃𐌺</option><option value="gpe">Ghanaian Pidgin</option><option value="grc">Ἀρχαία ἑλληνικὴ</option><option value="gsw">Alemannisch</option><option value="gu">ગુજરાતી</option><option value="guc">wayuunaiki</option><option value="gur">farefare</option><option value="guw">gungbe</option><option value="gv">Gaelg</option><option value="ha">Hausa</option><option value="hak">客家語 / Hak-kâ-ngî</option><option value="haw">Hawaiʻi</option><option value="he">עברית</option><option value="hi">हिन्दी</option><option value="hif">Fiji Hindi</option><option value="hif-latn">Fiji Hindi</option><option value="hil">Ilonggo</option><option value="hno">ہندکو</option><option value="hr">hrvatski</option><option value="hrx">Hunsrik</option><option value="hsb">hornjoserbsce</option><option value="hsn">湘語</option><option value="ht">Kreyòl ayisyen</option><option value="hu">magyar</option><option value="hu-formal">magyar (formal)</option><option value="hy">հայերեն</option><option value="hyw">Արեւմտահայերէն</option><option value="ia">interlingua</option><option value="iba">Jaku Iban</option><option value="ibb">ibibio</option><option value="id">Bahasa Indonesia</option><option value="ie">Interlingue</option><option value="ig">Igbo</option><option value="igl">Igala</option><option value="ii">ꆇꉙ</option><option value="ik">Iñupiatun</option><option value="ike-cans">ᐃᓄᒃᑎᑐᑦ</option><option value="ike-latn">inuktitut</option><option value="ilo">Ilokano</option><option value="inh">гӀалгӀай</option><option value="io">Ido</option><option value="is">íslenska</option><option value="isv-cyrl">меджусловјанскы</option><option value="isv-latn">medžuslovjansky</option><option value="it">italiano</option><option value="iu">ᐃᓄᒃᑎᑐᑦ / inuktitut</option><option value="ja">日本語</option><option value="jam">Patois</option><option value="jbo">la .lojban.</option><option value="jut">jysk</option><option value="jv">Jawa</option><option value="ka">ქართული</option><option value="kaa">Qaraqalpaqsha</option><option value="kab">Taqbaylit</option><option value="kai">Karai-karai</option><option value="kbd">адыгэбзэ</option><option value="kbd-cyrl">адыгэбзэ</option><option value="kbp">Kabɩyɛ</option><option value="kcg">Tyap</option><option value="kea">kabuverdianu</option><option value="kg">Kongo</option><option value="kge">Kumoring</option><option value="khw">کھوار</option><option value="ki">Gĩkũyũ</option><option value="kiu">Kırmancki</option><option value="kjh">хакас</option><option value="kjp">ဖၠုံလိက်</option><option value="kk">қазақша</option><option value="kk-arab">قازاقشا (تٴوتە)</option><option value="kk-cn">قازاقشا (جۇنگو)</option><option value="kk-cyrl">қазақша (кирил)</option><option value="kk-kz">қазақша (Қазақстан)</option><option value="kk-latn">qazaqşa (latın)</option><option value="kk-tr">qazaqşa (Türkïya)</option><option value="kl">kalaallisut</option><option value="km">ភាសាខ្មែរ</option><option value="kn">ಕನ್ನಡ</option><option value="knc">Yerwa Kanuri</option><option value="ko">한국어</option><option value="ko-kp">조선말</option><option value="koi">перем коми</option><option value="kr">kanuri</option><option value="krc">къарачай-малкъар</option><option value="kri">Krio</option><option value="krj">Kinaray-a</option><option value="krl">karjal</option><option value="ks">कॉशुर / کٲشُر</option><option value="ks-arab">کٲشُر</option><option value="ks-deva">कॉशुर</option><option value="ksh">Ripoarisch</option><option value="ksw">စှီၤ</option><option value="ku">kurdî</option><option value="ku-arab">کوردی (عەرەبی)</option><option value="ku-latn">kurdî (latînî)</option><option value="kum">къумукъ</option><option value="kus">Kʋsaal</option><option value="kv">коми</option><option value="kw">kernowek</option><option value="ky">кыргызча</option><option value="la">Latina</option><option value="lad">Ladino</option><option value="lb">Lëtzebuergesch</option><option value="lbe">лакку</option><option value="lez">лезги</option><option value="lfn">Lingua Franca Nova</option><option value="lg">Luganda</option><option value="li">Limburgs</option><option value="lij">Ligure</option><option value="liv">Līvõ kēļ</option><option value="lki">لەکی</option><option value="lld">Ladin</option><option value="lmo">lombard</option><option value="ln">lingála</option><option value="lo">ລາວ</option><option value="loz">Silozi</option><option value="lrc">لۊری شومالی</option><option value="lt">lietuvių</option><option value="ltg">latgaļu</option><option value="lua">ciluba</option><option value="lus">Mizo ţawng</option><option value="luz">لئری دوٙمینی</option><option value="lv">latviešu</option><option value="lzh">文言</option><option value="lzz">Lazuri</option><option value="mad">Madhurâ</option><option value="mag">मगही</option><option value="mai">मैथिली</option><option value="map-bms">Basa Banyumasan</option><option value="mdf">мокшень</option><option value="mg">Malagasy</option><option value="mhr">олык марий</option><option value="mi">Māori</option><option value="min">Minangkabau</option><option value="mk">македонски</option><option value="ml">മലയാളം</option><option value="mn">монгол</option><option value="mnc">manju gisun</option><option value="mnc-latn">manju gisun</option><option value="mnc-mong">ᠮᠠᠨᠵᡠ ᡤᡳᠰᡠᠨ</option><option value="mni">ꯃꯤꯇꯩ ꯂꯣꯟ</option><option value="mnw">ဘာသာမန်</option><option value="mo">молдовеняскэ</option><option value="mos">moore</option><option value="mr">मराठी</option><option value="mrh">Mara</option><option value="mrj">кырык мары</option><option value="ms">Bahasa Melayu</option><option value="ms-arab">بهاس ملايو</option><option value="mt">Malti</option><option value="mui">Baso Palembang</option><option value="mwl">Mirandés</option><option value="my">မြန်မာဘာသာ</option><option value="myv">эрзянь</option><option value="mzn">مازِرونی</option><option value="na">Dorerin Naoero</option><option value="nah">Nāhuatl</option><option value="nan">閩南語 / Bân-lâm-gú</option><option value="nan-hant">閩南語（傳統漢字）</option><option value="nan-latn-pehoeji">Bân-lâm-gú (Pe̍h-ōe-jī)</option><option value="nan-latn-tailo">Bân-lâm-gú (Tâi-lô)</option><option value="nap">Napulitano</option><option value="nb">norsk bokmål</option><option value="nds">Plattdüütsch</option><option value="nds-nl">Nedersaksies</option><option value="ne">नेपाली</option><option value="new">नेपाल भाषा</option><option value="nia">Li Niha</option><option value="nit">కొలామి</option><option value="niu">Niuē</option><option value="nl">Nederlands</option><option value="nl-informal">Nederlands (informeel)</option><option value="nmz">nawdm</option><option value="nn">norsk nynorsk</option><option value="nod">ᨣᩤᩴᨾᩮᩬᩥᨦ</option><option value="nog">ногайша</option><option value="nov">Novial</option><option value="nqo">ߒߞߏ</option><option value="nr">isiNdebele seSewula</option><option value="nrm">Nouormand</option><option value="nso">Sesotho sa Leboa</option><option value="nup">Nupe</option><option value="nv">Diné bizaad</option><option value="ny">Chi-Chewa</option><option value="nyn">runyankore</option><option value="nyo">Orunyoro</option><option value="nys">Nyunga</option><option value="oc">occitan</option><option value="ojb">Ojibwemowin</option><option value="olo">livvinkarjala</option><option value="om">Oromoo</option><option value="or">ଓଡ଼ିଆ</option><option value="os">ирон</option><option value="pa">ਪੰਜਾਬੀ</option><option value="pag">Pangasinan</option><option value="pam">Kapampangan</option><option value="pap">Papiamentu</option><option value="pcd">Picard</option><option value="pcm">Naijá</option><option value="pdc">Deitsch</option><option value="pdt">Plautdietsch</option><option value="pfl">Pälzisch</option><option value="pi">पालि</option><option value="pih">Norfuk / Pitkern</option><option value="pl">polski</option><option value="pms">Piemontèis</option><option value="pnb">پنجابی</option><option value="pnt">Ποντιακά</option><option value="prg">prūsiskan</option><option value="ps">پښتو</option><option value="pt">português</option><option value="pt-br">português do Brasil</option><option value="pwn">pinayuanan</option><option value="qqq">Message documentation</option><option value="qu">Runa Simi</option><option value="qug">Runa shimi</option><option value="rgn">Rumagnôl</option><option value="rif">Tarifit</option><option value="rki">ရခိုင်</option><option value="rm">rumantsch</option><option value="rmc">romaňi čhib</option><option value="rmy">romani čhib</option><option value="rn">ikirundi</option><option value="ro">română</option><option value="roa-tara">tarandíne</option><option value="rsk">руски</option><option value="ru">русский</option><option value="rue">русиньскый</option><option value="rup">armãneashti</option><option value="ruq">Vlăheşte</option><option value="ruq-cyrl">Влахесте</option><option value="ruq-latn">Vlăheşte</option><option value="rut">мыхаӀбишды</option><option value="rw">Ikinyarwanda</option><option value="ryu">うちなーぐち</option><option value="sa">संस्कृतम्</option><option value="sah">саха тыла</option><option value="sat">ᱥᱟᱱᱛᱟᱲᱤ</option><option value="sc">sardu</option><option value="scn">sicilianu</option><option value="sco">Scots</option><option value="sd">سنڌي</option><option value="sdc">Sassaresu</option><option value="sdh">کوردی خوارگ</option><option value="se">davvisámegiella</option><option value="se-fi">davvisámegiella (Suoma bealde)</option><option value="se-no">davvisámegiella (Norgga bealde)</option><option value="se-se">davvisámegiella (Ruoŧa bealde)</option><option value="sei">Cmique Itom</option><option value="ses">Koyraboro Senni</option><option value="sg">Sängö</option><option value="sgs">žemaitėška</option><option value="sh">srpskohrvatski / српскохрватски</option><option value="sh-cyrl">српскохрватски (ћирилица)</option><option value="sh-latn">srpskohrvatski (latinica)</option><option value="shi">Taclḥit</option><option value="shn">ၽႃႇသႃႇတႆး </option><option value="shy">tacawit</option><option value="shy-latn">tacawit</option><option value="si">සිංහල</option><option value="sjd">кӣллт са̄мь кӣлл</option><option value="sje">bidumsámegiella</option><option value="sk">slovenčina</option><option value="skr">سرائیکی</option><option value="skr-arab">سرائیکی</option><option value="sl">slovenščina</option><option value="sli">Schläsch</option><option value="sm">Gagana Samoa</option><option value="sma">åarjelsaemien</option><option value="smn">anarâškielâ</option><option value="sms">nuõrttsääʹmǩiõll</option><option value="sn">chiShona</option><option value="so">Soomaaliga</option><option value="sq">shqip</option><option value="sr">српски / srpski</option><option value="sr-ec">српски (ћирилица)</option><option value="sr-el">srpski (latinica)</option><option value="srn">Sranantongo</option><option value="sro">sardu campidanesu</option><option value="ss">SiSwati</option><option value="st">Sesotho</option><option value="stq">Seeltersk</option><option value="sty">себертатар</option><option value="su">Sunda</option><option value="sv">svenska</option><option value="sw">Kiswahili</option><option value="syl">ꠍꠤꠟꠐꠤ</option><option value="szl">ślůnski</option><option value="szy">Sakizaya</option><option value="ta">தமிழ்</option><option value="tay">Tayal</option><option value="tcy">ತುಳು</option><option value="tdd">ᥖᥭᥰ ᥖᥬᥲ ᥑᥨᥒᥰ</option><option value="te">తెలుగు</option><option value="tet">tetun</option><option value="tg">тоҷикӣ</option><option value="tg-cyrl">тоҷикӣ</option><option value="tg-latn">tojikī</option><option value="th">ไทย</option><option value="ti">ትግርኛ</option><option value="tig">ትግሬ</option><option value="tk">Türkmençe</option><option value="tl">Tagalog</option><option value="tly">tolışi</option><option value="tn">Setswana</option><option value="to">lea faka-Tonga</option><option value="tok">toki pona</option><option value="tpi">Tok Pisin</option><option value="tr">Türkçe</option><option value="tru">Ṫuroyo</option><option value="trv">Seediq</option><option value="ts">Xitsonga</option><option value="tt">татарча / tatarça</option><option value="tt-cyrl">татарча</option><option value="tt-latn">tatarça</option><option value="ttj">Orutooro</option><option value="tum">chiTumbuka</option><option value="tw">Twi</option><option value="ty">reo tahiti</option><option value="tyv">тыва дыл</option><option value="tzm">ⵜⴰⵎⴰⵣⵉⵖⵜ</option><option value="udm">удмурт</option><option value="ug">ئۇيغۇرچە / Uyghurche</option><option value="ug-arab">ئۇيغۇرچە</option><option value="ug-latn">Uyghurche</option><option value="uk">українська</option><option value="ur">اردو</option><option value="uz">oʻzbekcha / ўзбекча</option><option value="ve">Tshivenda</option><option value="vec">vèneto</option><option value="vep">vepsän kel’</option><option value="vi">Tiếng Việt</option><option value="vls">West-Vlams</option><option value="vmf">Mainfränkisch</option><option value="vmw">emakhuwa</option><option value="vo">Volapük</option><option value="vot">Vaďďa</option><option value="vro">võro</option><option value="wa">walon</option><option value="wal">wolaytta</option><option value="war">Winaray</option><option value="wls">Fakaʻuvea</option><option value="wo">Wolof</option><option value="wuu">吴语</option><option value="wuu-hans">吴语（简体）</option><option value="wuu-hant">吳語（正體）</option><option value="xal">хальмг</option><option value="xh">isiXhosa</option><option value="xmf">მარგალური</option><option value="xsy">saisiyat</option><option value="yi">ייִדיש</option><option value="yo">Yorùbá</option><option value="yrl">Nhẽẽgatú</option><option value="yue">粵語</option><option value="yue-hans">粵语（简体）</option><option value="yue-hant">粵語（繁體）</option><option value="za">Vahcuengh</option><option value="zea">Zeêuws</option><option value="zgh">ⵜⴰⵎⴰⵣⵉⵖⵜ ⵜⴰⵏⴰⵡⴰⵢⵜ</option><option value="zh">中文</option><option value="zh-cn">中文（中国大陆）</option><option value="zh-hans">中文（简体）</option><option value="zh-hant">中文（繁體）</option><option value="zh-hk">中文（香港）</option><option value="zh-mo">中文（澳門）</option><option value="zh-my">中文（马来西亚）</option><option value="zh-sg">中文（新加坡）</option><option value="zh-tw">中文（臺灣）</option><option value="zu">isiZulu</option></select><input id="languageselector-commit-1" style="" type="submit" value="set"></form></span></div>
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading">Terraform</h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From Alliance Doc</div>
		<div id="contentSub"><div id="mw-content-subtitle"></div></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content"><div class="mw-pt-translate-header noprint" dir="ltr" lang="en">This page is a <span class="plainlinks"><a rel="nofollow" class="external text" href="https://docs.alliancecan.ca/mediawiki/index.php?title=Special:Translate&amp;group=page-Terraform&amp;action=page&amp;filter=&amp;language=fr">translated version</a></span> of the page <a href="/wiki/Terraform" title="Terraform">Terraform</a> and the translation is 100% complete.</div><div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr"><div class="mw-pt-languages noprint navigation-not-searchable" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="/wiki/Terraform" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="Terraform (100% translated)" lang="en" dir="ltr">English</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" lang="fr" dir="ltr">français</span></li></ul></div>
<p><a rel="nofollow" class="external text" href="https://www.terraform.io/">Terraform</a> est un outil qui permet de définir et d'approvisionner l'infrastructure de centres de données, y compris des machines virtuelles.  Terraform est de plus en plus utilisé au sein de l'Alliance.  Son modèle d'infrastructure-en-code permet de maintenir les ressources OpenStack comme une collection de définitions qui peuvent être facilement mises à jour à l'aide des éditeurs de texte, partagées entre les membres d'un groupe et stockées dans un système de contrôle de version.
</p><p>Cette page est écrite comme un tutoriel dans lequel nous présentons Terraform et démontrons son utilisation sur nos nuages OpenStack.  Nous configurons notre espace de travail local pour Terraform et créons une machine virtuelle (VM pour <i>virtual machine</i>) avec une IP flottante et un volume attaché.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Préparation"><span class="tocnumber">1</span> <span class="toctext">Préparation</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Accéder_à_OpenStack"><span class="tocnumber">1.1</span> <span class="toctext">Accéder à OpenStack</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Installer_Terraform"><span class="tocnumber">1.2</span> <span class="toctext">Installer Terraform</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#S&#39;identifier_pour_OpenStack"><span class="tocnumber">1.3</span> <span class="toctext">S'identifier pour OpenStack</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Session_OpenStack"><span class="tocnumber">1.4</span> <span class="toctext">Session OpenStack</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Espace_de_travail"><span class="tocnumber">1.5</span> <span class="toctext">Espace de travail</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Définir_le_fournisseur_OpenStack"><span class="tocnumber">2</span> <span class="toctext">Définir le fournisseur OpenStack</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Ce_que_vous_devriez_utiliser"><span class="tocnumber">2.1</span> <span class="toctext">Ce que vous devriez utiliser</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Initialiser_Terraform"><span class="tocnumber">2.2</span> <span class="toctext">Initialiser Terraform</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Définir_une_VM"><span class="tocnumber">3</span> <span class="toctext">Définir une VM</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Tester"><span class="tocnumber">3.1</span> <span class="toctext">Tester</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Que_se_passe-t-il_avec_les_ressources_OpenStack_déjà_existantes?"><span class="tocnumber">3.2</span> <span class="toctext">Que se passe-t-il avec les ressources OpenStack déjà existantes?</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Appliquer_la_configuration"><span class="tocnumber">3.3</span> <span class="toctext">Appliquer la configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#Ajouter_un_réseau"><span class="tocnumber">4</span> <span class="toctext">Ajouter un réseau</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#Récapitulation"><span class="tocnumber">4.1</span> <span class="toctext">Récapitulation</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#Ajouter_une_adresse_IP_flottante"><span class="tocnumber">5</span> <span class="toctext">Ajouter une adresse IP flottante</span></a></li>
<li class="toclevel-1 tocsection-17"><a href="#Ajouter_un_volume"><span class="tocnumber">6</span> <span class="toctext">Ajouter un volume</span></a></li>
<li class="toclevel-1 tocsection-18"><a href="#Exemple_complet"><span class="tocnumber">7</span> <span class="toctext">Exemple complet</span></a></li>
<li class="toclevel-1 tocsection-19"><a href="#Annexe"><span class="tocnumber">8</span> <span class="toctext">Annexe</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#Références"><span class="tocnumber">8.1</span> <span class="toctext">Références</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Exemples"><span class="tocnumber">8.2</span> <span class="toctext">Exemples</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#UUID_des_images_et_gabarits_sous_Horizon"><span class="tocnumber">8.3</span> <span class="toctext">UUID des images et gabarits sous Horizon</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span id="Pr.C3.A9paration"></span><span class="mw-headline" id="Préparation">Préparation</span></h2>
<p>Avant de commencer avec Terraform, vous avez besoin
</p>
<ul><li>d'un accès à un projet OpenStack avec des ressources disponibles,</li>
<li>d'installer le binaire <code>terraform</code>,</li>
<li>d'effectuer quelques configurations sur votre poste de travail ou ordinateur portable.</li></ul>
<h3><span id="Acc.C3.A9der_.C3.A0_OpenStack"></span><span class="mw-headline" id="Accéder_à_OpenStack">Accéder à OpenStack</span></h3>
<p>Pour accéder au nuage, voir <a href="/wiki/Cloud/fr#Obtenir_un_projet_dans_l&#39;environnement_infonuagique" title="Cloud/fr">Obtenir un projet dans l'environnement infonuagique</a>. Si vous n'avez jamais utilisé OpenStack auparavant, vous devriez d'abord vous familiariser avec ce système en créant une machine virtuelle, en attachant un volume, en associant une IP flottante et en vous assurant que vous pouvez vous connecter à la machine virtuelle par la suite.  Ce tutoriel suppose également que vous avez déjà créé une paire de clés SSH et que la clé publique a été importée dans OpenStack.
</p><p>Si vous ne savez pas encore comment faire cela, le <a href="/wiki/Cloud_Quick_Start/fr" title="Cloud Quick Start/fr">Guide de démarrage</a> est une bonne introduction. La création de ces ressources à l'aide de l'interface web d'OpenStack vous permettra de comprendre le fonctionnement et l'utilité de Terraform.
</p>
<h3><span class="mw-headline" id="Installer_Terraform">Installer Terraform</span></h3>
<p>Consultez la <a rel="nofollow" class="external text" href="https://www.terraform.io/downloads.html">page de téléchargement</a> de Terraform pour obtenir la dernière version du binaire. Nous utilisons ici Terraform 0.12.
</p>
<h3><span id="S.27identifier_pour_OpenStack"></span><span class="mw-headline" id="S'identifier_pour_OpenStack">S'identifier pour OpenStack</span></h3>
<p>Il y a deux façons de fournir vos identifiants OpenStack dans un environnement de ligne de commande%nbsp;: via des variables d'environnement ou dans un fichier de configuration. Nous utiliserons une des méthodes décrites dans la <a class="mw-selflink-fragment" href="#Définir_le_fournisseur_OpenStack">section suivante</a>. Quelle que soit votre méthode préférée, OpenStack propose un moyen simple de télécharger les identifiants. Une fois la connexion établie, cliquez sur <i>API Access</i> dans la barre de navigation; sur cette page se trouve le menu déroulant intitulé <i>Download OpenStack RC File</i>. À partir de là, vous pouvez télécharger un fichier <code>clouds.yaml</code> ou un fichier RC qui peut être obtenu à partir de votre session de l'interpréteur (<i>shell</i>).
</p><p>Le fichier RC contient une liste de commandes pour l'interpréteur qui servent à exporter les variables d'environnement dans votre session active. Il ne s'agit pas d'un script indépendant et il doit recevoir de l'information par
</p>
<div class="mw-highlight mw-highlight-lang-shell mw-content-ltr" dir="ltr"><pre><span></span>$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>openrc.sh
</pre></div>
<p>Vous devez alors entrer votre mot de passe OpenStack qui sera enregistré dans une variable d'environnement préfixée par <code>OS_</code>. D'autres variables d'environnement seront créées avec certains renseignements sur vous, votre projet et le nuage auquel vous voulez vous connecter, par exemple
</p><p>L’autre méthode est de créer une configuration dans <code>$HOME/.config/openstack/clouds.yaml</code>. Si vous n’avez pas déjà un tel fichier, vous pouvez télécharger clouds.yaml comme décrit ci-dessus et le copier à l’emplacement souhaité. Nous vous recommandons de modifier le nom donné au nuage dans le fichier téléchargé en un nom significatif, surtout si vous utilisez plusieurs nuages OpenStack. Ensuite, pour utiliser les outils CLI décrits ci-dessous, créez simplement une variable d’environnement <code>$OS_CLOUD</code> avec le nom du nuage que vous souhaitez utiliser.
</p>
<div class="mw-highlight mw-highlight-lang-shell mw-content-ltr" dir="ltr"><pre><span></span>$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">OS_CLOUD</span><span class="o">=</span>arbutus
</pre></div>
<p>Peu importe ce que vous choisissez, vous utiliserez ceci pour configurer Terraform.
</p>
<h3><span class="mw-headline" id="Session_OpenStack">Session OpenStack</span></h3>
<p>Il est utile d'avoir une fenêtre de terminal ouverte qui exécute l'interface de ligne de commande OpenStack. Cela fournit une référence pratique pour les spécifications que vous allez créer, car vous aurez besoin des identifiants de gabarits (<i>flavors</i>) et d'image pour vérifier les actions effectuées par Terraform. Horizon peut être utilisé pour rechercher des images et pour vérifier en général que Terraform produit les effets escomptés, mais il n'est pas possible de rechercher directement les identifiants des gabarits.
</p><p>OpenStack CLI (aussi appelé <i>OSC</i>) est un client Python qui peut être installé avec Python Pip et qui  <a rel="nofollow" class="external text" href="https://docs.openstack.org/newton/user-guide/common/cli-install-openstack-command-line-clients.html">est disponible pour plusieurs distributions et systèmes d'exploitation</a>.
</p>
<h3><span class="mw-headline" id="Espace_de_travail">Espace de travail</span></h3>
<p>Créez enfin un répertoire pour vos fichiers de configuration et d'état qui servira de point de départ.
</p>
<h2><span id="D.C3.A9finir_le_fournisseur_OpenStack"></span><span class="mw-headline" id="Définir_le_fournisseur_OpenStack">Définir le fournisseur OpenStack</span></h2>
<p>Décrivez d'abord le fournisseur&#160;: c'est ici que vous dites à Terraform d'utiliser OpenStack et comment l'utiliser. Lors de l'initialisation, la version la plus récente du plugiciel du fournisseur OpenStack sera installée dans le répertoire de travail et lors des opérations Terraform suivantes, les informations d'identification incluses seront utilisées pour se connecter au nuage spécifié.
</p><p>Vos informations de connexion et d'identification pour OpenStack peuvent être fournies à Terraform dans la spécification, dans l'environnement ou partiellement dans la spécification avec le reste dans l'environnement.
</p><p>Voici un exemple de spécification du fournisseur avec des informations de connexion et d'identification&#160;:
</p>
<div class="mw-highlight mw-highlight-lang-terraform mw-content-ltr" dir="ltr"><pre><span></span><span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;openstack&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">tenant_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;some_tenant&quot;</span>
<span class="w">  </span><span class="na">tenant_id</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1a2b3c45678901234d567890fa1b2cd3&quot;</span>
<span class="w">  </span><span class="na">auth_url</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;https://cloud.example.org:5000/v3&quot;</span>
<span class="w">  </span><span class="na">user_name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;joe&quot;</span>
<span class="w">  </span><span class="na">password</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;sharethiswithyourfriends!&quot;</span>
<span class="w">  </span><span class="na">user_domain_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;CentralID&quot;</span>
<span class="p">}</span>
</pre></div>
<p>Pour certaines instances OpenStack, ce qui précède spécifierait l'ensemble complet des informations nécessaires pour se connecter à l'instance et gérer les ressources dans le projet locataire donné (<i>tenant</i>). Cependant, Terraform prend en charge les informations d'identification partielles dans lesquelles vous pouvez laisser certaines valeurs en dehors de la configuration Terraform et les fournir d'une autre manière. Cela nous permettrait, par exemple, de laisser le mot de passe en dehors du fichier de configuration, auquel cas il devrait être spécifié dans l'environnement avec <code>$OS_PASSWORD</code>.
</p><p>Si vous préférez, vous pouvez aussi utiliser <code>clouds.yaml</code> et spécifier <code>cloud</code>.
</p>
<div class="mw-highlight mw-highlight-lang-terraform mw-content-ltr" dir="ltr"><pre><span></span><span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;openstack&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">cloud</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my_cloud&quot;</span>
<span class="p">}</span>
</pre></div>
<p>Il n'est pas nécessaire d'entrer une définition pour <i>provider</i>.
</p>
<div class="mw-highlight mw-highlight-lang-terraform mw-content-ltr" dir="ltr"><pre><span></span><span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;openstack&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="p">}</span>
</pre></div>
<p>Dans ce cas, soit <code>$OS_CLOUD</code>, soit les variables définies par le fichier RC approprié doivent se trouver dans l'environnement d'exécution pour que Terraform puisse continuer.
</p><p>Les options disponibles sont décrites en détail dans <a rel="nofollow" class="external text" href="https://www.terraform.io/docs/providers/openstack/index.html">cette page de Terraform</a>.
</p>
<h3><span class="mw-headline" id="Ce_que_vous_devriez_utiliser">Ce que vous devriez utiliser</span></h3>
<p>Il peut être tentant de laisser certains détails dans l'environnement afin que la configuration Terraform soit plus portable ou réutilisable, mais comme nous le verrons plus tard, la configuration Terraform contiendra et doit contenir des détails spécifiques à chaque nuage, tels que les UUID de gabarit et d'image, les noms de réseau et les locataires.
</p><p>Le plus important pour votre configuration est la sécurité. Vous voudrez probablement éviter de stocker vos informations d’identification dans la configuration Terraform, même si vous ne les partagez avec personne, même si elles se trouvent sur votre propre poste de travail et que personne d’autre que vous n’y a accès. Même si vous n’avez pas peur du piratage, ce n’est certainement pas une bonne pratique de stocker des mots de passe et autres dans des fichiers de configuration qui peuvent finir par être copiés et déplacés dans votre système de fichiers lorsque vous essayez des choses. Mais aussi, n’oubliez jamais les bonnes pratiques pour contrer  le piratage.
</p>
<h3><span class="mw-headline" id="Initialiser_Terraform">Initialiser Terraform</span></h3>
<p>Pour nous assurer que le fournisseur est correctement configuré, initialisez Terraform et vérifiez la configuration jusqu'à présent. Avec la définition du fournisseur dans un fichier appelé, par exemple, <code>nodes.tf</code>, exécutez <code>terraform init</code>.
</p>
<div class="mw-highlight mw-highlight-lang-shell mw-content-ltr" dir="ltr"><pre><span></span>$<span class="w"> </span>terraform<span class="w"> </span>init
Initializing<span class="w"> </span>the<span class="w"> </span>backend...

Initializing<span class="w"> </span>provider<span class="w"> </span>plugins...
-<span class="w"> </span>Checking<span class="w"> </span><span class="k">for</span><span class="w"> </span>available<span class="w"> </span>provider<span class="w"> </span>plugins...
-<span class="w"> </span>Downloading<span class="w"> </span>plugin<span class="w"> </span><span class="k">for</span><span class="w"> </span>provider<span class="w"> </span><span class="s2">&quot;openstack&quot;</span><span class="w"> </span><span class="o">(</span>terraform-providers/openstack<span class="o">)</span>
<span class="w">  </span><span class="m">1</span>.19.0...

The<span class="w"> </span>following<span class="w"> </span>providers<span class="w"> </span><span class="k">do</span><span class="w"> </span>not<span class="w"> </span>have<span class="w"> </span>any<span class="w"> </span>version<span class="w"> </span>constraints<span class="w"> </span><span class="k">in</span><span class="w"> </span>configuration,
so<span class="w"> </span>the<span class="w"> </span>latest<span class="w"> </span>version<span class="w"> </span>was<span class="w"> </span>installed.

To<span class="w"> </span>prevent<span class="w"> </span>automatic<span class="w"> </span>upgrades<span class="w"> </span>to<span class="w"> </span>new<span class="w"> </span>major<span class="w"> </span>versions<span class="w"> </span>that<span class="w"> </span>may<span class="w"> </span>contain<span class="w"> </span>breaking
changes,<span class="w"> </span>it<span class="w"> </span>is<span class="w"> </span>recommended<span class="w"> </span>to<span class="w"> </span>add<span class="w"> </span><span class="nv">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="w"> </span>constraints<span class="w"> </span>to<span class="w"> </span>the
corresponding<span class="w"> </span>provider<span class="w"> </span>blocks<span class="w"> </span><span class="k">in</span><span class="w"> </span>configuration,<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>constraint<span class="w"> </span>strings
suggested<span class="w"> </span>below.

*<span class="w"> </span>provider.openstack:<span class="w"> </span><span class="nv">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;~&gt; 1.19&quot;</span>

Terraform<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>successfully<span class="w"> </span>initialized!

You<span class="w"> </span>may<span class="w"> </span>now<span class="w"> </span>begin<span class="w"> </span>working<span class="w"> </span>with<span class="w"> </span>Terraform.<span class="w"> </span>Try<span class="w"> </span>running<span class="w"> </span><span class="s2">&quot;terraform plan&quot;</span><span class="w"> </span>to<span class="w"> </span>see
any<span class="w"> </span>changes<span class="w"> </span>that<span class="w"> </span>are<span class="w"> </span>required<span class="w"> </span><span class="k">for</span><span class="w"> </span>your<span class="w"> </span>infrastructure.<span class="w"> </span>All<span class="w"> </span>Terraform<span class="w"> </span>commands
should<span class="w"> </span>now<span class="w"> </span>work.

If<span class="w"> </span>you<span class="w"> </span>ever<span class="w"> </span><span class="nb">set</span><span class="w"> </span>or<span class="w"> </span>change<span class="w"> </span>modules<span class="w"> </span>or<span class="w"> </span>backend<span class="w"> </span>configuration<span class="w"> </span><span class="k">for</span><span class="w"> </span>Terraform,
rerun<span class="w"> </span>this<span class="w"> </span><span class="nb">command</span><span class="w"> </span>to<span class="w"> </span>reinitialize<span class="w"> </span>your<span class="w"> </span>working<span class="w"> </span>directory.<span class="w"> </span>If<span class="w"> </span>you<span class="w"> </span>forget,<span class="w"> </span>other
commands<span class="w"> </span>will<span class="w"> </span>detect<span class="w"> </span>it<span class="w"> </span>and<span class="w"> </span>remind<span class="w"> </span>you<span class="w"> </span>to<span class="w"> </span><span class="k">do</span><span class="w"> </span>so<span class="w"> </span><span class="k">if</span><span class="w"> </span>necessary.
</pre></div>
<p>Cela montre que l'initialisation de Terraform et le téléchargement du plugiciel du fournisseur ont ​​réussi donc que le code OpenStack est géré correctement. Cela ne teste pas les informations d'identification, car cette opération n'essaie pas réellement de se connecter au fournisseur défini.
</p>
<h2><span id="D.C3.A9finir_une_VM"></span><span class="mw-headline" id="Définir_une_VM">Définir une VM</span></h2>
<p>Définissions maintenant une VM de base.
</p>
<blockquote><p><b>Important</b>&#160;: Il est recommandé de <b>toujours</b> spécifier les gabarits et les images à l'aide de leurs identifiants, même lorsque Terraform prend en charge l'utilisation du nom. Bien que le nom soit plus lisible, l'identifiant est ce qui définit réellement l'état de la ressource et l'identifiant d'une image ou d'un gabarit donné <b>ne changera jamais</b>. Il est toutefois possible que <b>name</b> change. Si un gabarit ou une image est retirée, par exemple, et remplacée par une autre du même nom, la prochaine fois que vous exécuterez Terraform, l'identifiant mis à jour sera détecté et Terraform déterminera que vous souhaitez <b>reconstruire ou redimensionner la ressource associée</b>. Il s'agit d'une opération pour détruire (et reconstruire).
</p></blockquote>
<p>Une machine virtuelle OpenStack minimale peut être définie comme suit dans Terraform&#160;:
</p>
<div class="mw-highlight mw-highlight-lang-terraform mw-content-ltr" dir="ltr"><pre><span></span><span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;openstack_compute_instance_v2&quot;</span><span class="w"> </span><span class="nv">&quot;myvm&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;myvm&quot;</span>
<span class="w">  </span><span class="na">image_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;80ceebef-f9aa-462e-a793-d3c1cf96123b&quot;</span>
<span class="w">  </span><span class="na">flavor_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0351ddb0-00d0-4269-80d3-913029d1a111&quot;</span>
<span class="w">  </span><span class="na">key_pair</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Aluminum&quot;</span>
<span class="w">  </span><span class="na">security_groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p>Ceci crée une VM ayant le nom, l'image et le gabarit indiqués et associe la VM avec une paire de clés et le groupe de sécurité par défaut.
</p>
<blockquote><p><b>Remarque</b>&#160;: Si vous avez suivi le tutoriel jusqu'ici (ce qu'il serait bon de faire), utilisez vos propres valeurs pour <code>image_id</code>, <code>flavor_id</code> et <code>key_pair</code>, sinon cela échouera probablement.
</p></blockquote>
<p>Les valeurs pour <code>image_id</code> et <code>flavor_id</code> sont l’une des raisons pour lesquelles j’aime avoir une session de terminal ouverte qui exécute l’interface de ligne de commande OpenStack, connectée au nuage que je cible avec Terraform&#160;: dans le terminal je peux utiliser <code>flavor list</code> ou <code>image list</code> pour répertorier les noms et les identifiants.
</p><p>Si vous utilisez Horizon (l'interface Web d'OpenStack), cela est en partie possible; voir <a class="mw-selflink-fragment" href="#UUID_des_images_et_gabarits_sous_Horizon">UUID des images et gabarits sous Horizon</a> en annexe.
</p><p>Notez qu'aucun volume n'est fourni. Une instance de calcul sur nos nuages aura déjà un volume qui lui est associé, mais une instance persistante échouera probablement à moins qu'il n'y ait assez d'espace vide dans l'image elle-même. Il est recommandé de <a href="/wiki/Working_with_volumes/fr#Démarrer_depuis_un_volume" title="Working with volumes/fr">créer un volume de démarrage</a> pour les machines virtuelles qui utilisent des versions persistantes.
</p>
<h3><span class="mw-headline" id="Tester">Tester</span></h3>
<p>La commande <code>terraform plan</code> compile la définition de Terraform, tente de déterminer comment réconcilier l'état résultant avec l'état actuel du nuage et produit un plan des modifications qui s'appliqueraient.
</p>
<div class="mw-highlight mw-highlight-lang-shell mw-content-ltr" dir="ltr"><pre><span></span>$<span class="w"> </span>terraform<span class="w"> </span>plan
Refreshing<span class="w"> </span>Terraform<span class="w"> </span>state<span class="w"> </span><span class="k">in</span>-memory<span class="w"> </span>prior<span class="w"> </span>to<span class="w"> </span>plan...
The<span class="w"> </span>refreshed<span class="w"> </span>state<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>used<span class="w"> </span>to<span class="w"> </span>calculate<span class="w"> </span>this<span class="w"> </span>plan,<span class="w"> </span>but<span class="w"> </span>will<span class="w"> </span>not<span class="w"> </span>be
persisted<span class="w"> </span>to<span class="w"> </span><span class="nb">local</span><span class="w"> </span>or<span class="w"> </span>remote<span class="w"> </span>state<span class="w"> </span>storage.


------------------------------------------------------------------------

An<span class="w"> </span>execution<span class="w"> </span>plan<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>generated<span class="w"> </span>and<span class="w"> </span>is<span class="w"> </span>shown<span class="w"> </span>below.
Resource<span class="w"> </span>actions<span class="w"> </span>are<span class="w"> </span>indicated<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>symbols:
<span class="w">  </span>+<span class="w"> </span>create

Terraform<span class="w"> </span>will<span class="w"> </span>perform<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>actions:

<span class="w">  </span><span class="c1"># openstack_compute_instance_v2.myvm will be created</span>
<span class="w">  </span>+<span class="w"> </span>resource<span class="w"> </span><span class="s2">&quot;openstack_compute_instance_v2&quot;</span><span class="w"> </span><span class="s2">&quot;myvm&quot;</span><span class="w"> </span><span class="o">{</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">access_ip_v4</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">access_ip_v6</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">all_metadata</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">availability_zone</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">flavor_id</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0351ddb0-00d0-4269-80d3-913029d1a111&quot;</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">flavor_name</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">force_delete</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">id</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">image_id</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;80ceebef-f9aa-462e-a793-d3c1cf96123b&quot;</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">image_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">key_pair</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Aluminum&quot;</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">name</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;myvm&quot;</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">power_state</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;active&quot;</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">region</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">security_groups</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="o">[</span>
<span class="w">          </span>+<span class="w"> </span><span class="s2">&quot;default&quot;</span>,
<span class="w">        </span><span class="o">]</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">stop_before_destroy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span>

<span class="w">      </span>+<span class="w"> </span>network<span class="w"> </span><span class="o">{</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">access_network</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">fixed_ip_v4</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">fixed_ip_v6</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">floating_ip</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">mac</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">name</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">port</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">uuid</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>

Plan:<span class="w"> </span><span class="m">1</span><span class="w"> </span>to<span class="w"> </span>add,<span class="w"> </span><span class="m">0</span><span class="w"> </span>to<span class="w"> </span>change,<span class="w"> </span><span class="m">0</span><span class="w"> </span>to<span class="w"> </span>destroy.

------------------------------------------------------------------------

Note:<span class="w"> </span>You<span class="w"> </span>didn<span class="s1">&#39;t specify an &quot;-out&quot; parameter to save this plan, so Terraform</span>
<span class="s1">can&#39;</span>t<span class="w"> </span>guarantee<span class="w"> </span>that<span class="w"> </span>exactly<span class="w"> </span>these<span class="w"> </span>actions<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>performed<span class="w"> </span><span class="k">if</span>
<span class="s2">&quot;terraform apply&quot;</span><span class="w"> </span>is<span class="w"> </span>subsequently<span class="w"> </span>run.
</pre></div>
<p>Prenez connaissance du résultat. Même s'il contient beaucoup d'information, <i>il est nécessaire d'en connaître le contenu</i> avant d'accepter les modifications afin d'éviter les mauvaises surprises.
</p>
<blockquote><p>Si vous obtenez une erreur concernant des informations d'identification incomplètes, vous avez peut-être oublié de définir <code>OS_CLOUD</code> ou de sourcer le fichier RC, ou encore, votre fichier <code>clouds.yaml</code> est peut-être absent.</p></blockquote>
<p>Ces valeurs sont celles des ressources telles qu'elles seraient définies dans OpenStack. Tout ce qui est marqué comme <code>known after apply</code> sera déterminé à partir de l'état des ressources nouvellement créées interrogées à partir d'OpenStack. Les autres valeurs sont définies en fonction de ce que nous avons défini ou déterminé par Terraform et le plugiciel OpenStack comme valeurs calculées ou par défaut.
</p><p>Si vous n'avez pas le temps et que ce n'est pas grave de détruire accidentellement des ressources ou de les reconstruire, <b>prenez au moins le temps</b> de vérifier la dernière ligne du plan.
</p>
<div class="mw-highlight mw-highlight-lang-shell mw-content-ltr" dir="ltr"><pre><span></span>Plan:<span class="w"> </span><span class="m">1</span><span class="w"> </span>to<span class="w"> </span>add,<span class="w"> </span><span class="m">0</span><span class="w"> </span>to<span class="w"> </span>change,<span class="w"> </span><span class="m">0</span><span class="w"> </span>to<span class="w"> </span>destroy.
</pre></div>
<p>Dans ce cas, nous savons que nous ajoutons une ressource, donc cela semble correct. Si les autres valeurs étaient différentes de zéro, nous ferions mieux de réexaminer notre configuration, notre état et ce qui est réellement défini dans OpenStack, pour ensuite effectuer les corrections nécessaires.
</p>
<h3><span id="Que_se_passe-t-il_avec_les_ressources_OpenStack_d.C3.A9j.C3.A0_existantes.3F"></span><span class="mw-headline" id="Que_se_passe-t-il_avec_les_ressources_OpenStack_déjà_existantes?">Que se passe-t-il avec les ressources OpenStack déjà existantes?</span></h3>
<p>Si des VM sont déjà définies dans votre projet OpenStack, vous vous demandez peut-être si Terraform affectera ces ressources.
</p><p>Eh bien non. Terraform ne connait pas les ressources qui sont déjà définies pour le projet et n'essaie pas d'en déterminer l'état. Les actions de Terraform se basent sur la configuration fournie et sur l'état précédemment déterminé dans la configuration. Les ressources existantes ne sont pas représentées dans Terraform et lui sont invisibles.
</p><p>Il est possible d'importer des ressources OpenStack précédemment définies dans Terraform, mais <a rel="nofollow" class="external text" href="https://dleske.gitlab.io/posts/terraform-import-manually/">ce n'est pas une mince affaire</a> et cela sort du cadre de ce tutoriel. L'important ici est que toutes les ressources existantes dans votre projet OpenStack soient protégées contre toute manipulation involontaire via Terraform, mais pourquoi ne pas lire attentivement les plans de sortie pour votre tranquillité d'esprit?&#160;:)
</p>
<h3><span class="mw-headline" id="Appliquer_la_configuration">Appliquer la configuration</span></h3>
<p>Utilisez <code>terraform apply</code> pour effectuer le changement décrit dans le plan.
</p>
<div class="mw-highlight mw-highlight-lang-shell mw-content-ltr" dir="ltr"><pre><span></span>$<span class="w"> </span>terraform<span class="w"> </span>apply

An<span class="w"> </span>execution<span class="w"> </span>plan<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>generated<span class="w"> </span>and<span class="w"> </span>is<span class="w"> </span>shown<span class="w"> </span>below.
Resource<span class="w"> </span>actions<span class="w"> </span>are<span class="w"> </span>indicated<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>symbols:
<span class="w">  </span>+<span class="w"> </span>create

Terraform<span class="w"> </span>will<span class="w"> </span>perform<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>actions:

<span class="o">[</span>...<span class="w"> </span>repeat<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>plan<span class="w"> </span>from<span class="w"> </span>above<span class="w"> </span>...<span class="o">]</span>

Plan:<span class="w"> </span><span class="m">1</span><span class="w"> </span>to<span class="w"> </span>add,<span class="w"> </span><span class="m">0</span><span class="w"> </span>to<span class="w"> </span>change,<span class="w"> </span><span class="m">0</span><span class="w"> </span>to<span class="w"> </span>destroy.

Do<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span>perform<span class="w"> </span>these<span class="w"> </span>actions?
<span class="w">  </span>Terraform<span class="w"> </span>will<span class="w"> </span>perform<span class="w"> </span>the<span class="w"> </span>actions<span class="w"> </span>described<span class="w"> </span>above.
<span class="w">  </span>Only<span class="w"> </span><span class="s1">&#39;yes&#39;</span><span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>accepted<span class="w"> </span>to<span class="w"> </span>approve.

<span class="w">  </span>Enter<span class="w"> </span>a<span class="w"> </span>value:<span class="w"> </span>yes

openstack_compute_instance_v2.myvm:<span class="w"> </span>Creating...

Error:<span class="w"> </span>Error<span class="w"> </span>creating<span class="w"> </span>OpenStack<span class="w"> </span>server:<span class="w"> </span>Expected<span class="w"> </span>HTTP<span class="w"> </span>response<span class="w"> </span>code<span class="w"> </span><span class="o">[]</span><span class="w"> </span>when
accessing<span class="w"> </span><span class="o">[</span>POST
https://cloud.example.org:8774/v2.1/43b86742c5ee4eaf800a36d7d234d95c/servers<span class="o">]</span>,
but<span class="w"> </span>got<span class="w"> </span><span class="m">409</span><span class="w"> </span>instead
<span class="o">{</span><span class="s2">&quot;conflictingRequest&quot;</span>:<span class="w"> </span><span class="o">{</span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="s2">&quot;Multiple possible networks found, use a</span>
<span class="s2">Network ID to be more specific.&quot;</span>,<span class="w"> </span><span class="s2">&quot;code&quot;</span>:<span class="w"> </span><span class="m">409</span><span class="o">}}</span>

<span class="w">  </span>on<span class="w"> </span>nodes.tf<span class="w"> </span>line<span class="w"> </span><span class="m">4</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>resource<span class="w"> </span><span class="s2">&quot;openstack_compute_instance_v2&quot;</span><span class="w"> </span><span class="s2">&quot;myvm&quot;</span>:
<span class="w">   </span><span class="m">4</span>:<span class="w"> </span>resource<span class="w"> </span><span class="s2">&quot;openstack_compute_instance_v2&quot;</span><span class="w"> </span><span class="s2">&quot;myvm&quot;</span><span class="w"> </span><span class="o">{</span>
</pre></div>
<p>Dans notre exemple, ceci échoue. Il y a au moins deux réseaux qui sont définis pour un projet OpenStack&#160;: un privé et un public. Terraform a besoin de savoir lequel utiliser.
</p>
<h2><span id="Ajouter_un_r.C3.A9seau"></span><span class="mw-headline" id="Ajouter_un_réseau">Ajouter un réseau</span></h2>
<p>Le nom du réseau privé diffère d'un projet à l'autre et la convention de nommage peut différer d'un nuage à l'autre, mais ils se trouvent généralement sur un réseau 192.168.X.Y et peuvent être trouvés dans la CLI à l'aide de network list ou sur Horizon sous <i>Réseau&#160;-&gt;&#160;Réseaux</i>. Si le réseau privé de votre projet est <code>my-tenant-net</code>, vous ajouterez un sous-bloc de ressources <code>network</code> à votre définition de VM similaire à ce qui suit&#160;:
</p>
<div class="mw-highlight mw-highlight-lang-terraform mw-content-ltr" dir="ltr"><pre><span></span><span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;openstack_compute_instance_v2&quot;</span><span class="w"> </span><span class="nv">&quot;myvm&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;myvm&quot;</span>
<span class="w">  </span><span class="na">image_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;80ceebef-f9aa-462e-a793-d3c1cf96123b&quot;</span>
<span class="w">  </span><span class="na">flavor_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0351ddb0-00d0-4269-80d3-913029d1a111&quot;</span>
<span class="w">  </span><span class="na">key_pair</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Aluminum&quot;</span>
<span class="w">  </span><span class="na">security_groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span>

<span class="w">  </span><span class="nb">network</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my-tenant-net&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>Essayez de nouveau.
</p>
<div class="mw-highlight mw-highlight-lang-shell mw-content-ltr" dir="ltr"><pre><span></span>$<span class="w"> </span>terraform<span class="w"> </span>apply

An<span class="w"> </span>execution<span class="w"> </span>plan<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>generated<span class="w"> </span>and<span class="w"> </span>is<span class="w"> </span>shown<span class="w"> </span>below.
Resource<span class="w"> </span>actions<span class="w"> </span>are<span class="w"> </span>indicated<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>symbols:
<span class="w">  </span>+<span class="w"> </span>create

Terraform<span class="w"> </span>will<span class="w"> </span>perform<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>actions:

<span class="w">  </span><span class="c1"># openstack_compute_instance_v2.myvm will be created</span>
<span class="w">  </span>+<span class="w"> </span>resource<span class="w"> </span><span class="s2">&quot;openstack_compute_instance_v2&quot;</span><span class="w"> </span><span class="s2">&quot;myvm&quot;</span><span class="w"> </span><span class="o">{</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">access_ip_v4</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">access_ip_v6</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">all_metadata</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">availability_zone</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">flavor_id</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0351ddb0-00d0-4269-80d3-913029d1a111&quot;</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">flavor_name</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">force_delete</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">id</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">image_id</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;80ceebef-f9aa-462e-a793-d3c1cf96123b&quot;</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">image_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">key_pair</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Aluminum&quot;</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">name</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;myvm&quot;</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">power_state</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;active&quot;</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">region</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">security_groups</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="o">[</span>
<span class="w">          </span>+<span class="w"> </span><span class="s2">&quot;default&quot;</span>,
<span class="w">        </span><span class="o">]</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">stop_before_destroy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span>

<span class="w">      </span>+<span class="w"> </span>network<span class="w"> </span><span class="o">{</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">access_network</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">fixed_ip_v4</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">fixed_ip_v6</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">floating_ip</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">mac</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">name</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my-tenant-net&quot;</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">port</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">uuid</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>

Plan:<span class="w"> </span><span class="m">1</span><span class="w"> </span>to<span class="w"> </span>add,<span class="w"> </span><span class="m">0</span><span class="w"> </span>to<span class="w"> </span>change,<span class="w"> </span><span class="m">0</span><span class="w"> </span>to<span class="w"> </span>destroy.

Do<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span>perform<span class="w"> </span>these<span class="w"> </span>actions?
<span class="w">  </span>Terraform<span class="w"> </span>will<span class="w"> </span>perform<span class="w"> </span>the<span class="w"> </span>actions<span class="w"> </span>described<span class="w"> </span>above.
<span class="w">  </span>Only<span class="w"> </span><span class="s1">&#39;yes&#39;</span><span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>accepted<span class="w"> </span>to<span class="w"> </span>approve.

<span class="w">  </span>Enter<span class="w"> </span>a<span class="w"> </span>value:<span class="w"> </span>yes

openstack_compute_instance_v2.myvm:<span class="w"> </span>Creating...
openstack_compute_instance_v2.myvm:<span class="w"> </span>Still<span class="w"> </span>creating...<span class="w"> </span><span class="o">[</span>10s<span class="w"> </span>elapsed<span class="o">]</span>
openstack_compute_instance_v2.myvm:<span class="w"> </span>Still<span class="w"> </span>creating...<span class="w"> </span><span class="o">[</span>20s<span class="w"> </span>elapsed<span class="o">]</span>
openstack_compute_instance_v2.myvm:<span class="w"> </span>Still<span class="w"> </span>creating...<span class="w"> </span><span class="o">[</span>30s<span class="w"> </span>elapsed<span class="o">]</span>
openstack_compute_instance_v2.myvm:<span class="w"> </span>Creation<span class="w"> </span><span class="nb">complete</span><span class="w"> </span>after<span class="w"> </span>32s<span class="w"> </span><span class="o">[</span><span class="nv">id</span><span class="o">=</span>1f7f73ff-b9b5-40ad-9ddf-d848efe13e42<span class="o">]</span>

Apply<span class="w"> </span>complete!<span class="w"> </span>Resources:<span class="w"> </span><span class="m">1</span><span class="w"> </span>added,<span class="w"> </span><span class="m">0</span><span class="w"> </span>changed,<span class="w"> </span><span class="m">0</span><span class="w"> </span>destroyed.
</pre></div>
<p>Vous avez maintenant une machine virtuelle créée par Terraform. Vous devriez voir votre nouvelle machine virtuelle sur Horizon ou dans la sortie de <code>server list</code> dans votre fenêtre de terminal OpenStack.
</p>
<pre class="plaintext">(openstack) server list -c ID -c Name -c Status
+--------------------------------------+--------+--------+
| ID                                   | Name   | Status |
+--------------------------------------+--------+--------+
| 1f7f73ff-b9b5-40ad-9ddf-d848efe13e42 | myvm   | ACTIVE |
| c3fa7d11-4122-412a-ad19-32e52cbb8f66 | store  | ACTIVE |
| f778f65f-c9d5-4808-930b-9f50d82a8c9c | puppet | ACTIVE |
| 9b42cbf3-3782-4472-bdd0-9028bbb73460 | lbr    | ACTIVE |
+--------------------------------------+--------+--------+</pre>
<p>Dans ce résultat, trois instances précédemment créées ont survécu sans être touchées par Terraform.
</p>
<h3><span id="R.C3.A9capitulation"></span><span class="mw-headline" id="Récapitulation">Récapitulation</span></h3>
<p>Notez qu'il existe désormais un fichier dans votre espace de travail appelé <code>terraform.tfstate</code>. Il a été créé par Terraform lors de l'application de la nouvelle configuration et de la confirmation de sa réussite. Le fichier d'état contient des détails sur les ressources gérées que Terraform utilise pour déterminer comment arriver à un nouvel état décrit par les mises à jour de configuration. En général, vous n'aurez pas besoin de consulter ce fichier, mais sachez que sans lui, Terraform ne peut pas gérer correctement les ressources et si vous le supprimez, vous devrez le restaurer ou le recréer, ou gérer ces ressources sans Terraform.
</p><p>Vous avez maintenant une machine virtuelle opérationnelle qui a été initialisée avec succès et qui se trouve sur le réseau privé. Cependant, vous ne pouvez pas vous y connecter et la consulter, car vous n'avez pas attribué d'adresse IP flottante à cet hôte. Elle n'est donc pas directement accessible depuis l'extérieur du locataire.
</p><p>Si vous aviez un autre hôte dans ce locataire avec une adresse IP flottante, vous pourriez l'utiliser comme bastion (<i>bastion host</i>) pour la nouvelle machine virtuelle, car ils seront tous deux sur le même réseau privé. Il s'agit d'une bonne stratégie à utiliser pour les nœuds qui n'ont pas besoin d'être directement accessibles depuis Internet, comme un serveur de base de données, ou simplement pour préserver les ressources limitées que sont les adresses IP flottantes.
</p><p>Pour l'instant, ajoutez une IP flottante à votre nouvelle VM.
</p>
<h2><span class="mw-headline" id="Ajouter_une_adresse_IP_flottante">Ajouter une adresse IP flottante</span></h2>
<p>Une IP flottante n'est pas créée directement sur une VM OpenStack, mais est allouée au projet à partir d'un groupe d'IP et associée à l'interface du réseau privé de l'IP.
</p><p>En supposant que vous n'avez pas déjà d'IP flottante allouée à cette utilisation, déclarez une ressource IP flottante comme dans l'exemple suivant. La seule chose dont vous avez besoin est de connaître le pool à partir duquel allouer l'IP flottante; sur nos nuages, il s'agit du réseau externe (<code>ext_net</code> dans cet exemple).
</p>
<div class="mw-highlight mw-highlight-lang-terraform mw-content-ltr" dir="ltr"><pre><span></span><span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;openstack_networking_floatingip_v2&quot;</span><span class="w"> </span><span class="nv">&quot;myvm_fip&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ext_net&quot;</span>
<span class="p">}</span>
</pre></div>
<p>Acceptez ce changement maintenant ou utilisez <code>terraform plan</code> pour voir ce qui se produirait.
</p>
<div class="mw-highlight mw-highlight-lang-shell mw-content-ltr" dir="ltr"><pre><span></span>$<span class="w"> </span>terraform<span class="w"> </span>apply
openstack_compute_instance_v2.myvm:<span class="w"> </span>Refreshing<span class="w"> </span>state...
<span class="o">[</span><span class="nv">id</span><span class="o">=</span>1f7f73ff-b9b5-40ad-9ddf-d848efe13e42<span class="o">]</span>

An<span class="w"> </span>execution<span class="w"> </span>plan<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>generated<span class="w"> </span>and<span class="w"> </span>is<span class="w"> </span>shown<span class="w"> </span>below.
Resource<span class="w"> </span>actions<span class="w"> </span>are<span class="w"> </span>indicated<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>symbols:
<span class="w">  </span>+<span class="w"> </span>create

Terraform<span class="w"> </span>will<span class="w"> </span>perform<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>actions:

<span class="w">  </span><span class="c1"># openstack_networking_floatingip_v2.myvm_fip will be created</span>
<span class="w">  </span>+<span class="w"> </span>resource<span class="w"> </span><span class="s2">&quot;openstack_networking_floatingip_v2&quot;</span><span class="w"> </span><span class="s2">&quot;myvm_fip&quot;</span><span class="w"> </span><span class="o">{</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">address</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">all_tags</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">fixed_ip</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">id</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">pool</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;provider-199-2&quot;</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">port_id</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">region</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">tenant_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">    </span><span class="o">}</span>

Plan:<span class="w"> </span><span class="m">1</span><span class="w"> </span>to<span class="w"> </span>add,<span class="w"> </span><span class="m">0</span><span class="w"> </span>to<span class="w"> </span>change,<span class="w"> </span><span class="m">0</span><span class="w"> </span>to<span class="w"> </span>destroy.

Do<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span>perform<span class="w"> </span>these<span class="w"> </span>actions?
<span class="w">  </span>Terraform<span class="w"> </span>will<span class="w"> </span>perform<span class="w"> </span>the<span class="w"> </span>actions<span class="w"> </span>described<span class="w"> </span>above.
<span class="w">  </span>Only<span class="w"> </span><span class="s1">&#39;yes&#39;</span><span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>accepted<span class="w"> </span>to<span class="w"> </span>approve.

<span class="w">  </span>Enter<span class="w"> </span>a<span class="w"> </span>value:<span class="w"> </span>yes

openstack_networking_floatingip_v2.myvm_fip:<span class="w"> </span>Creating...
openstack_networking_floatingip_v2.myvm_fip:<span class="w"> </span>Creation<span class="w"> </span><span class="nb">complete</span><span class="w"> </span>after<span class="w"> </span>9s
<span class="o">[</span><span class="nv">id</span><span class="o">=</span><span class="m">20190061</span>-c2b6-4740-bbfc-6facbb300dd4<span class="o">]</span>

Apply<span class="w"> </span>complete!<span class="w"> </span>Resources:<span class="w"> </span><span class="m">1</span><span class="w"> </span>added,<span class="w"> </span><span class="m">0</span><span class="w"> </span>changed,<span class="w"> </span><span class="m">0</span><span class="w"> </span>destroyed.
</pre></div>
<p>Cette IP flottante est maintenant <i>allouée</i>, mais pas encore associée à votre instance. Ajoutez la définition suivante&#160;:
</p>
<div class="mw-highlight mw-highlight-lang-terraform mw-content-ltr" dir="ltr"><pre><span></span><span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;openstack_compute_floatingip_associate_v2&quot;</span><span class="w"> </span><span class="nv">&quot;myvm_fip&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">floating_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">openstack_networking_floatingip_v2.myvm_fip.address</span>
<span class="w">  </span><span class="na">instance_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">openstack_compute_instance_v2.myvm.id</span>
<span class="p">}</span>
</pre></div>
<p>Les attributs de cette nouvelle ressource sont définis par des références à d'autres ressources et leurs attributs.
</p>
<blockquote><p><b>Remarque</b>&#160;: La documentation actuelle du fournisseur OpenStack utilise une syntaxe différente de celle présentée ici, car elle n'a pas encore été mise à jour pour les modifications apportées à Terraform v.12.
</p></blockquote>
<p>Des références comme celle-ci sont généralement <code>&lt;resource type&gt;.&lt;resource name&gt;.&lt;attribute&gt;</code>. D'autres références que vous pourriez voir bientôt incluent <code>var.&lt;variable name&gt;</code>. Dans tous les cas, cette ressource forme une association entre la ressource créée précédemment et l'IP flottante allouée à l'étape suivante.
</p>
<div class="mw-highlight mw-highlight-lang-shell mw-content-ltr" dir="ltr"><pre><span></span>$<span class="w"> </span>terraform<span class="w"> </span>apply
openstack_networking_floatingip_v2.myvm_fip:<span class="w"> </span>Refreshing<span class="w"> </span>state...
<span class="o">[</span><span class="nv">id</span><span class="o">=</span><span class="m">20190061</span>-c2b6-4740-bbfc-6facbb300dd4<span class="o">]</span>
openstack_compute_instance_v2.myvm:<span class="w"> </span>Refreshing<span class="w"> </span>state...
<span class="o">[</span><span class="nv">id</span><span class="o">=</span>1f7f73ff-b9b5-40ad-9ddf-d848efe13e42<span class="o">]</span>

An<span class="w"> </span>execution<span class="w"> </span>plan<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>generated<span class="w"> </span>and<span class="w"> </span>is<span class="w"> </span>shown<span class="w"> </span>below.
Resource<span class="w"> </span>actions<span class="w"> </span>are<span class="w"> </span>indicated<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>symbols:
<span class="w">  </span>+<span class="w"> </span>create

Terraform<span class="w"> </span>will<span class="w"> </span>perform<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>actions:

<span class="w">  </span><span class="c1"># openstack_compute_floatingip_associate_v2.myvm_fip will be created</span>
<span class="w">  </span>+<span class="w"> </span>resource<span class="w"> </span><span class="s2">&quot;openstack_compute_floatingip_associate_v2&quot;</span><span class="w"> </span><span class="s2">&quot;myvm_fip&quot;</span><span class="w"> </span><span class="o">{</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">floating_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;X.Y.Z.W&quot;</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">id</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">instance_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1f7f73ff-b9b5-40ad-9ddf-d848efe13e42&quot;</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">region</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">    </span><span class="o">}</span>

Plan:<span class="w"> </span><span class="m">1</span><span class="w"> </span>to<span class="w"> </span>add,<span class="w"> </span><span class="m">0</span><span class="w"> </span>to<span class="w"> </span>change,<span class="w"> </span><span class="m">0</span><span class="w"> </span>to<span class="w"> </span>destroy.

Do<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span>perform<span class="w"> </span>these<span class="w"> </span>actions?
<span class="w">  </span>Terraform<span class="w"> </span>will<span class="w"> </span>perform<span class="w"> </span>the<span class="w"> </span>actions<span class="w"> </span>described<span class="w"> </span>above.
<span class="w">  </span>Only<span class="w"> </span><span class="s1">&#39;yes&#39;</span><span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>accepted<span class="w"> </span>to<span class="w"> </span>approve.

<span class="w">  </span>Enter<span class="w"> </span>a<span class="w"> </span>value:<span class="w"> </span>yes

openstack_compute_floatingip_associate_v2.myvm_fip:<span class="w"> </span>Creating...
openstack_compute_floatingip_associate_v2.myvm_fip:<span class="w"> </span>Creation<span class="w"> </span><span class="nb">complete</span><span class="w"> </span>after<span class="w"> </span>5s
<span class="o">[</span><span class="nv">id</span><span class="o">=</span>X.Y.Z.W/1f7f73ff-b9b5-40ad-9ddf-d848efe13e42/<span class="o">]</span>

Apply<span class="w"> </span>complete!<span class="w"> </span>Resources:<span class="w"> </span><span class="m">1</span><span class="w"> </span>added,<span class="w"> </span><span class="m">0</span><span class="w"> </span>changed,<span class="w"> </span><span class="m">0</span><span class="w"> </span>destroyed.
</pre></div>
<p>S'il y a une IP flottante, vous pouvez probablement vous connecter à l'instance via SSH maintenant.
</p>
<div class="mw-highlight mw-highlight-lang-shell mw-content-ltr" dir="ltr"><pre><span></span>$<span class="w"> </span>ssh<span class="w"> </span>centos@X.Y.Z.W<span class="w"> </span>hostname
The<span class="w"> </span>authenticity<span class="w"> </span>of<span class="w"> </span>host<span class="w"> </span><span class="s1">&#39;X.Y.Z.W (X.Y.Z.W)&#39;</span><span class="w"> </span>can<span class="s1">&#39;t be established.</span>
<span class="s1">ECDSA key fingerprint is SHA256:XmN5crnyxvE1sezdpo5tG5Z2nw0Z+2pspvkNSGpB99A.</span>
<span class="s1">Are you sure you want to continue connecting (yes/no)? yes</span>
<span class="s1">Warning: Permanently added &#39;</span>X.Y.Z.W<span class="err">&#39;</span><span class="w"> </span><span class="o">(</span>ECDSA<span class="o">)</span><span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>list<span class="w"> </span>of<span class="w"> </span>known<span class="w"> </span>hosts.
myvm.novalocal
</pre></div>
<p>Autrement, il est possible que vous deviez ajouter l'adresse IP de votre ordinateur au groupe de sécurité par défaut du projet.
</p>
<h2><span class="mw-headline" id="Ajouter_un_volume">Ajouter un volume</span></h2>
<p>Ajoutez ensuite un volume racine à la machine virtuelle. Étant donné que cela remplacera son disque de démarrage, <i>c'est une opération destructrice</i>. Ceci est un élément auquel vous devez faire attention dans Terraform et l’une des principales raisons pour lesquelles vous devez lire attentivement vos plans avant de les appliquer. Il est peu probable que vous provoquiez accidentellement des problèmes critiques lors de la création de nouvelles ressources, mais il peut être incroyablement facile de créer accidentellement des modifications de configuration qui nécessitent la reconstruction des machines virtuelles existantes.
</p><p>Puisque c'est un volume racine, créez-le dans l'instance de calcul en tant que sous-bloc avec le sous-bloc du réseau.
</p>
<div class="mw-highlight mw-highlight-lang-terraform mw-content-ltr" dir="ltr"><pre><span></span><span class="w">  </span><span class="nb">block_device</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">uuid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;80ceebef-f9aa-462e-a793-d3c1cf96123b&quot;</span>
<span class="w">    </span><span class="na">source_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;image&quot;</span>
<span class="w">    </span><span class="na">destination_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;volume&quot;</span>
<span class="w">    </span><span class="na">volume_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span>
<span class="w">    </span><span class="na">boot_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="w">    </span><span class="na">delete_on_termination</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
<p>Définissez l'attribut <code>uuid</code> comme l'UUID de l'image que vous souhaitez utiliser et supprimez <code>image_id</code> de la définition du bloc externe. Les autres attributs sont explicites, à l'exception de <code>destination_type</code>, qui est ici défini sur <code>volume</code> pour indiquer que le stockage doit être effectué avec un volume fourni par OpenStack plutôt que d'utiliser un disque sur l'hyperviseur. <code>delete_on_termination</code> est important&#160;: pour les tests, vous souhaiterez probablement que ce paramètre soit <code>true</code> afin de ne pas avoir à vous rappeler de nettoyer constamment les volumes restants, mais pour une utilisation réelle, vous devriez envisager de le définir sur <code>false</code> comme dernière défense contre une suppression accidentelle de ressources.
</p>
<blockquote><p>Ne laissez pas l'attribut <code>image_id</code> défini dans la définition de l'instance de calcul externe. Cela fonctionnera, mais Terraform changera de <i>démarrage à partir du volume</i> à <i>démarrage directement à partir de l'image</i> à chaque exécution, et tentera donc toujours de reconstruire votre instance. (Il s'agit probablement d'un défaut du fournisseur OpenStack.)
</p></blockquote>
<p>Voici à quoi ressemble le plan&#160;:
</p>
<div class="mw-highlight mw-highlight-lang-shell mw-content-ltr" dir="ltr"><pre><span></span>An<span class="w"> </span>execution<span class="w"> </span>plan<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>generated<span class="w"> </span>and<span class="w"> </span>is<span class="w"> </span>shown<span class="w"> </span>below.
Resource<span class="w"> </span>actions<span class="w"> </span>are<span class="w"> </span>indicated<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>symbols:
-/+<span class="w"> </span>destroy<span class="w"> </span>and<span class="w"> </span><span class="k">then</span><span class="w"> </span>create<span class="w"> </span>replacement

Terraform<span class="w"> </span>will<span class="w"> </span>perform<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>actions:

<span class="w">  </span><span class="c1"># openstack_compute_floatingip_associate_v2.myvm_fip must be replaced</span>
-/+<span class="w"> </span>resource<span class="w"> </span><span class="s2">&quot;openstack_compute_floatingip_associate_v2&quot;</span><span class="w"> </span><span class="s2">&quot;myvm_fip&quot;</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="nv">floating_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;199.241.167.122&quot;</span>
<span class="w">      </span>~<span class="w"> </span><span class="nv">id</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;199.241.167.122/1f7f73ff-b9b5-40ad-9ddf-d848efe13e42/&quot;</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>~<span class="w"> </span><span class="nv">instance_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1f7f73ff-b9b5-40ad-9ddf-d848efe13e42&quot;</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span><span class="w"> </span><span class="c1"># forces replacement</span>
<span class="w">      </span>~<span class="w"> </span><span class="nv">region</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;RegionOne&quot;</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">  </span><span class="c1"># openstack_compute_instance_v2.myvm must be replaced</span>
-/+<span class="w"> </span>resource<span class="w"> </span><span class="s2">&quot;openstack_compute_instance_v2&quot;</span><span class="w"> </span><span class="s2">&quot;myvm&quot;</span><span class="w"> </span><span class="o">{</span>
<span class="w">      </span>~<span class="w"> </span><span class="nv">access_ip_v4</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;192.168.2.11&quot;</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>+<span class="w"> </span><span class="nv">access_ip_v6</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>~<span class="w"> </span><span class="nv">all_metadata</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="o">{}</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">      </span>~<span class="w"> </span><span class="nv">availability_zone</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;nova&quot;</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">        </span><span class="nv">flavor_id</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0351ddb0-00d0-4269-80d3-913029d1a111&quot;</span>
<span class="w">      </span>~<span class="w"> </span><span class="nv">flavor_name</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;p1-3gb&quot;</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">        </span><span class="nv">force_delete</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span>
<span class="w">      </span>~<span class="w"> </span><span class="nv">id</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1f7f73ff-b9b5-40ad-9ddf-d848efe13e42&quot;</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">        </span><span class="nv">image_id</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;80ceebef-f9aa-462e-a793-d3c1cf96123b&quot;</span>
<span class="w">      </span>~<span class="w"> </span><span class="nv">image_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;CentOS-7-x64-2018-05&quot;</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">        </span><span class="nv">key_pair</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Aluminum&quot;</span>
<span class="w">        </span><span class="nv">name</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;myvm&quot;</span>
<span class="w">        </span><span class="nv">power_state</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;active&quot;</span>
<span class="w">      </span>~<span class="w"> </span><span class="nv">region</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;RegionOne&quot;</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">        </span><span class="nv">security_groups</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="o">[</span>
<span class="w">            </span><span class="s2">&quot;default&quot;</span>,
<span class="w">        </span><span class="o">]</span>
<span class="w">        </span><span class="nv">stop_before_destroy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span>

<span class="w">      </span>+<span class="w"> </span>block_device<span class="w"> </span><span class="o">{</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">boot_index</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="c1"># forces replacement</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">delete_on_termination</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="c1"># forces replacement</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">destination_type</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;volume&quot;</span><span class="w"> </span><span class="c1"># forces replacement</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">source_type</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;image&quot;</span><span class="w"> </span><span class="c1"># forces replacement</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">uuid</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;80ceebef-f9aa-462e-a793-d3c1cf96123b&quot;</span><span class="w"> </span><span class="c1"># forces replacement</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">volume_size</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="c1"># forces replacement</span>
<span class="w">        </span><span class="o">}</span>

<span class="w">      </span>~<span class="w"> </span>network<span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="nv">access_network</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span>
<span class="w">          </span>~<span class="w"> </span><span class="nv">fixed_ip_v4</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;192.168.2.11&quot;</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">fixed_ip_v6</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">floating_ip</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">          </span>~<span class="w"> </span><span class="nv">mac</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;fa:16:3e:3b:79:27&quot;</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">            </span><span class="nv">name</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my-tenant-net&quot;</span>
<span class="w">          </span>+<span class="w"> </span><span class="nv">port</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>known<span class="w"> </span>after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">          </span>~<span class="w"> </span><span class="nv">uuid</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;5c96bf54-a396-47c5-ab12-574f630bcb80&quot;</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="o">(</span>known
after<span class="w"> </span>apply<span class="o">)</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
</pre></div>
<p>Notez qu'il y a plusieurs avertissements qui vous informent de ce qui sera modifié, sans oublier
</p>
<div class="mw-highlight mw-highlight-lang-shell mw-content-ltr" dir="ltr"><pre><span></span>Plan:<span class="w"> </span><span class="m">2</span><span class="w"> </span>to<span class="w"> </span>add,<span class="w"> </span><span class="m">0</span><span class="w"> </span>to<span class="w"> </span>change,<span class="w"> </span><span class="m">2</span><span class="w"> </span>to<span class="w"> </span>destroy.
</pre></div>
<p>Votre VM sera créée avec une nouvelle clé SSH. Si vous vous êtes déjà connecté, vous devrez donc supprimer la clé SSH de votre fichier <code>known_hosts</code> (ou équivalent). Après cela, la première chose à faire est de vous connecter et d'appliquer toutes les mises à jour disponibles.
</p>
<div class="mw-highlight mw-highlight-lang-shell mw-content-ltr" dir="ltr"><pre><span></span><span class="o">[</span>centos@myvm<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>sudo<span class="w"> </span>yum<span class="w"> </span>update<span class="w"> </span>-y
...
<span class="o">[</span><span class="w"> </span>goes<span class="w"> </span><span class="k">for</span><span class="w"> </span>ages<span class="w"> </span><span class="o">]</span>
</pre></div>
<p>Vous avez maintenant une VM terraformée fonctionnelle, un moyen d'y accéder, un endroit où enregistrer les données et les dernières mises à jour du système d'exploitation.
</p>
<h2><span class="mw-headline" id="Exemple_complet">Exemple complet</span></h2>
<div class="mw-highlight mw-highlight-lang-terraform mw-content-ltr" dir="ltr"><pre><span></span><span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;openstack&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="p">}</span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;openstack_compute_instance_v2&quot;</span><span class="w"> </span><span class="nv">&quot;myvm&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;myvm&quot;</span>
<span class="w">  </span><span class="na">flavor_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0351ddb0-00d0-4269-80d3-913029d1a111&quot;</span>
<span class="w">  </span><span class="na">key_pair</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Aluminum&quot;</span>
<span class="w">  </span><span class="na">security_groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span>

<span class="w">  </span><span class="nb">network</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my-tenant-net&quot;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nb">block_device</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">uuid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;80ceebef-f9aa-462e-a793-d3c1cf96123b&quot;</span>
<span class="w">    </span><span class="na">source_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;image&quot;</span>
<span class="w">    </span><span class="na">destination_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;volume&quot;</span>
<span class="w">    </span><span class="na">volume_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span>
<span class="w">    </span><span class="na">boot_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="w">    </span><span class="na">delete_on_termination</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;openstack_networking_floatingip_v2&quot;</span><span class="w"> </span><span class="nv">&quot;myvm_fip&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;provider-199-2&quot;</span>
<span class="p">}</span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;openstack_compute_floatingip_associate_v2&quot;</span><span class="w"> </span><span class="nv">&quot;myvm_fip&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">floating_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">openstack_networking_floatingip_v2.myvm_fip.address</span>
<span class="w">  </span><span class="na">instance_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">openstack_compute_instance_v2.myvm.id</span>
<span class="p">}</span>
</pre></div>
<h2><span class="mw-headline" id="Annexe">Annexe</span></h2>
<h3><span id="R.C3.A9f.C3.A9rences"></span><span class="mw-headline" id="Références">Références</span></h3>
<p>Ce qui suit pourrait intéresser ceux qui veulent explorer plus en profondeur et développer le travail effectué dans ce tutoriel. Notez qu’au moment de la rédaction de cet article, la documentation du fournisseur OpenStack utilise la syntaxe v0.11, mais cela devrait fonctionner sans problème sous v0.12.
</p>
<ul><li><a rel="nofollow" class="external text" href="https://www.terraform.io/intro/index.html">What is Terraform?</a></li>
<li><a rel="nofollow" class="external text" href="https://www.terraform.io/docs/providers/openstack/index.html">OpenStack Provider</a></li>
<li><a rel="nofollow" class="external text" href="https://www.terraform.io/docs/providers/openstack/r/compute_instance_v2.html">OpenStack compute instance v2</a>&#160;: plusieurs cas d'usage pour la création d'instances dans OpenStack avec Terraform</li>
<li><a href="/wiki/Cloud/fr" title="Cloud/fr">La page wiki sur notre service infonuagique</a> et la page  <a href="/wiki/Cloud_Quick_Start/fr" title="Cloud Quick Start/fr">Cloud&#160;: Guide de démarrage</a></li></ul>
<h3><span class="mw-headline" id="Exemples">Exemples</span></h3>
<ul><li>Projet <a rel="nofollow" class="external text" href="https://github.com/ComputeCanada/magic_castle">Magic Castle</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/diodonfrost/terraform-openstack-examples">diodonfrost/terraform-openstack-examples</a> sur GitHub</li></ul>
<h3><span class="mw-headline" id="UUID_des_images_et_gabarits_sous_Horizon">UUID des images et gabarits sous Horizon</span></h3>
<p>Si vous êtes plus à l’aise avec l’interface Web d’OpenStack, voici un aide-mémoire rapide pour trouver les UUID de gabarits et d’images dans Horizon. Vous devrez vous connecter à l’interface Web du nuage pour obtenir ces informations.
</p><p>Pour trouver l’UUID d’une image, recherchez l’élément de menu <i>Images</i> sous <i>Compute</i> (1).
</p>
<figure class="mw-default-size" typeof="mw:File/Thumb"><a href="/wiki/File:Images-1.png" class="mw-file-description"><img src="/mediawiki/images/thumb/d/df/Images-1.png/300px-Images-1.png" decoding="async" width="300" height="119" class="mw-file-element" srcset="/mediawiki/images/thumb/d/df/Images-1.png/450px-Images-1.png 1.5x, /mediawiki/images/thumb/d/df/Images-1.png/600px-Images-1.png 2x" /></a><figcaption>Localiser et sélectionner une image</figcaption></figure>
<p>Vous obtiendrez une liste des images disponibles pour votre projet. Cliquez sur celle que vous voulez utiliser. (2)
</p>
<figure class="mw-default-size" typeof="mw:File/Thumb"><a href="/wiki/File:Images-2.png" class="mw-file-description"><img src="/mediawiki/images/thumb/7/7a/Images-2.png/300px-Images-2.png" decoding="async" width="300" height="114" class="mw-file-element" srcset="/mediawiki/images/thumb/7/7a/Images-2.png/450px-Images-2.png 1.5x, /mediawiki/images/thumb/7/7a/Images-2.png/600px-Images-2.png 2x" /></a><figcaption>UUID de l'image</figcaption></figure>
<p>… et vous avez l'ID.
</p><p>C'est un peu plus compliqué pour les gabarits.
</p><p>Pour cela, vous devez simuler le lancement d'une instance, mais cela ne vous donne même pas l'ID du gabarit. Mais vous connaîtrez au moins le nom du gabarit que vous voulez.
</p>
<figure class="mw-default-size" typeof="mw:File/Thumb"><a href="/wiki/File:Flavour-1.png" class="mw-file-description"><img src="/mediawiki/images/thumb/b/b4/Flavour-1.png/300px-Flavour-1.png" decoding="async" width="300" height="69" class="mw-file-element" srcset="/mediawiki/images/thumb/b/b4/Flavour-1.png/450px-Flavour-1.png 1.5x, /mediawiki/images/thumb/b/b4/Flavour-1.png/600px-Flavour-1.png 2x" /></a><figcaption>Lancer une instance</figcaption></figure>
<p>Sur la page de l'instance, sélectionnez <i>Flavor</i> (pour <i>Gabarit</i>).
</p>
<figure class="mw-default-size" typeof="mw:File/Thumb"><a href="/wiki/File:Flavour-2.png" class="mw-file-description"><img src="/mediawiki/images/thumb/c/cd/Flavour-2.png/300px-Flavour-2.png" decoding="async" width="300" height="98" class="mw-file-element" srcset="/mediawiki/images/thumb/c/cd/Flavour-2.png/450px-Flavour-2.png 1.5x, /mediawiki/images/thumb/c/cd/Flavour-2.png/600px-Flavour-2.png 2x" /></a><figcaption>Option <i>Flavor</i></figcaption></figure>
<p>Vous devriez maintenant avoir une liste de gabarits et voir ceux qui correspondent à vos quotas. Par contre, tout ce que vous avez ici, c'est le nom.
</p>
<figure class="mw-default-size" typeof="mw:File/Thumb"><a href="/wiki/File:Flavour-3.png" class="mw-file-description"><img src="/mediawiki/images/thumb/d/d4/Flavour-3.png/300px-Flavour-3.png" decoding="async" width="300" height="93" class="mw-file-element" srcset="/mediawiki/images/thumb/d/d4/Flavour-3.png/450px-Flavour-3.png 1.5x, /mediawiki/images/thumb/d/d4/Flavour-3.png/600px-Flavour-3.png 2x" /></a><figcaption>Sélectionner un gabarit</figcaption></figure>
<p>Pour obtenir l'ID, il y a deux options&#160;:
</p>
<ol><li>Utilisez le nom pour la première exécution de Terraform, puis récupérez l'ID à partir du fichier de sortie ou d'état, et enfin, changez votre configuration pour utiliser l'ID à la place. Cela ne devrait pas tenter de recréer la VM, mais vérifiez avant d'accepter <code>terraform apply</code>.</li>
<li>Passez à l'utilisation de l'interface de ligne de commande OpenStack. (Recommandé.)</li></ol>
<!-- 
NewPP limit report
Cached time: 20250530235036
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc]
CPU time usage: 0.126 seconds
Real time usage: 2.432 seconds
Preprocessor visited node count: 192/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/100
Expensive parser function count: 22/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 67316/5000000 bytes
ExtLoops count: 0/100
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key ccwiki:pcache:idhash:12033-0!canonical and timestamp 20250530235036 and revision id 172834. Rendering was triggered because: page-view
 -->
</div>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://docs.alliancecan.ca/mediawiki/index.php?title=Terraform/fr&amp;oldid=172834">https://docs.alliancecan.ca/mediawiki/index.php?title=Terraform/fr&amp;oldid=172834</a>"</div></div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="/mediawiki/index.php?title=Category:Pages_using_deprecated_source_tags&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages using deprecated source tags (page does not exist)">Pages using deprecated source tags</a></li><li><a href="/wiki/Category:Cloud" title="Category:Cloud">Cloud</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		
<nav id="p-personal" class="mw-portlet mw-portlet-personal vector-user-menu-legacy vector-menu" aria-labelledby="p-personal-label"  >
	<h3
		id="p-personal-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Personal tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="pt-uls" class="mw-list-item active"><a class="uls-trigger" href="#"><span>English</span></a></li><li id="pt-login" class="mw-list-item"><a href="/mediawiki/index.php?title=Special:UserLogin&amp;returnto=Terraform%2Ffr" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span>Log in</span></a></li>
		</ul>
		
	</div>
</nav>

		<div id="left-navigation">
			
<nav id="p-namespaces" class="mw-portlet mw-portlet-namespaces vector-menu-tabs vector-menu-tabs-legacy vector-menu" aria-labelledby="p-namespaces-label"  >
	<h3
		id="p-namespaces-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Namespaces</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-nstab-main" class="selected mw-list-item"><a href="/wiki/Terraform/fr" title="View the content page [c]" accesskey="c"><span>Page</span></a></li><li id="ca-talk" class="new mw-list-item"><a href="/mediawiki/index.php?title=Talk:Terraform/fr&amp;action=edit&amp;redlink=1" rel="discussion" class="new" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
		</ul>
		
	</div>
</nav>

			
<nav id="p-variants" class="mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown vector-menu" aria-labelledby="p-variants-label"  >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox"
		aria-labelledby="p-variants-label"
	>
	<label
		id="p-variants-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">français</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			
<nav id="p-views" class="mw-portlet mw-portlet-views vector-menu-tabs vector-menu-tabs-legacy vector-menu" aria-labelledby="p-views-label"  >
	<h3
		id="p-views-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Views</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-view" class="selected mw-list-item"><a href="/wiki/Terraform/fr"><span>Read</span></a></li><li id="ca-viewsource" class="mw-list-item"><a href="/mediawiki/index.php?title=Terraform/fr&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e"><span>View source</span></a></li><li id="ca-history" class="mw-list-item"><a href="/mediawiki/index.php?title=Terraform/fr&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
		</ul>
		
	</div>
</nav>

			
<nav id="p-cactions" class="mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-menu" aria-labelledby="p-cactions-label"  title="More options" >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox"
		aria-labelledby="p-cactions-label"
	>
	<label
		id="p-cactions-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<h3 >Search</h3>
	<form action="/mediawiki/index.php" id="searchform" class="vector-search-box-form">
		<div id="simpleSearch"
			class="vector-search-box-inner"
			 data-search-loc="header-navigation">
			<input class="vector-search-box-input"
				 type="search" name="search" placeholder="Search Alliance Doc" aria-label="Search Alliance Doc" autocapitalize="sentences" title="Search Alliance Doc [f]" accesskey="f" id="searchInput"
			>
			<input type="hidden" name="title" value="Special:Search">
			<input id="mw-searchButton"
				 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search">
			<input id="searchButton"
				 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go">
		</div>
	</form>
</div>

		</div>
	</div>
	
<div id="mw-panel" class="vector-legacy-sidebar">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="/wiki/Technical_documentation"
			title="Visit the main page"></a>
	</div>
	
<nav id="p-navigation" class="mw-portlet mw-portlet-navigation vector-menu-portal portal vector-menu" aria-labelledby="p-navigation-label"  >
	<h3
		id="p-navigation-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Navigation</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-wiki-main-page" class="mw-list-item"><a href="/wiki/Technical_documentation"><span>Wiki Main Page</span></a></li>
		</ul>
		
	</div>
</nav>

	
<nav id="p-sidebar-support" class="mw-portlet mw-portlet-sidebar-support vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-support-label"  >
	<h3
		id="p-sidebar-support-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Support</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-getting-started" class="mw-list-item"><a href="/wiki/Getting_started"><span>Getting started</span></a></li><li id="n-sidebar-technical-support" class="mw-list-item"><a href="/wiki/Technical_support"><span>Getting help</span></a></li><li id="n-sidebar-running-jobs" class="mw-list-item"><a href="/wiki/Running_jobs"><span>Running jobs</span></a></li><li id="n-sidebar-known-issues" class="mw-list-item"><a href="/wiki/Known_issues"><span>Known issues</span></a></li><li id="n-sidebar-system-status" class="mw-list-item"><a href="http://status.computecanada.ca" rel="nofollow"><span>System status</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-sidebar-resources" class="mw-portlet mw-portlet-sidebar-resources vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-resources-label"  >
	<h3
		id="p-sidebar-resources-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Resources</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-Béluga" class="mw-list-item"><a href="/wiki/B%C3%A9luga/en"><span>Béluga</span></a></li><li id="n-Cedar" class="mw-list-item"><a href="/wiki/Cedar"><span>Cedar</span></a></li><li id="n-Graham" class="mw-list-item"><a href="/wiki/Graham"><span>Graham</span></a></li><li id="n-Narval" class="mw-list-item"><a href="/wiki/Narval/en"><span>Narval</span></a></li><li id="n-Niagara" class="mw-list-item"><a href="/wiki/Niagara"><span>Niagara</span></a></li><li id="n-sidebar-cloud" class="mw-list-item"><a href="/wiki/CC-Cloud"><span>Cloud</span></a></li><li id="n-tamIA" class="mw-list-item"><a href="/wiki/TamIA/en"><span>tamIA</span></a></li><li id="n-Killarney" class="mw-list-item"><a href="/wiki/Killarney"><span>Killarney</span></a></li><li id="n-sidebar-quantum-computing" class="mw-list-item"><a href="/wiki/Services_d%27informatique_quantique/en"><span>Quantum computing</span></a></li><li id="n-sidebar-available-software" class="mw-list-item"><a href="/wiki/Available_software"><span>Available software</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-sidebar-alliance" class="mw-portlet mw-portlet-sidebar-alliance vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-alliance-label"  >
	<h3
		id="p-sidebar-alliance-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">The Alliance</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-alliance-main-page" class="mw-list-item"><a href="https://alliancecan.ca/en" rel="nofollow"><span>Alliance main page</span></a></li><li id="n-sidebar-ccdb" class="mw-list-item"><a href="https://ccdb.computecanada.ca/security/login" rel="nofollow"><span>CCDB</span></a></li><li id="n-sidebar-getting-an-account" class="mw-list-item"><a href="https://alliancecan.ca/en/services/advanced-research-computing/account-management/apply-account" rel="nofollow"><span>Getting An Account</span></a></li><li id="n-sidebar-acknowledging-alliance" class="mw-list-item"><a href="https://alliancecan.ca/en/services/advanced-research-computing/research-portal/acknowledging-alliance" rel="nofollow"><span>Acknowledging the Alliance</span></a></li><li id="n-sidebar-aup" class="mw-list-item"><a href="https://alliancecan.ca/en/services/advanced-research-computing/account-management/policies" rel="nofollow"><span>Acceptable Use Policy</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-sidebar-authoring" class="mw-portlet mw-portlet-sidebar-authoring vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-authoring-label"  >
	<h3
		id="p-sidebar-authoring-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Authoring</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-guidelines" class="mw-list-item"><a href="/wiki/Authoring_guidelines"><span>Guidelines</span></a></li><li id="n-sidebar-mediawiki-help" class="mw-list-item"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents"><span>MediaWiki Help</span></a></li><li id="n-recentchanges" class="mw-list-item"><a href="/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-tb" class="mw-portlet mw-portlet-tb vector-menu-portal portal vector-menu" aria-labelledby="p-tb-label"  >
	<h3
		id="p-tb-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="t-whatlinkshere" class="mw-list-item"><a href="/wiki/Special:WhatLinksHere/Terraform/fr" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="/wiki/Special:RecentChangesLinked/Terraform/fr" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="/mediawiki/index.php?title=Terraform/fr&amp;oldid=172834" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="/mediawiki/index.php?title=Terraform/fr&amp;action=info" title="More information about this page"><span>Page information</span></a></li>
		</ul>
		
	</div>
</nav>

	
</div>

</div>

<footer id="footer" class="mw-footer" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 14 February 2025, at 21:06.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="/wiki/CCWiki:Privacy_policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="/wiki/CCWiki:About">About Alliance Doc</a></li>
	<li id="footer-places-disclaimers"><a href="/wiki/CCWiki:General_disclaimer">Disclaimers</a></li>
	<li id="footer-places-mobileview"><a href="https://docs.alliancecan.ca/mediawiki/index.php?title=Terraform/fr&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/mediawiki/resources/assets/poweredby_mediawiki.svg" alt="Powered by MediaWiki" width="88" height="31" loading="lazy"></a></li>
</ul>

</footer>

<script>(RLQ=window.RLQ||[]).push(function(){mw.log.warn("This page is using the deprecated ResourceLoader module \"codex-search-styles\".\n[1.43] Use a CodexModule with codexComponents to set your specific components used: https://www.mediawiki.org/wiki/Codex#Using_a_limited_subset_of_components");});</script>
<script src="https://www.googletagmanager.com/gtag/js?id=G-TVBPRD78K4" async=""></script><script>
window.dataLayer = window.dataLayer || [];

function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-TVBPRD78K4', {});
</script>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":2555,"wgPageParseReport":{"limitreport":{"cputime":"0.126","walltime":"2.432","ppvisitednodes":{"value":192,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":100},"expensivefunctioncount":{"value":22,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":67316,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"loops":{"limitreport-count-limited":{"value":0,"limit":100}},"cachereport":{"timestamp":"20250530235036","ttl":86400,"transientcontent":false}}});});</script>
</body>
</html>